<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thai Fortunate Innovation - Financial Strategy Simulator</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/prop-types/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.10.3/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0f172a',
                        secondary: '#334155',
                        accent: '#2563eb',
                        bg: '#f8fafc'
                    },
                    fontFamily: {
                        sans: ['Prompt', 'Noto Sans SC', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #f1f5f9; color: #1e293b; }
        .app-container { min-height: 100vh; padding-bottom: 40px; }
        .header-bar { background: #0f172a; color: white; padding: 16px 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        
        .card { background: white; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; overflow: hidden; margin-bottom: 16px; transition: transform 0.2s; }
        .card:hover { border-color: #cbd5e1; }
        .card-header { background: #f8fafc; padding: 10px 16px; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: space-between; }
        .card-title { font-weight: 600; color: #334155; font-size: 0.95rem; display: flex; align-items: center; gap: 8px; }
        .card-body { padding: 16px; }

        .input-group { margin-bottom: 8px; }
        .input-label { font-size: 0.85rem; color: #64748b; display: block; margin-bottom: 4px; }
        .input-field { width: 100%; border: 1px solid #cbd5e1; border-radius: 6px; padding: 4px 10px; font-size: 0.9rem; text-align: right; transition: all 0.2s; color: #0f172a; font-weight: 500; }
        .input-field:focus { border-color: #2563eb; outline: none; ring: 2px solid #bfdbfe; }
        .input-row { display: flex; justify-content: space-between; align-items: center; gap: 8px; padding: 4px 0; border-bottom: 1px dashed #f1f5f9; }
        
        .hr-table th { text-align: left; font-size: 0.7rem; color: #64748b; padding-bottom: 4px; }
        .hr-table td { padding: 2px 1px; vertical-align: middle; font-size: 0.7rem; }
        .hr-input { width: 100%; border: 1px solid #e2e8f0; border-radius: 4px; padding: 1px 2px; font-size: 0.7rem; text-align: right; height: 24px; }

        .flow-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 0.85rem; }
        .flow-row.total { font-weight: 700; border-top: 1px solid #e2e8f0; margin-top: 4px; padding-top: 8px; }
        .flow-sub { padding-left: 12px; color: #64748b; font-size: 0.8rem; }

        .scenario-btn { padding: 4px 12px; font-size: 0.75rem; border-radius: 20px; cursor: pointer; border: 1px solid transparent; transition: all 0.2s; }
        .scenario-btn.active { font-weight: bold; transform: scale(1.05); }

        .matrix-table th, .matrix-table td { border: 1px solid #e2e8f0; padding: 6px; text-align: center; font-size: 0.75rem; }
        .matrix-header { background: #f1f5f9; font-weight: 600; color: #475569; }

        .risk-btn {
            font-size: 0.7rem; padding: 6px 8px; border-radius: 6px; border: 1px solid #e2e8f0; background: white; 
            text-align: left; transition: all 0.2s; position: relative; overflow: hidden;
        }
        .risk-btn:hover { border-color: #94a3b8; transform: translateY(-1px); shadow: sm; }
        .risk-btn.active { border-color: #ef4444; background: #fef2f2; color: #991b1b; font-weight: 600; }
        .risk-btn::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: transparent; }
        .risk-btn.cat-1.active::before { background: #f97316; } /* Market - Orange */
        .risk-btn.cat-2.active::before { background: #3b82f6; } /* Supply - Blue */
        .risk-btn.cat-3.active::before { background: #a855f7; } /* Finance - Purple */
        .risk-btn.cat-4.active::before { background: #ef4444; } /* Ops - Red */

        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { height: 8px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        @media print {
            body { background-color: white; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
            .header-bar { padding: 10px; background: white !important; color: black !important; box-shadow: none; border-bottom: 2px solid #000; }
            .header-bar h1 { font-size: 1.5rem; color: #000; }
            .header-bar p { color: #666; }
            .header-controls, .scenario-btn, .print-btn-hide, .toggle-switch-container, .risk-sim-section { display: none !important; }
            .card { box-shadow: none; border: 1px solid #ccc; break-inside: avoid; margin-bottom: 10px; }
            .card-header { background: #eee !important; color: #000; border-bottom: 1px solid #aaa; }
            .input-field { border: none; background: transparent; padding: 0; text-align: right; font-weight: bold; }
            .input-group, .input-row { border-bottom: 1px solid #eee; }
            input[type=range] { display: none; }
            .app-container { padding-bottom: 0; }
            .lg\:col-span-3, .lg\:col-span-5, .lg\:col-span-4 { width: 100% !important; display: block; }
            .bg-slate-800 { background-color: #fff !important; color: #000 !important; border: 2px solid #000; }
            .bg-slate-800 .text-white { color: #000 !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, AreaChart, Area, CartesianGrid, PieChart, Pie, Cell, Legend, ComposedChart, Line, ReferenceLine } = Recharts;

        const fmt = (n) => new Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(n);
        const fmtDec = (n) => new Intl.NumberFormat('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(n);
        const COLORS = ['#3b82f6', '#ef4444', '#f59e0b', '#10b981', '#6366f1', '#8b5cf6', '#ec4899', '#64748b'];

        // --- Helper for Base64 Unicode ---
        const toBase64 = (str) => {
            return window.btoa(unescape(encodeURIComponent(str)));
        };

        const fromBase64 = (str) => {
            return decodeURIComponent(escape(window.atob(str)));
        };

        // --- TRANSLATIONS ---
        const TRANS = {
            th: {
                title: "Thai Fortunate Innovation",
                subtitle: "Financial Strategy Simulator",
                scenario: "SCENARIO:",
                reset: "Reset",
                share: "Share",
                print: "Print",
                section1: "1. Production & Cost",
                capexTitle: "à¹€à¸‡à¸´à¸™à¸¥à¸‡à¸—à¸¸à¸™ & à¹à¸«à¸¥à¹ˆà¸‡à¹€à¸‡à¸´à¸™ (CAPEX)",
                regCapital: "à¸—à¸¸à¸™à¸ˆà¸”à¸—à¸°à¹€à¸šà¸µà¸¢à¸™ (Equity)",
                bankLoan: "ğŸ¦ à¹€à¸‡à¸´à¸™à¸à¸¹à¹‰à¸˜à¸™à¸²à¸„à¸²à¸£ (Bank Loan)",
                loanAmount: "à¸§à¸‡à¹€à¸‡à¸´à¸™à¸à¸¹à¹‰",
                interestRate: "à¸”à¸š.%",
                loanTerm: "à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸² (à¸›à¸µ)",
                interestPerYear: "à¸”à¸š./à¸›à¸µ (à¸¥à¸”à¸•à¹‰à¸™)",
                factory: "à¹‚à¸£à¸‡à¸‡à¸²à¸™",
                machine: "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸ˆà¸±à¸à¸£",
                license: "à¹ƒà¸šà¸­à¸™à¸¸à¸à¸²à¸•",
                stockMoney: "à¹€à¸‡à¸´à¸™à¸ªà¸•à¹‡à¸­à¸„à¸‚à¹‰à¸²à¸§à¸¥à¹‡à¸­à¸•à¹à¸£à¸",
                workingCap: "Working Cap à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­:",
                productionTitle: "à¸à¸²à¸£à¸œà¸¥à¸´à¸• (Yield)",
                yieldRice: "Yield à¸‚à¹‰à¸²à¸§à¸ªà¸²à¸£",
                paddyPrice: "à¸£à¸²à¸„à¸²à¸‚à¹‰à¸²à¸§à¹€à¸›à¸¥à¸·à¸­à¸ (à¸šà¸²à¸—/à¸•à¸±à¸™)",
                paddyUsed: "à¸•à¹‰à¸­à¸‡à¹ƒà¸Šà¹‰à¸‚à¹‰à¸²à¸§à¹€à¸›à¸¥à¸·à¸­à¸:",
                ton: "à¸•à¸±à¸™",
                riceBudget: "à¹ƒà¸Šà¹‰à¸‡à¸šà¸‹à¸·à¹‰à¸­à¸‚à¹‰à¸²à¸§:",
                unitCostTitle: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸•à¹ˆà¸­à¸–à¸¸à¸‡",
                rice: "à¸‚à¹‰à¸²à¸§à¸ªà¸²à¸£",
                bag: "à¸–à¸¸à¸‡",
                sticker: "à¸à¸¥à¹ˆà¸­à¸‡à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡",
                totalUnitCost: "à¸£à¸§à¸¡à¸•à¹‰à¸™à¸—à¸¸à¸™à¸œà¸¥à¸´à¸•à¸•à¹ˆà¸­à¹€à¸”à¸·à¸­à¸™:",
                hrTitle: "à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸à¸™à¸±à¸à¸‡à¸²à¸™",
                role: "à¸•à¸³à¹à¸«à¸™à¹ˆà¸‡",
                count: "à¸„à¸™",
                salary: "à¹€à¸‡à¸´à¸™à¹€à¸”à¸·à¸­à¸™",
                sso: "à¸›à¸£à¸°à¸à¸±à¸™à¸ªà¸±à¸‡à¸„à¸¡ (5%)",
                total: "à¸£à¸§à¸¡",
                expenseTitle: "à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸­à¸·à¹ˆà¸™à¹† (Expenses)",
                varParamTitle: "Variable Cost Parameters",
                elec: "à¸„à¹ˆà¸²à¹„à¸Ÿ",
                platform: "Platform",
                marketing: "Marketing",
                returnRate: "à¸­à¸±à¸•à¸£à¸²à¸„à¸·à¸™à¸ªà¸´à¸™à¸„à¹‰à¸² (%)",
                fixedParamTitle: "Fixed Cost (Other)",
                operationTitle: "Operation & Admin",
                maintenance: "à¸‹à¹ˆà¸­à¸¡à¸šà¸³à¸£à¸¸à¸‡ (%)",
                insurance: "à¸›à¸£à¸°à¸à¸±à¸™à¸ à¸±à¸¢/à¸›à¸µ",
                erp: "ERP Software",
                audit: "à¸„à¹ˆà¸²à¸—à¸³à¸šà¸±à¸à¸Šà¸µ (Audit)",
                travel: "à¹€à¸”à¸´à¸™à¸—à¸²à¸‡/à¸£à¸±à¸šà¸£à¸­à¸‡",
                campaign: "à¹à¸„à¸¡à¹€à¸›à¸à¸¥à¸¸à¹‰à¸™à¸—à¸­à¸‡à¸¯",
                misc: "à¸­à¸·à¹ˆà¸™à¹† (Misc)",
                campaignBreakdown: "ğŸ† Campaign Gold Breakdown",
                reward: "à¸£à¸²à¸‡à¸§à¸±à¸¥",
                qty: "à¸ˆà¸³à¸™à¸§à¸™",
                costPerUnit: "à¸—à¸¸à¸™/à¸«à¸™à¹ˆà¸§à¸¢",
                section2: "2. Strategy & Performance",
                execSummary: "Executive Summary",
                netProfitYear1: "Net Profit (Year 1)",
                payback: "à¸„à¸·à¸™à¸—à¸¸à¸™:",
                month: "à¹€à¸”à¸·à¸­à¸™",
                year: "à¸›à¸µ",
                day: "à¸§à¸±à¸™",
                salesTargetTitle: "à¹€à¸›à¹‰à¸²à¸«à¸¡à¸²à¸¢à¸à¸²à¸£à¸‚à¸²à¸¢ & à¹€à¸„à¸£à¸”à¸´à¸•",
                targetBags: "à¹€à¸›à¹‰à¸²à¸‚à¸²à¸¢ (à¸–à¸¸à¸‡/à¹€à¸”à¸·à¸­à¸™)",
                sellPrice: "à¸£à¸²à¸„à¸²à¸‚à¸²à¸¢ (à¸šà¸²à¸—/à¸–à¸¸à¸‡)",
                creditTerm: "Credit Term (à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²à¹€à¸à¹‡à¸šà¸«à¸™à¸µà¹‰)",
                cash: "à¸‚à¸²à¸¢à¸ªà¸” (0 à¸§à¸±à¸™)",
                credit: "à¹€à¸„à¸£à¸”à¸´à¸•",
                creditWarning: "*à¹€à¸¥à¸·à¸­à¸à¹€à¸„à¸£à¸”à¸´à¸•à¸™à¸²à¸™à¸‚à¸¶à¹‰à¸™ à¹€à¸‡à¸´à¸™à¸ªà¸”à¸ˆà¸°à¹€à¸‚à¹‰à¸²à¸Šà¹‰à¸²à¸¥à¸‡",
                totalSales: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸£à¸§à¸¡",
                targetPerDay: "à¹€à¸›à¹‰à¸²à¸•à¹ˆà¸­à¸§à¸±à¸™",
                targetPerHour: "à¹€à¸›à¹‰à¸²à¸•à¹ˆà¸­ à¸Šà¸¡. (24h)",
                byProductTitle: "à¸£à¸²à¸¢à¹„à¸”à¹‰à¸ˆà¸²à¸à¸à¸²à¸£à¸‚à¸²à¸¢à¸‚à¸­à¸‡à¹€à¸ªà¸µà¸¢ (By-products)",
                item: "à¸£à¸²à¸¢à¸à¸²à¸£",
                pricePerTon: "à¸£à¸²à¸„à¸²/à¸•à¸±à¸™",
                totalIncome: "à¸£à¸§à¸¡ (à¸š.)",
                totalByProductIncome: "à¸£à¸§à¸¡à¸£à¸²à¸¢à¹„à¸”à¹‰à¸‚à¸­à¸‡à¹€à¸ªà¸µà¸¢à¸•à¹ˆà¸­à¹€à¸”à¸·à¸­à¸™",
                logisticsTitle: "à¸£à¸²à¸¢à¹„à¸”à¹‰ Drop-off (J&T Home)",
                ownDeliveryPercent: "à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸ªà¹ˆà¸‡à¹€à¸­à¸‡ (%)",
                dropOffProfit: "à¸„à¹ˆà¸² Drop-off/à¸Šà¸´à¹‰à¸™",
                extraIncome: "à¸£à¸²à¸¢à¹„à¸”à¹‰à¹€à¸à¸´à¹ˆà¸¡:",
                vatRefundTitle: "à¸›à¸£à¸°à¸¡à¸²à¸“à¸à¸²à¸£à¸‚à¸­à¸„à¸·à¸™à¸ à¸²à¸©à¸µà¸‹à¸·à¹‰à¸­ (VAT Refund Est.)",
                vatableExp: "à¸à¸²à¸™à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢ (Vatable Expenses)",
                vatNote: "- à¸„à¹ˆà¸²à¸–à¸¸à¸‡, à¸à¸¥à¹ˆà¸­à¸‡à¸ˆà¸±à¸”à¸ªà¹ˆà¸‡, à¸„à¹ˆà¸²à¹„à¸Ÿ, Platform, Ads à¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™",
                outputVat: "Output VAT (à¸‚à¸²à¸¢)",
                inputVat: "Input VAT (à¸‹à¸·à¹‰à¸­)",
                payMore: "à¸•à¹‰à¸­à¸‡à¸Šà¸³à¸£à¸°à¹€à¸à¸´à¹ˆà¸¡ (Pay)",
                refund: "à¸‚à¸­à¸„à¸·à¸™à¹„à¸”à¹‰ (Refund)",
                monthlyFlowTitle: "Monthly Revenue & Cost Breakdown",
                cashInflow: "1. Cash Inflow",
                salesGross: "- Sales (Gross)",
                vatObligation: "2. VAT Obligation",
                vatNote2: "* VAT à¸ˆà¸²à¸à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸£à¸§à¸¡",
                opOutflow: "3. Operational Outflow",
                varExclVat: "Variable (excl. VAT)",
                fixedCost: "Fixed Cost",
                netCashEbitda: "Net Cash (EBITDA)",
                section3: "3. Financial Outlook",
                cumCashflow: "Cumulative Cashflow",
                bepTitle: "à¸ˆà¸¸à¸”à¸„à¸¸à¹‰à¸¡à¸—à¸¸à¸™ (Break-even Analysis)",
                revStruct: "Revenue Structure",
                costStruct: "Cost Structure",
                sensitivity: "âš ï¸ Sensitivity (Net Profit)",
                tiktokAdsTitle: "TikTok Shop Ads Planning (GMV Max)",
                totalBudget: "Total Budget",
                budgetNote: "à¹€à¸‰à¸à¸²à¸° Marketing %",
                targetRoas: "Target ROAS",
                minRoasNote: "à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Minimum ROAS",
                acos: "ACOS",
                acosNote: "à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸„à¹ˆà¸²à¹à¸­à¸”/GMV",
                maxCpa: "Max CPA (Cost/Order)",
                maxCpaNote: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸•à¹ˆà¸­à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ (à¸«à¹‰à¸²à¸¡à¹€à¸à¸´à¸™)",
                maxCpc: "Max CPC (Bid)",
                maxCpcNote: "à¸£à¸²à¸„à¸²à¸„à¸¥à¸´à¸ (Standard Mode)",
                funnelInput: "Funnel Simulation Inputs",
                basketSize: "Basket Size (à¸–à¸¸à¸‡/à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ)",
                impressionsNeeded: "1. Impressions Needed",
                clicksTraffic: "2. Clicks (Traffic)",
                ordersTarget: "3. Orders (Target)",
                detailedCashflow: "Detailed Monthly Cashflow (Year 1)",
                monthlyGrowth: "Monthly Growth:",
                taxDepTitle: "Tax & Depreciation Details",
                depSchedule: "à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡à¸£à¸²à¸„à¸² (Depreciation Schedule)",
                asset: "à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œ",
                value: "à¸¡à¸¹à¸¥à¸„à¹ˆà¸²",
                lifeYear: "à¸­à¸²à¸¢à¸¸ (à¸›à¸µ)",
                depPerYear: "à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡/à¸›à¸µ",
                corpTax: "à¸ à¸²à¸©à¸µà¸™à¸´à¸•à¸´à¸šà¸¸à¸„à¸„à¸¥ (Corporate Tax)",
                taxableIncome: "à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´à¸—à¸²à¸‡à¸ à¸²à¸©à¸µ (Taxable Income)",
                dividendTitle: "Dividend Policy & Shareholder Return",
                policyInput: "à¸™à¹‚à¸¢à¸šà¸²à¸¢ (Policy Inputs)",
                payoutRatio: "Payout Ratio (%)",
                shareholders: "à¸ˆà¸³à¸™à¸§à¸™à¸œà¸¹à¹‰à¸–à¸·à¸­à¸«à¸¸à¹‰à¸™ (à¸„à¸™)",
                netProfitBreakdown: "à¸—à¸µà¹ˆà¸¡à¸²à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´ (Net Profit Breakdown)",
                shareholderReturn: "à¸œà¸¥à¸•à¸­à¸šà¹à¸—à¸™à¸œà¸¹à¹‰à¸–à¸·à¸­à¸«à¸¸à¹‰à¸™ (Per Shareholder)",
                totalPool: "à¸ˆà¸²à¸à¸¢à¸­à¸”à¸›à¸±à¸™à¸œà¸¥à¸£à¸§à¸¡ (Total Pool)",
                perYear: "à¸šà¸²à¸—/à¸›à¸µ",
                avgPerMonth: "à¹€à¸‰à¸¥à¸µà¹ˆà¸¢",
                financialHealth: "Financial Health Check (Year 1)",
                debtToEquity: "D/E Ratio (à¸«à¸™à¸µà¹‰à¸ªà¸´à¸™à¸•à¹ˆà¸­à¸—à¸¸à¸™)",
                debtToEquityDesc: "à¸«à¸™à¸µà¹‰à¸ªà¸´à¸™à¸•à¹ˆà¸­à¸—à¸¸à¸™ (à¸„à¸§à¸£ < 2.0)",
                returnOnAsset: "à¸œà¸¥à¸•à¸­à¸šà¹à¸—à¸™à¸•à¹ˆà¸­à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œ",
                returnOnEquity: "à¸œà¸¥à¸•à¸­à¸šà¹à¸—à¸™à¸•à¹ˆà¸­à¸ªà¹ˆà¸§à¸™à¸œà¸¹à¹‰à¸–à¸·à¸­à¸«à¸¸à¹‰à¸™",
                assetTurnoverDesc: "à¸«à¸¡à¸¸à¸™à¹€à¸§à¸µà¸¢à¸™à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œ (à¸£à¸­à¸š/à¸›à¸µ)",
                projectionTitle: "Detailed 5-Year Financial Projection (With Tax Shield & Split Growth)",
                npvDesc: "Net Present Value (NPV) à¸„à¸³à¸™à¸§à¸“à¸ˆà¸²à¸à¸à¸£à¸°à¹à¸ªà¹€à¸‡à¸´à¸™à¸ªà¸”à¸ªà¸¸à¸—à¸˜à¸´ 5 à¸›à¸µ à¸«à¸±à¸à¹€à¸‡à¸´à¸™à¸¥à¸‡à¸—à¸¸à¸™à¹€à¸£à¸´à¹ˆà¸¡à¹à¸£à¸",
                aiAnalysis: "ğŸ¤– à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ & à¸„à¸³à¹à¸™à¸°à¸™à¸³ (AI Analysis)",
                financialDeepDive: "ğŸ“Š à¹€à¸ˆà¸²à¸°à¸¥à¸¶à¸à¸ªà¸¸à¸‚à¸ à¸²à¸à¸à¸²à¸£à¹€à¸‡à¸´à¸™ (Financial Deep Dive)",
                adsPerformance: "ğŸ“¢ à¹€à¸ˆà¸²à¸°à¸¥à¸¶à¸à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸à¹‚à¸†à¸©à¸“à¸² (Ads Performance)",
                financialGlossary: "ğŸ“š à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¸•à¸±à¸§à¸¢à¹ˆà¸­à¸—à¸²à¸‡à¸à¸²à¸£à¹€à¸‡à¸´à¸™ (Financial Glossary)",
                marketingGlossary: "ğŸ“¢ à¸„à¸³à¸­à¸˜à¸´à¸šà¸²à¸¢à¸•à¸±à¸§à¸¢à¹ˆà¸­à¸—à¸²à¸‡à¸à¸²à¸£à¸•à¸¥à¸²à¸” & à¹‚à¸†à¸©à¸“à¸² (Marketing & Ads Glossary)",
                
                // --- Additional Translations ---
                beRoas: "Breakeven ROAS (à¸ˆà¸¸à¸”à¸„à¸¸à¹‰à¸¡à¸—à¸¸à¸™)",
                beRoasNote: "à¸«à¹‰à¸²à¸¡à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²à¸™à¸µà¹‰ (à¸à¸³à¹„à¸£ = 0)",
                spreadAnalysis: "âš ï¸ Sensitivity (Spread: Cost vs Price)",
                paddyLabel: "Paddy (Rice Cost)",
                priceLabel: "Selling Price",
                perMonth: "à¸šà¸²à¸—/à¹€à¸”à¸·à¸­à¸™",
                paybackNotYet: "à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸„à¸·à¸™à¸—à¸¸à¸™",
                autoChannel: "à¸„à¸³à¸™à¸§à¸“à¸ˆà¸²à¸ Channel Mix",
                taxSave: "à¸›à¸£à¸°à¸«à¸¢à¸±à¸”",
                capexDesc: "à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²à¸„à¸·à¸™à¸—à¸¸à¸™à¹€à¸‡à¸´à¸™à¸¥à¸‡à¸—à¸¸à¸™à¹€à¸£à¸´à¹ˆà¸¡à¹à¸£à¸",

                // NEW: Scenario Comparison
                scenComp: "à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸š 3 à¸‰à¸²à¸à¸—à¸±à¸¨à¸™à¹Œ (Scenario Comparison)",
                scenWorst: "Worst (à¹à¸¢à¹ˆà¸ªà¸¸à¸”)",
                scenBase: "Base (à¸›à¸à¸•à¸´)",
                scenBest: "Best (à¸”à¸µà¸ªà¸¸à¸”)",
                scenProfit: "à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´",
                scenCash: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸ªà¸´à¹‰à¸™à¸›à¸µ",
                
                // NEW: Ads Matrix
                adsMatrixTitle: "ğŸ¯ Ads Efficiency Matrix (CTR x CVR = ROAS)",
                adsMatX: "CTR (Clip Quality)",
                adsMatY: "CVR (Sale Page)",

                // --- Cash Flow Summary (Below Table) ---
                wcStart: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ (Working Cap)",
                lowestCash: "à¸ˆà¸¸à¸”à¹€à¸‡à¸´à¸™à¸ªà¸”à¸•à¹ˆà¸³à¸ªà¸¸à¸” (Lowest)",
                debtService: "à¸œà¹ˆà¸­à¸™à¹€à¸‡à¸´à¸™à¸•à¹‰à¸™+à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢",
                taxPaidCash: "à¸«à¸±à¸à¸ à¸²à¸©à¸µà¸ˆà¹ˆà¸²à¸¢à¸ˆà¸£à¸´à¸‡à¸›à¸µà¸™à¸µà¹‰ (Cash Paid)",
                netProfitAcc: "à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´à¸—à¸²à¸‡à¸šà¸±à¸à¸Šà¸µ (Net Profit)",
                netProfitDesc: "(à¸£à¸²à¸¢à¹„à¸”à¹‰ - à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢ - à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡ - à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢ - à¸ à¸²à¸©à¸µ)",
                cashEndYear: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸ªà¸¸à¸—à¸˜à¸´à¸ªà¸´à¹‰à¸™à¸›à¸µ (Cash Balance Year End)",
                cashEndDesc: "(à¹€à¸‡à¸´à¸™à¸•à¹‰à¸™ + à¸à¸£à¸°à¹à¸ªà¹€à¸‡à¸´à¸™à¸ªà¸”à¸£à¸±à¸šà¸ˆà¹ˆà¸²à¸¢à¸ˆà¸£à¸´à¸‡ - à¸ à¸²à¸©à¸µ - à¸«à¸™à¸µà¹‰)",

                // --- NEW MODEL TRANSLATIONS ---
                channelMixTitle: "ğŸ›’ Channel Mix Revenue (à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡à¸‚à¸²à¸¢)",
                channelPct: "% à¸¢à¸­à¸”à¸‚à¸²à¸¢",
                platformFeePct: "à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡ %",
                offline: "Offline / Other",
                weightedFee: "à¹€à¸‰à¸¥à¸µà¹ˆà¸¢ (Weighted Fee):",

                elasticityTitle: "ğŸ’ Brand Pricing Elasticity (à¸„à¸§à¸²à¸¡à¸¢à¸·à¸”à¸«à¸¢à¸¸à¹ˆà¸™à¸£à¸²à¸„à¸²)",
                elasticityCoef: "à¸„à¸§à¸²à¸¡à¸­à¹ˆà¸­à¸™à¹„à¸«à¸§à¸•à¹ˆà¸­à¸£à¸²à¸„à¸² (Elasticity)",
                elasticityDesc: (c) => `(-${c} à¹à¸›à¸¥à¸§à¹ˆà¸² à¸‚à¸¶à¹‰à¸™à¸£à¸²à¸„à¸² 10% à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸•à¸ ${(c * 10).toFixed(0)}%)`,
                optPrice: "à¸£à¸²à¸„à¸²à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™",
                estVol: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸„à¸²à¸”à¸à¸²à¸£à¸“à¹Œ",
                estRev: "à¸£à¸²à¸¢à¹„à¸”à¹‰à¸„à¸²à¸”à¸à¸²à¸£à¸“à¹Œ",
                
                clvTitle: "ğŸ‘¥ Customer Lifetime Value (à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸¥à¸¹à¸à¸„à¹‰à¸²à¸•à¸¥à¸­à¸”à¸Šà¸µà¸)",
                freqPerYear: "à¸‹à¸·à¹‰à¸­à¸‹à¹‰à¸³ (à¸„à¸£à¸±à¹‰à¸‡/à¸›à¸µ)",
                retentionRate: "à¸­à¸±à¸•à¸£à¸²à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸² (%)",
                ltv1: "LTV (1 à¸›à¸µ)",
                ltv3: "LTV (3 à¸›à¸µ)",
                cac: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸«à¸²à¸¥à¸¹à¸à¸„à¹‰à¸² (CAC)",
                ltvCacRatio: "LTV : CAC Ratio",
                ltvDesc: "à¸„à¸¸à¹‰à¸¡à¸„à¹ˆà¸²à¹€à¸¡à¸·à¹ˆà¸­ Ratio > 3 à¹€à¸—à¹ˆà¸²",

                seasonalTitle: "â›ˆï¸ Seasonal Supply Shock (à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸¤à¸”à¸¹à¸à¸²à¸¥)",
                enableShock: "à¸ˆà¸³à¸¥à¸­à¸‡à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ (Enable Scenario)",
                shockMonthStart: "à¹€à¸”à¸·à¸­à¸™à¹€à¸£à¸´à¹ˆà¸¡ (Start)",
                shockMonthEnd: "à¹€à¸”à¸·à¸­à¸™à¸ˆà¸š (End)",
                shockCostImpact: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸‚à¹‰à¸²à¸§à¹€à¸à¸´à¹ˆà¸¡ (%)",
                shockDesc: "à¸œà¸¥à¸à¸£à¸°à¸—à¸šà¸ˆà¸°à¹à¸ªà¸”à¸‡à¹ƒà¸™à¸•à¸²à¸£à¸²à¸‡ Cashflow à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™",

                // --- Cash Flow Table Headers ---
                cfSales: "à¸¢à¸­à¸”à¸‚à¸²à¸¢ (Booking)",
                cfInflow: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸£à¸±à¸šà¸ˆà¸£à¸´à¸‡",
                cfExp: "à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢ (Cash)",
                cfVat: "à¸™à¸³à¸ªà¹ˆà¸‡ VAT",
                cfOpCash: "à¸à¸³à¹„à¸£à¹€à¸‡à¸´à¸™à¸ªà¸” (EBITDA)",
                cfBalance: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­",
                start0: "0 (à¹€à¸£à¸´à¹ˆà¸¡)",

                // --- 5-Year Projection Headers ---
                pyYear: "à¸›à¸µà¸—à¸µà¹ˆ",
                pyRev: "à¸£à¸²à¸¢à¹„à¸”à¹‰à¸£à¸§à¸¡",
                pyExp: "à¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢ (Cash)",
                pyEbitda: "EBITDA",
                pyDep: "à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡",
                pyTax: "à¸ à¸²à¸©à¸µà¸ˆà¹ˆà¸²à¸¢",
                pyNet: "à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´",
                pyDiv: "à¸›à¸±à¸™à¸œà¸¥",
                pyCashEnd: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸›à¸¥à¸²à¸¢à¸›à¸µ",

                // --- Items (By-products & Campaigns) ---
                prod_husk: "à¹à¸à¸¥à¸š",
                prod_fine: "à¸£à¸³à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”",
                prod_rough: "à¸£à¸³à¸«à¸¢à¸²à¸š",
                prod_broken: "à¸‚à¹‰à¸²à¸§à¸«à¸±à¸",
                prod_waste: "à¸‚à¸­à¸‡à¹€à¸ªà¸µà¸¢",
                camp_gold1: "à¸¥à¸¸à¹‰à¸™à¸—à¸­à¸‡ 1 à¸ªà¸¥à¸¶à¸‡",
                camp_gold2: "à¸¥à¸¸à¹‰à¸™à¸—à¸­à¸‡ à¸„à¸£à¸¶à¹ˆà¸‡à¸ªà¸¥à¸¶à¸‡",
                camp_free: "à¸à¸´à¸™à¸‚à¹‰à¸²à¸§à¸Ÿà¸£à¸µ 1 à¸›à¸µ",
                refundDeduction: "- Refunds (à¸«à¸±à¸à¸„à¸·à¸™à¸ªà¸´à¸™à¸„à¹‰à¸²)",

                // NEW: Risk Simulator
                riskTitle: "ğŸš¨ Risk Simulation Center (à¸ˆà¸³à¸¥à¸­à¸‡à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡)",
                riskLabelMarket: "1. Market Risk",
                riskLabelSupply: "2. Supply & Prod",
                riskLabelFin: "3. Financial",
                riskLabelOps: "4. Ops & Human",
                riskAnalTitle: "ğŸ¤– AI Risk Analysis",
                simLogic: "âš ï¸ Logic à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸„à¸³à¸™à¸§à¸“ (Assumption):",
                impact: "à¸œà¸¥à¸à¸£à¸°à¸—à¸š (Impact):",
                cause: "à¸ªà¸²à¹€à¸«à¸•à¸¸ (Cause):",
                strategy: "à¸à¸¥à¸¢à¸¸à¸—à¸˜à¹Œà¸£à¸±à¸šà¸¡à¸·à¸­ (Strategy):",
                simActive: "Simulation Active:",
                stopSim: "Stop Simulation",
                
                // NEW: Capacity Engine
                capTitle: "âš™ï¸ äº§èƒ½åˆ©ç”¨å¼•æ“ (Capacity Utilization Engine)",
                maxCapInput: "à¸à¸³à¸¥à¸±à¸‡à¸œà¸¥à¸´à¸•à¸ªà¸¹à¸‡à¸ªà¸¸à¸” (Max Capacity)",
                utilRate: "à¸­à¸±à¸•à¸£à¸²à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸à¸³à¸¥à¸±à¸‡à¸œà¸¥à¸´à¸• (Utilization)",
                fcPerUnit: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸„à¸‡à¸—à¸µà¹ˆà¸•à¹ˆà¸­à¸–à¸¸à¸‡ (Fixed Cost/Unit)",
                capStatus: "à¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¸œà¸¥à¸´à¸•",
                capWarning: "âš ï¸ à¹€à¸à¸´à¸™à¸à¸³à¸¥à¸±à¸‡à¸œà¸¥à¸´à¸•! à¸­à¸²à¸ˆà¸¡à¸µà¸„à¹ˆà¸² OT à¸«à¸£à¸·à¸­à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸ˆà¸±à¸à¸£à¸à¸±à¸‡",
                capOptimal: "âœ… à¸Šà¹ˆà¸§à¸‡à¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡ (Optimal) à¸•à¹‰à¸™à¸—à¸¸à¸™à¸„à¸¸à¹‰à¸¡à¸„à¹ˆà¸²",
                capWaste: "âŒ à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸™à¹‰à¸­à¸¢à¹„à¸› (Under) à¸•à¹‰à¸™à¸—à¸¸à¸™à¸•à¹ˆà¸­à¸«à¸™à¹ˆà¸§à¸¢à¸ªà¸¹à¸‡",

                // AI Builders
                meaning: "à¸„à¸§à¸²à¸¡à¸«à¸¡à¸²à¸¢",
                situation: "à¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œ",
                status: "à¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¹€à¸‡à¸´à¸™",
                advice: "ğŸ’¡ à¸„à¸³à¹à¸™à¸°à¸™à¸³",
                npvPos: "à¸¢à¸­à¸”à¹€à¸¢à¸µà¹ˆà¸¢à¸¡! à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹€à¸›à¹‡à¸™à¸šà¸§à¸ à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸œà¸¥à¸•à¸­à¸šà¹à¸—à¸™à¸—à¸µà¹ˆà¹„à¸”à¹‰ 'à¸Šà¸™à¸°' à¸—à¸±à¹‰à¸‡à¹€à¸‡à¸´à¸™à¹€à¸Ÿà¹‰à¸­à¹à¸¥à¸°à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¹€à¸‡à¸´à¸™à¸à¸¹à¹‰ à¸à¸²à¸£à¸¥à¸‡à¸—à¸¸à¸™à¸™à¸µà¹‰à¸ªà¸£à¹‰à¸²à¸‡à¸„à¸§à¸²à¸¡à¸¡à¸±à¹ˆà¸‡à¸„à¸±à¹ˆà¸‡à¹ƒà¸«à¹‰à¸„à¸¸à¸“à¹„à¸”à¹‰à¸ˆà¸£à¸´à¸‡",
                npvNeg: "à¸™à¹ˆà¸²à¹€à¸›à¹‡à¸™à¸«à¹ˆà¸§à¸‡! à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸•à¸´à¸”à¸¥à¸š à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸à¸³à¹„à¸£à¸—à¸µà¹ˆà¹„à¸”à¹‰à¹ƒà¸™à¸­à¸™à¸²à¸„à¸• à¹€à¸¡à¸·à¹ˆà¸­à¸„à¸´à¸”à¸¥à¸”à¸à¸¥à¸±à¸šà¸¡à¸²à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¹€à¸‡à¸´à¸™à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¹à¸¥à¹‰à¸§ 'à¹„à¸¡à¹ˆà¸„à¸¸à¹‰à¸¡' à¸à¸±à¸šà¹€à¸‡à¸´à¸™à¸—à¸µà¹ˆà¸¥à¸‡à¸—à¸¸à¸™à¹„à¸› à¸«à¸£à¸·à¸­à¹à¸à¹‰à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢/à¹€à¸‡à¸´à¸™à¹€à¸Ÿà¹‰à¸­",
                npvAdvPos: "à¸¥à¸¸à¸¢à¸•à¹ˆà¸­à¹„à¸”à¹‰à¹€à¸¥à¸¢! à¹à¸œà¸™à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸™à¸µà¹‰à¹à¸‚à¹‡à¸‡à¹à¸à¸£à¹ˆà¸‡ à¸¥à¸­à¸‡à¸à¸´à¸ˆà¸²à¸£à¸“à¸² Re-invest à¸à¸³à¹„à¸£à¹€à¸à¸·à¹ˆà¸­à¸‚à¸¢à¸²à¸¢à¸à¸´à¸ˆà¸à¸²à¸£à¹ƒà¸«à¹‰à¹‚à¸•à¹€à¸£à¹‡à¸§à¸à¸§à¹ˆà¸²à¹€à¸”à¸´à¸¡",
                npvAdvNeg: "à¸«à¸¢à¸¸à¸”à¸„à¸´à¸”à¸à¹ˆà¸­à¸™! à¸¥à¸­à¸‡à¸¥à¸”à¹€à¸‡à¸´à¸™à¸¥à¸‡à¸—à¸¸à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ (CAPEX) à¸«à¸£à¸·à¸­à¸«à¸²à¸§à¸´à¸˜à¸µà¹€à¸à¸´à¹ˆà¸¡à¸£à¸²à¸„à¸²à¸‚à¸²à¸¢/à¸¥à¸”à¸•à¹‰à¸™à¸—à¸¸à¸™à¸œà¸¥à¸´à¸• à¸ˆà¸™à¸à¸§à¹ˆà¸² NPV à¸ˆà¸°à¹€à¸›à¹‡à¸™à¸šà¸§à¸",
                roasHigh: "à¸„à¹ˆà¸²à¹à¸­à¸”à¸–à¸¹à¸à¸¡à¸²à¸! à¸¢à¸´à¸‡à¹à¸­à¸” 1 à¸šà¸²à¸— à¹„à¸”à¹‰à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸à¸¥à¸±à¸šà¸¡à¸²à¹€à¸à¸´à¸™ 5 à¸šà¸²à¸— à¸à¸³à¹„à¸£à¹€à¸«à¸¥à¸·à¸­à¹€à¸Ÿà¸·à¸­à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¹ˆà¸²à¸‚à¸­à¸‡à¹à¸¥à¸°à¸„à¹ˆà¸²à¸”à¸³à¹€à¸™à¸´à¸™à¸‡à¸²à¸™",
                roasMed: "à¸à¸­à¹„à¸›à¹„à¸”à¹‰ à¹à¸•à¹ˆà¹€à¸£à¸´à¹ˆà¸¡à¸•à¸¶à¸‡! à¸„à¹ˆà¸²à¹à¸­à¸”à¸à¸´à¸™à¸à¸³à¹„à¸£à¹„à¸›à¸à¸­à¸ªà¸¡à¸„à¸§à¸£ à¸•à¹‰à¸­à¸‡à¸„à¸¸à¸¡à¸‡à¸šà¸”à¸µà¹† à¸­à¸¢à¹ˆà¸²à¹ƒà¸«à¹‰ ROAS à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸²à¸™à¸µà¹‰",
                roasLow: "à¸­à¸±à¸™à¸•à¸£à¸²à¸¢! à¸„à¹ˆà¸²à¹à¸­à¸”à¹à¸à¸‡à¹€à¸à¸´à¸™à¹„à¸› à¸à¸´à¸™à¸à¸³à¹„à¸£à¸ˆà¸™à¹à¸—à¸šà¹„à¸¡à¹ˆà¹€à¸«à¸¥à¸·à¸­ à¸«à¸£à¸·à¸­à¸­à¸²à¸ˆà¹€à¸‚à¹‰à¸²à¹€à¸™à¸·à¹‰à¸­",
                roasAdvHigh: "Scale Up! à¸­à¸±à¸”à¸‡à¸šà¹€à¸à¸´à¹ˆà¸¡à¹„à¸”à¹‰à¹€à¸¥à¸¢ à¸•à¸£à¸²à¸šà¹ƒà¸”à¸—à¸µà¹ˆ ROAS à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸•à¸ à¹€à¸à¸·à¹ˆà¸­à¸à¸­à¸šà¹‚à¸à¸¢à¸¢à¸­à¸”à¸‚à¸²à¸¢à¹ƒà¸«à¹‰à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”",
                roasAdvMed: "Optimize! à¸¥à¸­à¸‡à¸›à¸£à¸±à¸šà¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œà¹ƒà¸«à¹‰à¸„à¸™à¸«à¸¢à¸¸à¸”à¸”à¸¹à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™ à¸«à¸£à¸·à¸­à¸—à¸³à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¹€à¸à¸´à¹ˆà¸¡ Basket Size à¹€à¸à¸·à¹ˆà¸­à¸”à¸¶à¸‡ ROAS à¹ƒà¸«à¹‰à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™",
                roasAdvLow: "Stop & Fix! à¸«à¸¢à¸¸à¸”à¸­à¸±à¸”à¸‡à¸šà¹€à¸à¸´à¹ˆà¸¡ à¸£à¸µà¸šà¹à¸à¹‰à¸„à¸¥à¸´à¸›/à¸£à¸¹à¸›à¸ à¸²à¸ à¸«à¸£à¸·à¸­à¹€à¸Šà¹‡à¸„à¸£à¸²à¸„à¸²à¸„à¸¹à¹ˆà¹à¸‚à¹ˆà¸‡à¸”à¹ˆà¸§à¸™ à¸–à¹‰à¸²à¸à¸·à¸™à¸¢à¸´à¸‡à¸•à¹ˆà¸­à¸ˆà¸°à¸‚à¸²à¸”à¸—à¸¸à¸™",
                cfSafe: (v) => `à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢! à¹€à¸‡à¸´à¸™à¸ªà¸”à¹ƒà¸™à¸¡à¸·à¸­à¹„à¸¡à¹ˆà¹€à¸„à¸¢à¸•à¸´à¸”à¸¥à¸š à¸ˆà¸¸à¸”à¸•à¹ˆà¸³à¸ªà¸¸à¸”à¸­à¸¢à¸¹à¹ˆà¸—à¸µà¹ˆ ${v} à¸šà¸²à¸— à¸˜à¸¸à¸£à¸à¸´à¸ˆà¸«à¸¡à¸¸à¸™à¹€à¸‡à¸´à¸™à¸—à¸±à¸™`,
                cfDanger: (v) => `à¹€à¸‡à¸´à¸™à¸‚à¸²à¸”à¸¡à¸·à¸­! à¸¡à¸µà¸šà¸²à¸‡à¸Šà¹ˆà¸§à¸‡à¸—à¸µà¹ˆà¹€à¸‡à¸´à¸™à¸ªà¸”à¸•à¸´à¸”à¸¥à¸šà¸ªà¸¹à¸‡à¸ªà¸¸à¸” ${v} à¸šà¸²à¸— à¹à¸›à¸¥à¸§à¹ˆà¸²à¹€à¸‡à¸´à¸™à¹€à¸‚à¹‰à¸²à¹„à¸¡à¹ˆà¸—à¸±à¸™à¸ˆà¹ˆà¸²à¸¢à¹€à¸‡à¸´à¸™à¸­à¸­à¸`,
                cfAdvSafe: "à¸šà¸£à¸´à¸«à¸²à¸£à¹€à¸‡à¸´à¸™à¸ªà¸”à¹„à¸”à¹‰à¸”à¸µ à¸­à¸²à¸ˆà¸à¸´à¸ˆà¸²à¸£à¸“à¸²à¸™à¸³à¹€à¸‡à¸´à¸™à¸ªà¹ˆà¸§à¸™à¹€à¸à¸´à¸™à¹„à¸›à¸¥à¸‡à¸—à¸¸à¸™à¸£à¸°à¸¢à¸°à¸ªà¸±à¹‰à¸™ à¸«à¸£à¸·à¸­à¹‚à¸›à¸°à¸«à¸™à¸µà¹‰à¹€à¸à¸·à¹ˆà¸­à¸¥à¸”à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢",
                cfAdvDanger: "à¸«à¸²à¹€à¸‡à¸´à¸™à¹€à¸•à¸´à¸¡à¸”à¹ˆà¸§à¸™! à¹€à¸•à¸£à¸µà¸¢à¸¡à¹€à¸‡à¸´à¸™à¸ªà¸³à¸£à¸­à¸‡à¹€à¸à¸´à¹ˆà¸¡à¹€à¸—à¹ˆà¸²à¸à¸±à¸šà¸¢à¸­à¸”à¸—à¸µà¹ˆà¸•à¸´à¸”à¸¥à¸š à¸«à¸£à¸·à¸­à¹€à¸ˆà¸£à¸ˆà¸²à¸‚à¸­à¹€à¸„à¸£à¸”à¸´à¸•à¹€à¸—à¸­à¸¡à¸‹à¸±à¸à¸à¸¥à¸²à¸¢à¹€à¸­à¸­à¸£à¹Œà¹ƒà¸«à¹‰à¸¢à¸²à¸§à¸‚à¸¶à¹‰à¸™ (à¹€à¸à¸·à¹ˆà¸­à¸ˆà¹ˆà¸²à¸¢à¸Šà¹‰à¸²à¸¥à¸‡)",
                
                // Deep Dive Checks
                ebitdaOk: "âœ… à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸•à¸±à¸§à¹€à¸­à¸‡à¹„à¸”à¹‰ à¸¡à¸µà¹€à¸‡à¸´à¸™à¸ªà¸”à¹€à¸«à¸¥à¸·à¸­à¹„à¸›à¸ˆà¹ˆà¸²à¸¢à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢/à¸ à¸²à¸©à¸µ",
                ebitdaFail: "âŒ à¸‚à¸²à¸”à¸—à¸¸à¸™à¸ˆà¸²à¸à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸‡à¸²à¸™ à¸•à¹‰à¸­à¸‡à¸£à¸µà¸šà¸¥à¸”à¸•à¹‰à¸™à¸—à¸¸à¸™à¸«à¸£à¸·à¸­à¹€à¸à¸´à¹ˆà¸¡à¸¢à¸­à¸”à¸‚à¸²à¸¢",
                dscrOk: "âœ… à¸˜à¸™à¸²à¸„à¸²à¸£à¸£à¸±à¸! à¸¡à¸µà¸à¸³à¹„à¸£à¸à¸­à¸ˆà¹ˆà¸²à¸¢à¸«à¸™à¸µà¹‰à¸ªà¸šà¸²à¸¢à¹†",
                dscrWarn: "âš ï¸ à¸à¸­à¸–à¸¹à¹„à¸– à¹à¸•à¹ˆà¸«à¹‰à¸²à¸¡à¸ªà¸°à¸”à¸¸à¸” à¹„à¸¡à¹ˆà¸‡à¸±à¹‰à¸™à¹„à¸¡à¹ˆà¸¡à¸µà¹€à¸‡à¸´à¸™à¸ˆà¹ˆà¸²à¸¢à¹à¸šà¸‡à¸à¹Œ",
                dscrFail: "âŒ à¸­à¸±à¸™à¸•à¸£à¸²à¸¢! à¸à¸³à¹„à¸£à¹„à¸¡à¹ˆà¸à¸­à¸ˆà¹ˆà¸²à¸¢à¸„à¹ˆà¸²à¸‡à¸§à¸”",
                deOk: "âœ… à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¸—à¸¸à¸™à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ à¹„à¸¡à¹ˆà¸à¸¹à¹‰à¸ˆà¸™à¹€à¸à¸´à¸™à¸•à¸±à¸§",
                deFail: "âŒ à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸ªà¸¹à¸‡! à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹à¸šà¸à¸ à¸²à¸£à¸°à¸«à¸™à¸µà¹‰à¹€à¸¢à¸­à¸°à¹€à¸à¸´à¸™à¹„à¸›",
                bepOk: (v) => `âœ… à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢ à¸¢à¸­à¸”à¸‚à¸²à¸¢à¹€à¸à¸´à¸™à¸ˆà¸¸à¸”à¸„à¸¸à¹‰à¸¡à¸—à¸¸à¸™à¸¡à¸² ${v} à¸–à¸¸à¸‡`,
                bepFail: "âŒ à¸‚à¸²à¸”à¸—à¸¸à¸™! à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸–à¸¶à¸‡à¸ˆà¸¸à¸”à¸„à¸¸à¹‰à¸¡à¸—à¸¸à¸™",
                roeHigh: "âœ… à¸™à¹ˆà¸²à¸¥à¸‡à¸—à¸¸à¸™à¸¡à¸²à¸! à¸œà¸¥à¸•à¸­à¸šà¹à¸—à¸™à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸²à¸•à¸¥à¸²à¸”à¸«à¸¸à¹‰à¸™",
                roeMed: "âš ï¸ à¸à¸­à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸²à¸à¸²à¸à¹à¸šà¸‡à¸à¹Œà¸™à¸´à¸”à¸«à¸™à¹ˆà¸­à¸¢",
                roeLow: "âŒ à¸•à¹ˆà¸³à¹„à¸› à¸­à¸²à¸ˆà¹„à¸¡à¹ˆà¸„à¸¸à¹‰à¸¡à¹€à¸«à¸™à¸·à¹ˆà¸­à¸¢",
                nmHigh: "âœ… à¸à¸³à¹„à¸£à¸«à¸™à¸² à¹à¸‚à¹‡à¸‡à¹à¸à¸£à¹ˆà¸‡",
                nmMed: "âš ï¸ à¸à¸³à¹„à¸£à¸šà¸²à¸‡ à¸£à¸°à¸§à¸±à¸‡à¸•à¹‰à¸™à¸—à¸¸à¸™à¸šà¸²à¸™à¸›à¸¥à¸²à¸¢",
                nmLow: "âŒ à¸à¸³à¹„à¸£à¸™à¹‰à¸­à¸¢à¸¡à¸²à¸ à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸‚à¸²à¸”à¸—à¸¸à¸™",
                fixHigh: "âš ï¸ Fixed Cost à¸ªà¸¹à¸‡! à¸•à¹‰à¸­à¸‡à¹€à¸£à¹ˆà¸‡à¸¢à¸­à¸”à¸‚à¸²à¸¢à¹€à¸à¸·à¹ˆà¸­à¸¥à¸”à¸•à¹‰à¸™à¸—à¸¸à¸™à¸•à¹ˆà¸­à¸«à¸™à¹ˆà¸§à¸¢ (Economy of Scale)",
                varHigh: "âœ… à¹€à¸™à¹‰à¸™ Variable Cost à¸”à¸µà¹à¸¥à¹‰à¸§ à¸¢à¸·à¸”à¸«à¸¢à¸¸à¹ˆà¸™à¸•à¸²à¸¡à¸¢à¸­à¸”à¸‚à¸²à¸¢",
                wcOk: "âœ… à¸¡à¸µà¹€à¸‡à¸´à¸™à¸—à¸¸à¸™à¸ªà¸³à¸£à¸­à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹€à¸à¸µà¸¢à¸‡à¸à¸­",
                wcFail: "âŒ à¹€à¸‡à¸´à¸™à¸—à¸¸à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¹„à¸¡à¹ˆà¸à¸­! à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸ªà¸°à¸”à¸¸à¸”à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆà¹€à¸”à¸·à¸­à¸™à¹à¸£à¸",
                
                // Ads Checks
                acosOk: "âœ… à¸”à¸µà¸¡à¸²à¸! à¸„à¹ˆà¸²à¹à¸­à¸”à¹„à¸¡à¹ˆà¸à¸´à¸™à¸à¸³à¹„à¸£",
                acosFail: "âŒ à¸ªà¸¹à¸‡à¹„à¸›! à¸£à¸°à¸§à¸±à¸‡à¸‚à¸²à¸¢à¸”à¸µà¹à¸•à¹ˆà¹€à¸ˆà¹Šà¸‡à¹€à¸à¸£à¸²à¸°à¸„à¹ˆà¸²à¹à¸­à¸”",
                cpaCheck: (v) => `à¸•à¹‰à¸­à¸‡à¸¡à¸±à¹ˆà¸™à¹ƒà¸ˆà¸§à¹ˆà¸² à¸à¸³à¹„à¸£à¸•à¹ˆà¸­à¸Šà¸´à¹‰à¸™ > ${v} à¸šà¸²à¸— à¹„à¸¡à¹ˆà¸‡à¸±à¹‰à¸™à¸‚à¸²à¸”à¸—à¸¸à¸™`,
                bidCheck: "à¸«à¹‰à¸²à¸¡ Bid à¹€à¸à¸´à¸™à¸£à¸²à¸„à¸²à¸™à¸µà¹‰ à¸–à¹‰à¸²à¸£à¸²à¸„à¸²à¸•à¸¥à¸²à¸”à¸ªà¸¹à¸‡à¸à¸§à¹ˆà¸² à¸•à¹‰à¸­à¸‡à¹€à¸à¸´à¹ˆà¸¡ CVR à¸«à¸£à¸·à¸­ Basket Size à¹à¸—à¸™",
                ctrLow: "âš ï¸ CTR à¸•à¹ˆà¸³à¹„à¸› à¸›à¸£à¸±à¸šà¸„à¸¥à¸´à¸›à¹ƒà¸«à¹‰à¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆ",
                cvrLow: "âš ï¸ CVR à¸•à¹ˆà¸³à¹„à¸› à¸›à¸£à¸±à¸šà¸«à¸™à¹‰à¸²à¹€à¸‹à¸¥à¹€à¸à¸ˆ/à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™",
                aovTip: "à¸–à¹‰à¸²à¹€à¸à¸´à¹ˆà¸¡ AOV à¹„à¸”à¹‰ à¸„à¹ˆà¸²à¸ªà¹ˆà¸‡à¹à¸¥à¸°à¸„à¹ˆà¸²à¹à¸­à¸”à¸•à¹ˆà¸­à¸Šà¸´à¹‰à¸™à¸ˆà¸°à¸–à¸¹à¸à¸¥à¸‡ à¸à¸³à¹„à¸£à¸ˆà¸°à¹€à¸à¸´à¹ˆà¸¡à¸—à¸±à¸™à¸—à¸µ",
                scaleTip: (v) => `à¸•à¹‰à¸­à¸‡à¸«à¸²à¸„à¸™à¸„à¸¥à¸´à¸à¹€à¸‚à¹‰à¸²à¸¡à¸² ${v} à¸„à¸™/à¹€à¸”à¸·à¸­à¸™ à¸–à¸¶à¸‡à¸ˆà¸°à¹„à¸”à¹‰à¸¢à¸­à¸”à¸•à¸²à¸¡à¹€à¸›à¹‰à¸²`,

                // Glossary
                gEbitda: "à¸à¸³à¹„à¸£à¸ˆà¸²à¸à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸‡à¸²à¸™à¸à¹ˆà¸­à¸™à¸«à¸±à¸à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢ à¸ à¸²à¸©à¸µ à¹à¸¥à¸°à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡ à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¸šà¸­à¸à¸„à¸§à¸²à¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸™à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸‡à¸´à¸™à¸ªà¸”à¸ˆà¸£à¸´à¸‡à¸‚à¸­à¸‡à¸à¸´à¸ˆà¸à¸²à¸£",
                gNpv: "à¸¡à¸¹à¸¥à¸„à¹ˆà¸²à¸£à¸§à¸¡à¸‚à¸­à¸‡à¸à¸£à¸°à¹à¸ªà¹€à¸‡à¸´à¸™à¸ªà¸”à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•à¸—à¸µà¹ˆà¸„à¸´à¸”à¸¥à¸”à¸à¸¥à¸±à¸šà¸¡à¸²à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¹€à¸‡à¸´à¸™à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™ à¸«à¸±à¸à¸”à¹‰à¸§à¸¢à¹€à¸‡à¸´à¸™à¸¥à¸‡à¸—à¸¸à¸™ \n> 0 à¸„à¸·à¸­à¸„à¸¸à¹‰à¸¡à¸„à¹ˆà¸²à¸™à¹ˆà¸²à¸¥à¸‡à¸—à¸¸à¸™",
                gDscr: "(EBITDA / à¸«à¸™à¸µà¹‰à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¸•à¹ˆà¸­à¸›à¸µ) à¹ƒà¸Šà¹‰à¸”à¸¹à¸§à¹ˆà¸²à¸¡à¸µà¹€à¸‡à¸´à¸™à¸ªà¸”à¸à¸­à¸ˆà¹ˆà¸²à¸¢à¸«à¸™à¸µà¹‰à¸˜à¸™à¸²à¸„à¸²à¸£à¹„à¸«à¸¡ \nà¸„à¸§à¸£ > 1.25 (à¸˜à¸™à¸²à¸„à¸²à¸£à¸Šà¸­à¸š)",
                gDe: "à¸ªà¸±à¸”à¸ªà¹ˆà¸§à¸™à¸«à¸™à¸µà¹‰à¸ªà¸´à¸™à¹€à¸—à¸µà¸¢à¸šà¸à¸±à¸šà¹€à¸‡à¸´à¸™à¸—à¸¸à¸™à¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡ à¸¢à¸´à¹ˆà¸‡à¸ªà¸¹à¸‡à¸¢à¸´à¹ˆà¸‡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡ \nà¹„à¸¡à¹ˆà¸„à¸§à¸£à¹€à¸à¸´à¸™ 2.0 à¹€à¸—à¹ˆà¸²",
                gRoe: "(à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´ / à¸ªà¹ˆà¸§à¸™à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¸–à¸·à¸­à¸«à¸¸à¹‰à¸™) à¹€à¸‡à¸´à¸™à¸—à¸µà¹ˆà¹€à¸ˆà¹‰à¸²à¸‚à¸­à¸‡à¸¥à¸‡à¹„à¸› 100 à¸šà¸²à¸— à¸‡à¸­à¸à¹€à¸‡à¸¢à¹€à¸›à¹‡à¸™à¸à¸³à¹„à¸£à¸à¸µà¹ˆà¸šà¸²à¸— \nà¸¢à¸´à¹ˆà¸‡à¸ªà¸¹à¸‡à¸¢à¸´à¹ˆà¸‡à¸”à¸µ (à¸„à¸§à¸£ > 10-15%)",
                gBep: "à¸ˆà¸³à¸™à¸§à¸™à¸ªà¸´à¸™à¸„à¹‰à¸²à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸‚à¸²à¸¢à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸£à¸²à¸¢à¹„à¸”à¹‰à¹€à¸—à¹ˆà¸²à¸à¸±à¸šà¸£à¸²à¸¢à¸ˆà¹ˆà¸²à¸¢à¸à¸­à¸”à¸µ (à¸à¸³à¹„à¸£ = 0) à¸–à¹‰à¸²à¸‚à¸²à¸¢à¹€à¸à¸´à¸™à¸ˆà¸¸à¸”à¸™à¸µà¹‰à¸„à¸·à¸­à¸à¸³à¹„à¸£",
                gRoa: "(à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´ / à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œà¸£à¸§à¸¡) à¸§à¸±à¸”à¸„à¸§à¸²à¸¡à¸ªà¸²à¸¡à¸²à¸£à¸–à¹ƒà¸™à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œà¸ªà¸£à¹‰à¸²à¸‡à¸à¸³à¹„à¸£ \nà¸¢à¸´à¹ˆà¸‡à¸ªà¸¹à¸‡à¸¢à¸´à¹ˆà¸‡à¸”à¸µ",
                gAssetTurn: "(à¸¢à¸­à¸”à¸‚à¸²à¸¢ / à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œà¸£à¸§à¸¡) à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œ 1 à¸šà¸²à¸— à¸ªà¸£à¹‰à¸²à¸‡à¸¢à¸­à¸”à¸‚à¸²à¸¢à¹„à¸”à¹‰à¸à¸µà¹ˆà¸šà¸²à¸— à¸šà¸­à¸à¸–à¸¶à¸‡à¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œ",
                gGross: "((à¸¢à¸­à¸”à¸‚à¸²à¸¢ - à¸•à¹‰à¸™à¸—à¸¸à¸™à¸‚à¸²à¸¢) / à¸¢à¸­à¸”à¸‚à¸²à¸¢) % à¸à¸³à¹„à¸£à¸«à¸¥à¸±à¸‡à¸«à¸±à¸à¸•à¹‰à¸™à¸—à¸¸à¸™à¸œà¸¥à¸´à¸•à¹‚à¸”à¸¢à¸•à¸£à¸‡ à¹„à¸¡à¹ˆà¸£à¸§à¸¡à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸šà¸£à¸´à¸«à¸²à¸£",
                gNet: "(à¸à¸³à¹„à¸£à¸ªà¸¸à¸—à¸˜à¸´ / à¸¢à¸­à¸”à¸‚à¸²à¸¢) % à¸à¸³à¹„à¸£à¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­à¸ˆà¸£à¸´à¸‡à¹† à¸«à¸¥à¸±à¸‡à¸«à¸±à¸à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸§à¸¡à¸–à¸¶à¸‡à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¹à¸¥à¸°à¸ à¸²à¸©à¸µ",
                gWc: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ªà¸³à¸£à¸­à¸‡à¹„à¸§à¹‰à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹€à¸”à¸´à¸™à¸•à¹ˆà¸­à¹„à¸”à¹‰ à¹„à¸¡à¹ˆà¸ªà¸°à¸”à¸¸à¸” (à¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸à¸Šà¹ˆà¸§à¸‡à¸£à¸­à¹€à¸à¹‡à¸šà¹€à¸‡à¸´à¸™à¸ˆà¸²à¸à¸¥à¸¹à¸à¸„à¹‰à¸²)",
                gTaxShield: "à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸—à¸²à¸‡à¸ à¸²à¸©à¸µà¸—à¸µà¹ˆà¹ƒà¸«à¹‰à¸™à¸³ \"à¸œà¸¥à¸‚à¸²à¸”à¸—à¸¸à¸™à¸ªà¸°à¸ªà¸¡\" à¹ƒà¸™à¸­à¸”à¸µà¸• à¸¡à¸²à¸«à¸±à¸à¸¥à¸šà¸à¸³à¹„à¸£à¹ƒà¸™à¸­à¸™à¸²à¸„à¸• à¹€à¸à¸·à¹ˆà¸­à¸ˆà¹ˆà¸²à¸¢à¸ à¸²à¸©à¸µà¸™à¹‰à¸­à¸¢à¸¥à¸‡ (à¹ƒà¸Šà¹‰à¹„à¸”à¹‰ 5 à¸›à¸µ)",
                gCapex: "à¹€à¸‡à¸´à¸™à¸¥à¸‡à¸—à¸¸à¸™à¸à¹‰à¸­à¸™à¹ƒà¸«à¸à¹ˆà¹€à¸à¸·à¹ˆà¸­à¸‹à¸·à¹‰à¸­à¸ªà¸´à¸™à¸—à¸£à¸±à¸à¸¢à¹Œà¸£à¸°à¸¢à¸°à¸¢à¸²à¸§ à¹€à¸Šà¹ˆà¸™ à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸£à¸‡à¸‡à¸²à¸™ à¸‹à¸·à¹‰à¸­à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸ˆà¸±à¸à¸£ (à¹„à¸¡à¹ˆà¸–à¸·à¸­à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸£à¸²à¸¢à¹€à¸”à¸·à¸­à¸™ à¹à¸•à¹ˆà¸„à¸´à¸”à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡)",
                gOpex: "à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸£à¸²à¸¢à¸§à¸±à¸™à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¹ƒà¸™à¸à¸²à¸£à¸£à¸±à¸™à¸˜à¸¸à¸£à¸à¸´à¸ˆ à¹€à¸Šà¹ˆà¸™ à¹€à¸‡à¸´à¸™à¹€à¸”à¸·à¸­à¸™ à¸„à¹ˆà¸²à¹„à¸Ÿ à¸„à¹ˆà¸²à¸à¸²à¸£à¸•à¸¥à¸²à¸” (à¸–à¸·à¸­à¹€à¸›à¹‡à¸™à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸—à¸±à¸™à¸—à¸µà¹ƒà¸™à¹€à¸”à¸·à¸­à¸™à¸™à¸±à¹‰à¸™à¹†)",
                gCf: "à¹€à¸ªà¹‰à¸™à¹€à¸¥à¸·à¸­à¸”à¹ƒà¸«à¸à¹ˆà¸‚à¸­à¸‡à¸˜à¸¸à¸£à¸à¸´à¸ˆ à¸„à¸·à¸­à¹€à¸‡à¸´à¸™à¸ªà¸”à¸—à¸µà¹ˆà¹„à¸«à¸¥à¹€à¸‚à¹‰à¸²-à¸­à¸­à¸à¸ˆà¸£à¸´à¸‡ à¸ªà¸³à¸„à¸±à¸à¸à¸§à¹ˆà¸²à¸à¸³à¹„à¸£à¸—à¸²à¸‡à¸šà¸±à¸à¸Šà¸µ à¹€à¸à¸£à¸²à¸°à¸–à¹‰à¸²à¹€à¸‡à¸´à¸™à¸ªà¸”à¸‚à¸²à¸”à¸¡à¸·à¸­ à¸˜à¸¸à¸£à¸à¸´à¸ˆà¹€à¸ˆà¹Šà¸‡à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ",
                gFix: "à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¹€à¸—à¹ˆà¸²à¹€à¸”à¸´à¸¡à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸ˆà¸°à¸‚à¸²à¸¢à¸”à¸µà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ à¹€à¸Šà¹ˆà¸™ à¸„à¹ˆà¸²à¹€à¸Šà¹ˆà¸² à¹€à¸‡à¸´à¸™à¹€à¸”à¸·à¸­à¸™à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸­à¸­à¸Ÿà¸Ÿà¸´à¸¨ à¸„à¹ˆà¸²à¹€à¸ªà¸·à¹ˆà¸­à¸¡à¸£à¸²à¸„à¸²",
                gVar: "à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸—à¸µà¹ˆà¹€à¸à¸´à¹ˆà¸¡à¸¥à¸”à¸•à¸²à¸¡à¸¢à¸­à¸”à¸‚à¸²à¸¢ à¹€à¸Šà¹ˆà¸™ à¸„à¹ˆà¸²à¸‚à¹‰à¸²à¸§à¹€à¸›à¸¥à¸·à¸­à¸ à¸„à¹ˆà¸²à¸–à¸¸à¸‡ à¸„à¹ˆà¸²à¸„à¸­à¸¡à¸¡à¸´à¸Šà¸Šà¸±à¹ˆà¸™ à¸„à¹ˆà¸²à¸‚à¸™à¸ªà¹ˆà¸‡",
                
                gRoas: "(à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸ˆà¸²à¸à¹‚à¸†à¸©à¸“à¸² / à¸„à¹ˆà¸²à¹‚à¸†à¸©à¸“à¸²) à¸ˆà¹ˆà¸²à¸¢à¸„à¹ˆà¸²à¹à¸­à¸” 1 à¸šà¸²à¸— à¹„à¸”à¹‰à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸à¸¥à¸±à¸šà¸¡à¸²à¸à¸µà¹ˆà¸šà¸²à¸— \nà¸¢à¸´à¹ˆà¸‡à¸ªà¸¹à¸‡à¸¢à¸´à¹ˆà¸‡à¸”à¸µ (TikTok Shop à¸„à¸§à¸£ > 5-7x)",
                gAcos: "(à¸„à¹ˆà¸²à¹‚à¸†à¸©à¸“à¸² / à¸¢à¸­à¸”à¸‚à¸²à¸¢) à¸„à¹ˆà¸²à¹à¸­à¸”à¸„à¸´à¸”à¹€à¸›à¹‡à¸™à¸à¸µà¹ˆ % à¸‚à¸­à¸‡à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸ªà¸´à¸™à¸„à¹‰à¸² \nà¸¢à¸´à¹ˆà¸‡à¸•à¹ˆà¸³à¸¢à¸´à¹ˆà¸‡à¸”à¸µ (à¸„à¸§à¸£à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸² % à¸à¸³à¹„à¸£à¸‚à¸±à¹‰à¸™à¸•à¹‰à¸™)",
                gCpa: "(à¸‡à¸šà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” / à¸ˆà¸³à¸™à¸§à¸™à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ) à¸ˆà¹ˆà¸²à¸¢à¹€à¸‡à¸´à¸™à¸à¸µà¹ˆà¸šà¸²à¸—à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸¥à¸¹à¸à¸„à¹‰à¸²à¸‹à¸·à¹‰à¸­ 1 à¸„à¸£à¸±à¹‰à¸‡ \nà¸«à¹‰à¸²à¸¡à¹€à¸à¸´à¸™à¸à¸³à¹„à¸£à¸•à¹ˆà¸­à¸Šà¸´à¹‰à¸™ à¹„à¸¡à¹ˆà¸‡à¸±à¹‰à¸™à¸‚à¸²à¸”à¸—à¸¸à¸™",
                gCpc: "à¸£à¸²à¸„à¸²à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¸—à¸µà¹ˆà¹€à¸£à¸²à¸ˆà¹ˆà¸²à¸¢à¹€à¸¡à¸·à¹ˆà¸­à¸¡à¸µà¸„à¸™à¸„à¸¥à¸´à¸à¹‚à¸†à¸©à¸“à¸² 1 à¸„à¸£à¸±à¹‰à¸‡ \nà¸‚à¸¶à¹‰à¸™à¸­à¸¢à¸¹à¹ˆà¸à¸±à¸šà¸à¸²à¸£à¹à¸‚à¹ˆà¸‡à¸‚à¸±à¸™à¹à¸¥à¸°à¸„à¸¸à¸“à¸ à¸²à¸à¹‚à¸†à¸©à¸“à¸²",
                gCtr: "(à¸ˆà¸³à¸™à¸§à¸™à¸„à¸¥à¸´à¸ / à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥) % à¸„à¸™à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹‚à¸†à¸©à¸“à¸²à¹à¸¥à¹‰à¸§à¸à¸”à¸„à¸¥à¸´à¸ \nà¸¢à¸´à¹ˆà¸‡à¸ªà¸¹à¸‡à¹à¸ªà¸”à¸‡à¸§à¹ˆà¸²à¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œà¸™à¹ˆà¸²à¸ªà¸™à¹ƒà¸ˆ (TikTok à¸„à¸§à¸£ > 1.5-2%)",
                gCvr: "(à¸ˆà¸³à¸™à¸§à¸™à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ / à¸ˆà¸³à¸™à¸§à¸™à¸„à¸¥à¸´à¸) % à¸„à¸™à¸—à¸µà¹ˆà¸„à¸¥à¸´à¸à¹€à¸‚à¹‰à¸²à¸¡à¸²à¹à¸¥à¹‰à¸§à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¸‹à¸·à¹‰à¸­à¸ˆà¸£à¸´à¸‡ \nà¸ªà¸³à¸„à¸±à¸à¸¡à¸²à¸! à¸–à¹‰à¸²à¸•à¹ˆà¸³à¸•à¹‰à¸­à¸‡à¹à¸à¹‰à¸—à¸µà¹ˆà¸«à¸™à¹‰à¸²à¸ªà¸´à¸™à¸„à¹‰à¸²/à¸£à¸²à¸„à¸²",
                gCpm: "à¸£à¸²à¸„à¸²à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¹‚à¸†à¸©à¸“à¸²à¹à¸ªà¸”à¸‡à¸œà¸¥à¸„à¸£à¸š 1,000 à¸„à¸£à¸±à¹‰à¸‡ \nà¹ƒà¸Šà¹‰à¸”à¸¹à¸§à¹ˆà¸²à¸„à¹ˆà¸²à¹‚à¸†à¸©à¸“à¸²à¹à¸à¸‡à¸‚à¸¶à¹‰à¸™à¸«à¸£à¸·à¸­à¸–à¸¹à¸à¸¥à¸‡à¹ƒà¸™à¸ à¸²à¸à¸£à¸§à¸¡",
                gGmv: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸ªà¸´à¸™à¸„à¹‰à¸²à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¸—à¸µà¹ˆà¹€à¸à¸´à¸”à¸‚à¸¶à¹‰à¸™à¸šà¸™à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡ (à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸«à¸±à¸à¸„à¹ˆà¸²à¸˜à¸£à¸£à¸¡à¹€à¸™à¸µà¸¢à¸¡à¸«à¸£à¸·à¸­à¸à¸²à¸£à¸„à¸·à¸™à¸‚à¸­à¸‡)",
                gImp: "à¸ˆà¸³à¸™à¸§à¸™à¸„à¸£à¸±à¹‰à¸‡à¸—à¸µà¹ˆà¹‚à¸†à¸©à¸“à¸²à¸–à¸¹à¸à¸™à¸³à¸ªà¹ˆà¸‡à¹„à¸›à¹à¸ªà¸”à¸‡à¸šà¸™à¸«à¸™à¹‰à¸²à¸ˆà¸­à¸¥à¸¹à¸à¸„à¹‰à¸² (à¸™à¸±à¸šà¸‹à¹‰à¸³à¸„à¸™à¹€à¸”à¸´à¸¡à¹„à¸”à¹‰)",
                gAov: "à¸¢à¸­à¸”à¸‹à¸·à¹‰à¸­à¹€à¸‰à¸¥à¸µà¹ˆà¸¢à¸•à¹ˆà¸­ 1 à¸­à¸­à¹€à¸”à¸­à¸£à¹Œ (à¸¢à¸´à¹ˆà¸‡à¹€à¸¢à¸­à¸°à¸¢à¸´à¹ˆà¸‡à¸”à¸µ à¹€à¸à¸£à¸²à¸°à¸„à¹ˆà¸²à¸ªà¹ˆà¸‡à¹à¸¥à¸°à¸„à¹ˆà¸²à¹à¸­à¸”à¸¡à¸±à¸à¸ˆà¸°à¹€à¸—à¹ˆà¸²à¹€à¸”à¸´à¸¡ à¸—à¸³à¹ƒà¸«à¹‰à¸à¸³à¹„à¸£à¸•à¹ˆà¸­à¸šà¸´à¸¥à¹€à¸à¸´à¹ˆà¸¡à¸‚à¸¶à¹‰à¸™)",
                gAff: "à¸à¸²à¸£à¸‚à¸²à¸¢à¸œà¹ˆà¸²à¸™à¸„à¸™à¸­à¸·à¹ˆà¸™ (Creators) à¹‚à¸”à¸¢à¹€à¸£à¸²à¹à¸šà¹ˆà¸‡ % à¸¢à¸­à¸”à¸‚à¸²à¸¢à¹ƒà¸«à¹‰ \nà¸‚à¹‰à¸­à¸”à¸µà¸„à¸·à¸­: à¸‚à¸²à¸¢à¹„à¸¡à¹ˆà¹„à¸”à¹‰ à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸ˆà¹ˆà¸²à¸¢ (Cost per Action)",
                gReach: "à¸ˆà¸³à¸™à¸§à¸™ \"à¸„à¸™\" à¸ˆà¸£à¸´à¸‡à¹† à¸—à¸µà¹ˆà¹€à¸«à¹‡à¸™à¹‚à¸†à¸©à¸“à¸² (à¸•à¹ˆà¸²à¸‡à¸ˆà¸²à¸ Impression à¸—à¸µà¹ˆà¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™ \"à¸„à¸£à¸±à¹‰à¸‡\") à¹ƒà¸Šà¹‰à¸”à¸¹à¸§à¹ˆà¸²à¹‚à¸†à¸©à¸“à¸²à¸à¸£à¸°à¸ˆà¸²à¸¢à¹„à¸›à¸à¸§à¹‰à¸²à¸‡à¹à¸„à¹ˆà¹„à¸«à¸™"
            },
            cn: {
                title: "æ³°å›½å¹¸è¿åˆ›æ–° (Thai Fortunate Innovation)",
                subtitle: "è´¢åŠ¡æˆ˜ç•¥æ¨¡æ‹Ÿå™¨",
                scenario: "åœºæ™¯ (SCENARIO):",
                reset: "é‡ç½®",
                share: "åˆ†äº«",
                print: "æ‰“å°",
                section1: "1. ç”Ÿäº§ä¸æˆæœ¬ (Production & Cost)",
                capexTitle: "æŠ•èµ„ä¸èµ„é‡‘æ¥æº (CAPEX)",
                regCapital: "æ³¨å†Œèµ„æœ¬ (Equity)",
                bankLoan: "ğŸ¦ é“¶è¡Œè´·æ¬¾ (Bank Loan)",
                loanAmount: "è´·æ¬¾é‡‘é¢",
                interestRate: "åˆ©ç‡%",
                loanTerm: "æœŸé™ (å¹´)",
                interestPerYear: "åˆ©æ¯/å¹´ (é€’å‡)",
                factory: "å·¥å‚",
                machine: "æœºå™¨",
                license: "è®¸å¯è¯",
                stockMoney: "é¦–æ‰¹å¤§ç±³åº“å­˜èµ„é‡‘",
                workingCap: "å‰©ä½™è¥è¿èµ„é‡‘:",
                productionTitle: "ç”Ÿäº§ (Yield)",
                yieldRice: "å¤§ç±³å‡ºç±³ç‡ (Yield)",
                paddyPrice: "ç¨»è°·ä»·æ ¼ (æ³°é“¢/å¨)",
                paddyUsed: "éœ€ç”¨ç¨»è°·:",
                ton: "å¨",
                riceBudget: "å¤§ç±³é‡‡è´­é¢„ç®—:",
                unitCostTitle: "æ¯è¢‹æˆæœ¬",
                rice: "å¤§ç±³",
                bag: "åŒ…è£…è¢‹",
                sticker: "å¿«é€’ç›’",
                totalUnitCost: "æ¯æœˆæ€»ç”Ÿäº§æˆæœ¬:",
                hrTitle: "äººå‘˜ç»“æ„",
                role: "èŒä½",
                count: "äººæ•°",
                salary: "è–ªæ°´",
                sso: "ç¤¾ä¿ (5%)",
                total: "æ€»è®¡",
                expenseTitle: "å…¶ä»–è´¹ç”¨ (Expenses)",
                varParamTitle: "å˜åŠ¨æˆæœ¬å‚æ•°",
                elec: "ç”µè´¹",
                platform: "å¹³å°è´¹",
                marketing: "è¥é”€è´¹",
                returnRate: "é€€è´§ç‡ (Return %)",
                fixedParamTitle: "å›ºå®šæˆæœ¬ (å…¶ä»–)",
                operationTitle: "è¿è¥ä¸ç®¡ç† (Operation)", // New Header
                maintenance: "ç»´ä¿®ä¿å…» (%)",
                insurance: "ä¿é™©è´¹ (å¹´)",
                erp: "ERP è½¯ä»¶",
                audit: "ä¼šè®¡/æ³•å¾‹ (Audit)",
                travel: "å·®æ—…/æ‹›å¾… (Travel)",
                campaign: "é»„é‡‘æ´»åŠ¨",
                misc: "æ‚é¡¹ (Misc)",
                campaignBreakdown: "ğŸ† é»„é‡‘æ´»åŠ¨ç»†åˆ†",
                reward: "å¥–å“",
                qty: "æ•°é‡",
                costPerUnit: "å•ä»·",
                section2: "2. æˆ˜ç•¥ä¸ç»©æ•ˆ (Strategy & Performance)",
                execSummary: "æ‰§è¡Œæ‘˜è¦ (Executive Summary)",
                netProfitYear1: "å‡€åˆ©æ¶¦ (ç¬¬1å¹´)",
                payback: "å›æœ¬æœŸ:",
                month: "æœˆ",
                year: "å¹´",
                day: "å¤©",
                salesTargetTitle: "é”€å”®ç›®æ ‡ & ä¿¡ç”¨",
                targetBags: "é”€å”®ç›®æ ‡ (è¢‹/æœˆ)",
                sellPrice: "å”®ä»· (æ³°é“¢/è¢‹)",
                creditTerm: "ä¿¡ç”¨æœŸé™ (Credit Term)",
                cash: "ç°é”€ (0 å¤©)",
                credit: "ä¿¡ç”¨",
                creditWarning: "*é€‰æ‹©æ›´é•¿çš„ä¿¡ç”¨æœŸï¼Œç°é‡‘å›æµä¼šå˜æ…¢",
                totalSales: "æ€»é”€å”®é¢",
                targetPerDay: "æ¯æ—¥ç›®æ ‡",
                targetPerHour: "æ¯å°æ—¶ç›®æ ‡ (24h)",
                byProductTitle: "å‰¯äº§å“æ”¶å…¥ (By-products)",
                item: "é¡¹ç›®",
                pricePerTon: "ä»·æ ¼/å¨",
                totalIncome: "æ€»è®¡ (é“¢)",
                totalByProductIncome: "æ¯æœˆå‰¯äº§å“æ€»æ”¶å…¥",
                logisticsTitle: "Drop-off æ”¶å…¥ (J&T Home)",
                ownDeliveryPercent: "è‡ªé€æ¯”ä¾‹ (%)",
                dropOffProfit: "Drop-off åˆ©æ¶¦/ä»¶",
                extraIncome: "é¢å¤–æ”¶å…¥:",
                vatRefundTitle: "é¢„ä¼°è¿›é¡¹ç¨é€€ç¨ (VAT Refund Est.)",
                vatableExp: "å¯æŠµæ‰£è´¹ç”¨åŸºæ•° (Vatable Expenses)",
                vatNote: "- ä»…é™åŒ…è£…è¢‹, å¿«é€’ç›’, ç”µè´¹, å¹³å°è´¹, å¹¿å‘Šè´¹",
                outputVat: "é”€é¡¹ç¨ (Output VAT)",
                inputVat: "è¿›é¡¹ç¨ (Input VAT)",
                payMore: "éœ€è¡¥ç¼´ (Pay)",
                refund: "å¯é€€ç¨ (Refund)",
                monthlyFlowTitle: "æ¯æœˆæ”¶å…¥ä¸æˆæœ¬æ˜ç»† (Monthly Revenue & Cost Breakdown)",
                cashInflow: "1. ç°é‡‘æµå…¥",
                salesGross: "- é”€å”®é¢ (æ¯›)",
                refundDeduction: "- é€€è´§ (Refunds)",
                vatObligation: "2. å¢å€¼ç¨ä¹‰åŠ¡",
                vatNote2: "* åŸºäºæ€»é”€å”®é¢çš„å¢å€¼ç¨",
                opOutflow: "3. è¿è¥æµå‡º",
                varExclVat: "å˜åŠ¨æˆæœ¬ (ä¸å«ç¨)",
                fixedCost: "å›ºå®šæˆæœ¬",
                netCashEbitda: "å‡€ç°é‡‘æµ (EBITDA)",
                section3: "3. è´¢åŠ¡å±•æœ› (Financial Outlook)",
                cumCashflow: "ç´¯è®¡ç°é‡‘æµ (Cumulative Cashflow)",
                bepTitle: "ç›ˆäºå¹³è¡¡ç‚¹ (Break-even Analysis)",
                revStruct: "æ”¶å…¥ç»“æ„",
                costStruct: "æˆæœ¬ç»“æ„",
                sensitivity: "âš ï¸ æ•æ„Ÿæ€§åˆ†æ (å‡€åˆ©æ¶¦)",
                tiktokAdsTitle: "TikTok Shop å¹¿å‘Šè§„åˆ’ (GMV Max)",
                totalBudget: "æ€»é¢„ç®—",
                budgetNote: "ä»…é™è¥é”€ %",
                targetRoas: "ç›®æ ‡ ROAS",
                minRoasNote: "è®¾ç½®æœ€ä½ ROAS",
                acos: "ACOS",
                acosNote: "å¹¿å‘Šè´¹/GMV æ¯”ä¾‹",
                maxCpa: "æœ€å¤§ CPA (æˆæœ¬/å•)",
                maxCpaNote: "æ¯å•æˆæœ¬ (ä¸å¯è¶…è¿‡)",
                maxCpc: "æœ€å¤§ CPC (å‡ºä»·)",
                maxCpcNote: "ç‚¹å‡»ä»·æ ¼ (æ ‡å‡†æ¨¡å¼)",
                funnelInput: "æ¼æ–—æ¨¡æ‹Ÿè¾“å…¥",
                basketSize: "å®¢å•é‡ (è¢‹/å•)",
                impressionsNeeded: "1. æ‰€éœ€æ›å…‰ (Impressions)",
                clicksTraffic: "2. ç‚¹å‡»é‡ (æµé‡)",
                ordersTarget: "3. è®¢å•é‡ (ç›®æ ‡)",
                detailedCashflow: "è¯¦ç»†æ¯æœˆç°é‡‘æµ (ç¬¬1å¹´)",
                monthlyGrowth: "æœˆå¢é•¿ç‡:",
                taxDepTitle: "ç¨åŠ¡ä¸æŠ˜æ—§è¯¦æƒ…",
                depSchedule: "æŠ˜æ—§è¡¨ (Depreciation Schedule)",
                asset: "èµ„äº§",
                value: "ä»·å€¼",
                lifeYear: "å¯¿å‘½ (å¹´)",
                depPerYear: "æŠ˜æ—§/å¹´",
                corpTax: "ä¼ä¸šæ‰€å¾—ç¨ (Corporate Tax)",
                taxableIncome: "åº”çº³ç¨æ‰€å¾—é¢ (Taxable Income)",
                dividendTitle: "è‚¡æ¯æ”¿ç­– & è‚¡ä¸œå›æŠ¥",
                policyInput: "æ”¿ç­– (Policy Inputs)",
                payoutRatio: "åˆ†çº¢æ¯”ä¾‹ (%)",
                shareholders: "è‚¡ä¸œäººæ•° (äºº)",
                netProfitBreakdown: "å‡€åˆ©æ¶¦æ¥æº (Net Profit Breakdown)",
                shareholderReturn: "è‚¡ä¸œå›æŠ¥ (Per Shareholder)",
                totalPool: "æ¥è‡ªæ€»åˆ†çº¢æ±  (Total Pool)",
                perYear: "æ³°é“¢/å¹´",
                perMonth: "æ³°é“¢/æœˆ",
                avgPerMonth: "å¹³å‡",
                financialHealth: "è´¢åŠ¡å¥åº·æ£€æŸ¥ (ç¬¬1å¹´)",
                debtToEquity: "å€ºåŠ¡æƒç›Šæ¯” (D/E Ratio)",
                debtToEquityDesc: "å€ºåŠ¡/æƒç›Š (åº” < 2.0)",
                returnOnAsset: "èµ„äº§å›æŠ¥ç‡ (ROA)",
                returnOnEquity: "è‚¡æœ¬å›æŠ¥ç‡ (ROE)",
                assetTurnoverDesc: "èµ„äº§å‘¨è½¬ç‡ (æ¬¡/å¹´)",
                projectionTitle: "è¯¦ç»†5å¹´è´¢åŠ¡é¢„æµ‹ (å«ç¨ç›¾ & åˆ†ç¦»å¢é•¿)",
                npvDesc: "å‡€ç°å€¼ (NPV) æ ¹æ®5å¹´å‡€ç°é‡‘æµå‡å»åˆå§‹æŠ•èµ„è®¡ç®—",
                aiAnalysis: "ğŸ¤– ç»“æœåˆ†æ & å»ºè®® (AI Analysis)",
                financialDeepDive: "ğŸ“Š æ·±å…¥è´¢åŠ¡å¥åº· (Financial Deep Dive)",
                adsPerformance: "ğŸ“¢ æ·±å…¥å¹¿å‘Šç»©æ•ˆ (Ads Performance)",
                financialGlossary: "ğŸ“š è´¢åŠ¡ç¼©ç•¥è¯­è§£é‡Š (Financial Glossary)",
                marketingGlossary: "ğŸ“¢ è¥é”€ä¸å¹¿å‘Šç¼©ç•¥è¯­è§£é‡Š (Marketing & Ads Glossary)",
                
                // --- Additional Translations ---
                beRoas: "ç›ˆäºå¹³è¡¡ ROAS (Breakeven)",
                beRoasNote: "ä¸å¾—ä½äºæ­¤å€¼ (åˆ©æ¶¦ = 0)",
                spreadAnalysis: "âš ï¸ æ•æ„Ÿæ€§åˆ†æ (ä»·å·®: æˆæœ¬ vs å”®ä»·)",
                paddyLabel: "ç¨»è°·æˆæœ¬ (Paddy)",
                priceLabel: "å”®ä»· (Price)",
                perMonth: "æ³°é“¢/æœˆ",
                paybackNotYet: "å°šæœªå›æœ¬",
                autoChannel: "æ ¹æ®æ¸ é“ç»„åˆè®¡ç®—",
                taxSave: "èŠ‚ç¨",
                capexDesc: "æ”¶å›åˆå§‹æŠ•èµ„çš„æœŸé™",

                // NEW: Scenario Comparison
                scenComp: "åœºæ™¯æ¯”è¾ƒ (Scenario Comparison)",
                scenWorst: "æœ€å·® (Worst)",
                scenBase: "æ­£å¸¸ (Base)",
                scenBest: "æœ€å¥½ (Best)",
                scenProfit: "å‡€åˆ©æ¶¦",
                scenCash: "å¹´æœ«ç°é‡‘",

                // NEW: Ads Matrix
                adsMatrixTitle: "ğŸ¯ å¹¿å‘Šæ•ˆç‡çŸ©é˜µ (CTR x CVR = ROAS)",
                adsMatX: "CTR (è§†é¢‘è´¨é‡)",
                adsMatY: "CVR (è½¬åŒ–èƒ½åŠ›)",

                // --- Cash Flow Summary (Below Table) ---
                wcStart: "åˆå§‹èµ„é‡‘ (Working Cap)",
                lowestCash: "æœ€ä½ç°é‡‘ç‚¹ (Lowest)",
                debtService: "å¿è¿˜æœ¬é‡‘+åˆ©æ¯",
                taxPaidCash: "å®ç¼´ç¨æ¬¾ (Cash Paid)",
                netProfitAcc: "ä¼šè®¡å‡€åˆ©æ¶¦ (Net Profit)",
                netProfitDesc: "(æ”¶å…¥ - æ”¯å‡º - æŠ˜æ—§ - åˆ©æ¯ - ç¨)",
                cashEndYear: "å¹´æœ«ç°é‡‘ä½™é¢ (Cash Balance)",
                cashEndDesc: "(åˆå§‹èµ„é‡‘ + å®é™…ç°é‡‘æµ - ç¨ - å€ºåŠ¡)",

                // --- NEW MODEL TRANSLATIONS ---
                channelMixTitle: "ğŸ›’ æ¸ é“æ”¶å…¥ç»„åˆ (Channel Mix)",
                channelPct: "% é”€å”®é¢",
                platformFeePct: "æ‰‹ç»­è´¹ %",
                offline: "çº¿ä¸‹ / å…¶ä»–",
                weightedFee: "å¹³å‡ (Weighted Fee):",

                elasticityTitle: "ğŸ’ å“ç‰Œä»·æ ¼å¼¹æ€§ (Brand Pricing Elasticity)",
                elasticityCoef: "ä»·æ ¼æ•æ„Ÿåº¦ (Elasticity)",
                elasticityDesc: (c) => `(-${c} æ„å‘³ç€ ä»·æ ¼ä¸Šæ¶¨ 10%ï¼Œé”€é‡ä¸‹é™ ${(c * 10).toFixed(0)}%)`,
                optPrice: "å½“å‰ä»·æ ¼",
                estVol: "é¢„ä¼°é”€é‡",
                estRev: "é¢„ä¼°æ”¶å…¥",
                
                clvTitle: "ğŸ‘¥ å®¢æˆ·ç»ˆèº«ä»·å€¼ (CLV)",
                freqPerYear: "è´­ä¹°é¢‘ç‡ (æ¬¡/å¹´)",
                retentionRate: "ç•™å­˜ç‡ (%)",
                ltv1: "LTV (1 å¹´)",
                ltv3: "LTV (3 å¹´)",
                cac: "è·å®¢æˆæœ¬ (CAC)",
                ltvCacRatio: "LTV : CAC æ¯”ä¾‹",
                ltvDesc: "Ratio > 3 å€æ—¶å€¼å¾—æŠ•å…¥",

                seasonalTitle: "â›ˆï¸ å­£èŠ‚æ€§ä¾›åº”å†²å‡» (Seasonal Supply Shock)",
                enableShock: "æ¨¡æ‹Ÿåœºæ™¯ (Enable Scenario)",
                shockMonthStart: "å¼€å§‹æœˆä»½",
                shockMonthEnd: "ç»“æŸæœˆä»½",
                shockCostImpact: "ç¨»è°·æˆæœ¬å¢åŠ  (%)",
                shockDesc: "å½±å“å°†æ˜¾ç¤ºåœ¨æ¯æœˆçš„ç°é‡‘æµè¡¨ä¸­",

                // --- Cash Flow Table Headers ---
                cfSales: "é”€å”®é¢ (é¢„è®¢)",
                cfInflow: "å®é™…ç°é‡‘æµå…¥",
                cfExp: "ç°é‡‘æ”¯å‡º",
                cfVat: "å¢å€¼ç¨å‡€é¢",
                cfOpCash: "è¿è¥ç°é‡‘ (EBITDA)",
                cfBalance: "ç°é‡‘ä½™é¢",
                start0: "0 (åˆå§‹)",

                // --- 5-Year Projection Headers ---
                pyYear: "å¹´ä»½",
                pyRev: "æ€»æ”¶å…¥",
                pyExp: "è¿è¥æ”¯å‡º (ç°é‡‘)",
                pyEbitda: "EBITDA",
                pyDep: "æŠ˜æ—§",
                pyTax: "æ‰€å¾—ç¨",
                pyNet: "å‡€åˆ©æ¶¦",
                pyDiv: "åˆ†çº¢",
                pyCashEnd: "æœŸæœ«ç°é‡‘",

                // --- Items (By-products & Campaigns) ---
                prod_husk: "ç¨»å£³",
                prod_fine: "ç»†ç³ ",
                prod_rough: "ç²—ç³ ",
                prod_broken: "ç¢ç±³",
                prod_waste: "åºŸæ–™",
                camp_gold1: "èµ¢å–é»„é‡‘ 1 é’±",
                camp_gold2: "èµ¢å–é»„é‡‘ 0.5 é’±",
                camp_free: "å…è´¹å¤§ç±³ 1 å¹´",
                refundDeduction: "- é€€è´§ (Refunds)",

                 // NEW: Risk Simulator
                riskTitle: "ğŸš¨ é£é™©æ¨¡æ‹Ÿä¸­å¿ƒ (Risk Simulation Center)",
                riskLabelMarket: "1. å¸‚åœºé£é™©",
                riskLabelSupply: "2. ä¾›åº”ä¸ç”Ÿäº§",
                riskLabelFin: "3. è´¢åŠ¡ä¸ç°é‡‘æµ",
                riskLabelOps: "4. è¿è¥ä¸äººåŠ›",
                riskAnalTitle: "ğŸ¤– AI é£é™©åˆ†æ",
                simLogic: "âš ï¸ æ¨¡æ‹Ÿé€»è¾‘ (Assumption):",
                impact: "å½±å“ (Impact):",
                cause: "åŸå›  (Cause):",
                strategy: "åº”å¯¹ç­–ç•¥ (Strategy):",
                simActive: "æ¨¡æ‹Ÿè¿è¡Œä¸­:",
                stopSim: "åœæ­¢æ¨¡æ‹Ÿ",
                
                // NEW: Capacity Engine
                capTitle: "âš™ï¸ äº§èƒ½åˆ©ç”¨å¼•æ“ (Capacity Utilization Engine)",
                maxCapInput: "æœ€å¤§äº§èƒ½ (Max Capacity)",
                utilRate: "äº§èƒ½åˆ©ç”¨ç‡ (Utilization)",
                fcPerUnit: "å•ä½å›ºå®šæˆæœ¬ (Fixed Cost/Unit)",
                capStatus: "ç”Ÿäº§çŠ¶æ€",
                capWarning: "âš ï¸ è¶…è´Ÿè·ï¼å¯èƒ½äº§ç”ŸåŠ ç­è´¹æˆ–æœºå™¨æ•…éšœ",
                capOptimal: "âœ… æœ€ä½³èŒƒå›´ (Optimal) æˆæœ¬æ•ˆç›Šé«˜",
                capWaste: "âŒ à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¸™à¹‰à¸­à¸¢à¹„à¸› (Under) å•ä½æˆæœ¬é«˜",

                // AI Builders
                meaning: "å«ä¹‰",
                situation: "æƒ…å†µ",
                status: "è´¢åŠ¡çŠ¶å†µ",
                advice: "ğŸ’¡ å»ºè®®",
                npvPos: "å¤ªæ£’äº†ï¼ä¸šåŠ¡ä»·å€¼ä¸ºæ­£ï¼Œè¡¨æ˜å›æŠ¥â€˜è·‘èµ¢â€™äº†é€šè´§è†¨èƒ€å’Œè´·æ¬¾åˆ©æ¯ã€‚è¿™é¡¹æŠ•èµ„ç¡®å®èƒ½ä¸ºæ‚¨åˆ›é€ è´¢å¯Œã€‚",
                npvNeg: "ä»¤äººæ‹…å¿§ï¼ä¸šåŠ¡ä»·å€¼ä¸ºè´Ÿï¼Œè¡¨æ˜æœªæ¥åˆ©æ¶¦æŠ˜ç°å›å½“å‰ä»·å€¼åï¼Œâ€˜ä¸å€¼å¾—â€™æŠ•èµ„ï¼Œæˆ–è€…è¾“ç»™äº†åˆ©æ¯/é€šè´§è†¨èƒ€ã€‚",
                npvAdvPos: "ç»§ç»­åŠ æ²¹ï¼å•†ä¸šè®¡åˆ’ç¨³å¥ã€‚è€ƒè™‘å°†åˆ©æ¶¦å†æŠ•èµ„ä»¥åŠ é€Ÿä¸šåŠ¡æ‰©å¼ ã€‚",
                npvAdvNeg: "å…ˆåœä¸€ä¸‹ï¼å°è¯•å‡å°‘åˆå§‹æŠ•èµ„ (CAPEX) æˆ–å¯»æ‰¾æé«˜å”®ä»·/é™ä½æˆæœ¬çš„æ–¹æ³•ï¼Œç›´åˆ° NPV ä¸ºæ­£ã€‚",
                roasHigh: "å¹¿å‘Šè´¹å¾ˆä¾¿å®œï¼æ¯æŠ•å…¥1æ³°é“¢å¹¿å‘Šè´¹ï¼Œå›æŠ¥è¶…è¿‡5æ³°é“¢é”€å”®é¢ã€‚åˆ©æ¶¦ä¸°åšï¼Œè¶³ä»¥è¦†ç›–æˆæœ¬å’Œè¿è¥ã€‚",
                roasMed: "è¿˜å¯ä»¥ï¼Œä½†å¼€å§‹ç´§å¼ ï¼å¹¿å‘Šè´¹åƒæ‰äº†ä¸€éƒ¨åˆ†åˆ©æ¶¦ã€‚å¿…é¡»ä¸¥æ ¼æ§åˆ¶é¢„ç®—ï¼Œä¸è¦è®© ROAS ä½äºæ­¤æ°´å¹³ã€‚",
                roasLow: "å±é™©ï¼å¹¿å‘Šè´¹å¤ªè´µï¼Œå‡ ä¹åƒå…‰äº†åˆ©æ¶¦ï¼Œç”šè‡³å¯èƒ½äºæœ¬ã€‚",
                roasAdvHigh: "æ‰©å¤§è§„æ¨¡ (Scale Up)ï¼åªè¦ ROAS ä¸ä¸‹é™ï¼Œå°±å¢åŠ é¢„ç®—ï¼Œå°½å¯èƒ½æŠ¢å é”€å”®é¢ã€‚",
                roasAdvMed: "ä¼˜åŒ– (Optimize)ï¼å°è¯•è°ƒæ•´å†…å®¹ä»¥å¸å¼•æ›´å¤šè§‚çœ‹ï¼Œæˆ–é€šè¿‡ä¿ƒé”€å¢åŠ å®¢å•ä»· (Basket Size) ä»¥æé«˜ ROASã€‚",
                roasAdvLow: "åœæ­¢ & ä¿®æ­£ (Stop & Fix)ï¼åœæ­¢å¢åŠ é¢„ç®—ï¼Œç«‹å³ä¿®æ”¹è§†é¢‘/å›¾ç‰‡æˆ–æ£€æŸ¥ç«äº‰å¯¹æ‰‹ä»·æ ¼ã€‚å¦‚æœå¼ºè¡Œç»§ç»­å°†ä¼šäºæŸã€‚",
                cfSafe: (v) => `å®‰å…¨ï¼æ‰‹å¤´ç°é‡‘ä»æœªä¸ºè´Ÿã€‚æœ€ä½ç‚¹ä¸º ${v} æ³°é“¢ï¼Œä¸šåŠ¡èµ„é‡‘å‘¨è½¬é¡ºç•…ã€‚`,
                cfDanger: (v) => `èµ„é‡‘çŸ­ç¼ºï¼æŸäº›æ—¶æœŸç°é‡‘æµå‡ºç°è´Ÿå€¼ï¼Œæœ€é«˜è¾¾ ${v} æ³°é“¢ï¼Œæ„å‘³ç€å…¥ä¸æ•·å‡ºã€‚`,
                cfAdvSafe: "ç°é‡‘æµç®¡ç†è‰¯å¥½ã€‚å¯è€ƒè™‘å°†å¤šä½™èµ„é‡‘ç”¨äºçŸ­æœŸæŠ•èµ„æˆ–å¿è¿˜å€ºåŠ¡ä»¥å‡å°‘åˆ©æ¯ã€‚",
                cfAdvDanger: "ç´§æ€¥æ³¨èµ„ï¼å‡†å¤‡ä¸è´Ÿå€¼ç›¸ç­‰çš„å¤‡ç”¨é‡‘ï¼Œæˆ–ä¸ä¾›åº”å•†åå•†å»¶é•¿ä¿¡ç”¨æœŸï¼ˆä»¥ä¾¿æ™šä»˜æ¬¾ï¼‰ã€‚",

                // Deep Dive Checks
                ebitdaOk: "âœ… ä¸šåŠ¡èƒ½å¤Ÿè‡ªç»™è‡ªè¶³ï¼Œæœ‰å‰©ä½™ç°é‡‘æ”¯ä»˜åˆ©æ¯/ç¨æ¬¾",
                ebitdaFail: "âŒ è¿è¥äºæŸï¼Œå¿…é¡»ç«‹å³é™ä½æˆæœ¬æˆ–å¢åŠ é”€å”®",
                dscrOk: "âœ… é“¶è¡Œå–œæ¬¢ï¼åˆ©æ¶¦è¶³ä»¥è½»æ¾å¿è¿˜å€ºåŠ¡",
                dscrWarn: "âš ï¸ å‹‰å¼ºç»´æŒï¼Œä½†ä¸èƒ½å‡ºå·®é”™ï¼Œå¦åˆ™æ²¡é’±è¿˜é“¶è¡Œ",
                dscrFail: "âŒ å±é™©ï¼åˆ©æ¶¦ä¸è¶³ä»¥æ”¯ä»˜åˆ†æœŸä»˜æ¬¾",
                deOk: "âœ… èµ„æœ¬ç»“æ„å®‰å…¨ï¼Œä¸è¿‡åº¦å€Ÿè´·",
                deFail: "âŒ é«˜é£é™©ï¼ä¸šåŠ¡èƒŒè´Ÿå€ºåŠ¡è¿‡å¤š",
                bepOk: (v) => `âœ… å®‰å…¨ï¼Œé”€å”®é¢è¶…è¿‡ç›ˆäºå¹³è¡¡ç‚¹ ${v} è¢‹`,
                bepFail: "âŒ äºæŸï¼é”€å”®é¢å°šæœªè¾¾åˆ°ç›ˆäºå¹³è¡¡ç‚¹",
                roeHigh: "âœ… éå¸¸å€¼å¾—æŠ•èµ„ï¼å›æŠ¥ç‡é«˜äºè‚¡å¸‚",
                roeMed: "âš ï¸ è¿˜å¯ä»¥ï¼Œç•¥é«˜äºé“¶è¡Œå­˜æ¬¾",
                roeLow: "âŒ å¤ªä½ï¼Œå¯èƒ½ä¸å€¼å¾—",
                nmHigh: "âœ… åˆ©æ¶¦ä¸°åšï¼Œå¼ºåŠ²",
                nmMed: "âš ï¸ åˆ©æ¶¦å¾®è–„ï¼Œæ³¨æ„æˆæœ¬å¤±æ§",
                nmLow: "âŒ åˆ©æ¶¦æå°‘ï¼Œæœ‰äºæŸé£é™©",
                fixHigh: "âš ï¸ å›ºå®šæˆæœ¬é«˜ï¼å¿…é¡»åŠ é€Ÿé”€å”®ä»¥é™ä½å•ä½æˆæœ¬ (è§„æ¨¡ç»æµ)",
                varHigh: "âœ… ä¾§é‡å˜åŠ¨æˆæœ¬å¾ˆå¥½ï¼Œéšé”€å”®é¢çµæ´»è°ƒæ•´",
                wcOk: "âœ… åˆå§‹å‚¨å¤‡èµ„é‡‘å……è¶³",
                wcFail: "âŒ åˆå§‹èµ„é‡‘ä¸è¶³ï¼ç¬¬ä¸€ä¸ªæœˆå°±æœ‰æ–­è£‚é£é™©",
                
                // Ads Checks
                acosOk: "âœ… å¾ˆå¥½ï¼å¹¿å‘Šè´¹æœªä¾µèš€åˆ©æ¶¦",
                acosFail: "âŒ à¸ªà¸¹à¸‡à¹„à¸›! à¸£à¸°à¸§à¸±à¸‡à¸‚à¸²à¸¢à¸”à¸µä½†å› å¹¿å‘Šè´¹è€Œäºæœ¬",
                cpaCheck: (v) => `å¿…é¡»ç¡®ä¿æ¯ä»¶åˆ©æ¶¦ > ${v} æ³°é“¢ï¼Œå¦åˆ™äºæŸ`,
                bidCheck: "å‡ºä»·ä¸å¾—è¶…è¿‡æ­¤ä»·æ ¼ã€‚å¦‚æœå¸‚åœºä»·æ ¼æ›´é«˜ï¼Œå¿…é¡»æé«˜è½¬åŒ–ç‡ (CVR) æˆ–å®¢å•ä»· (Basket Size)",
                ctrLow: "âš ï¸ CTR å¤ªä½ï¼Œè°ƒæ•´è§†é¢‘ä½¿å…¶æ›´æœ‰è¶£",
                cvrLow: "âš ï¸ CVR å¤ªä½ï¼Œè°ƒæ•´é”€å”®é¡µé¢/ä¿ƒé”€æ´»åŠ¨",
                aovTip: "å¦‚æœèƒ½å¢åŠ å®¢å•ä»·ï¼Œæ¯ä»¶çš„è¿è´¹å’Œå¹¿å‘Šè´¹ä¼šé™ä½ï¼Œåˆ©æ¶¦ç«‹å³å¢åŠ ",
                scaleTip: (v) => `æ¯æœˆéœ€è¦ ${v} äººç‚¹å‡»è¿›å…¥æ‰èƒ½è¾¾åˆ°ç›®æ ‡`,

                // Glossary
                gEbitda: "æ‰£é™¤åˆ©æ¯ã€ç¨é¡¹ã€æŠ˜æ—§å‰çš„è¥ä¸šåˆ©æ¶¦ï¼Œè¡¨æ˜ä¼ä¸šåˆ›é€ å®é™…ç°é‡‘çš„èƒ½åŠ›",
                gNpv: "æœªæ¥ç°é‡‘æµæŠ˜ç°å›å½“å‰ä»·å€¼çš„æ€»å’Œï¼Œå‡å»æŠ•èµ„é¢ã€‚\n> 0 è¡¨ç¤ºå€¼å¾—æŠ•èµ„",
                gDscr: "(EBITDA / æ¯å¹´éœ€å¿è¿˜å€ºåŠ¡) ç”¨äºæŸ¥çœ‹æ˜¯å¦æœ‰è¶³å¤Ÿç°é‡‘å¿è¿˜é“¶è¡Œå€ºåŠ¡ã€‚\nåº” > 1.25 (é“¶è¡Œå–œæ¬¢)",
                gDe: "å€ºåŠ¡ä¸æ‰€æœ‰è€…æƒç›Šçš„æ¯”ä¾‹ï¼Œè¶Šé«˜é£é™©è¶Šå¤§ã€‚\nä¸åº”è¶…è¿‡ 2.0 å€",
                gRoe: "(å‡€åˆ©æ¶¦ / è‚¡ä¸œæƒç›Š) è‚¡ä¸œæŠ•å…¥100æ³°é“¢èƒ½äº§ç”Ÿå¤šå°‘åˆ©æ¶¦ã€‚\nè¶Šé«˜è¶Šå¥½ (åº” > 10-15%)",
                gBep: "æ”¶å…¥ç­‰äºæ”¯å‡ºæ—¶çš„é”€å”®é‡ (åˆ©æ¶¦=0)ã€‚è¶…è¿‡æ­¤ç‚¹å³ä¸ºç›ˆåˆ©",
                gRoa: "(å‡€åˆ©æ¶¦ / æ€»èµ„äº§) è¡¡é‡ä½¿ç”¨èµ„äº§åˆ›é€ åˆ©æ¶¦çš„èƒ½åŠ›ã€‚\nè¶Šé«˜è¶Šå¥½",
                gAssetTurn: "(é”€å”®é¢ / æ€»èµ„äº§) 1æ³°é“¢èµ„äº§èƒ½åˆ›é€ å¤šå°‘é”€å”®é¢ï¼Œè¡¨æ˜èµ„äº§ä½¿ç”¨æ•ˆç‡",
                gGross: "((é”€å”®é¢ - é”€å”®æˆæœ¬) / é”€å”®é¢) % æ‰£é™¤ç›´æ¥ç”Ÿäº§æˆæœ¬åçš„åˆ©æ¶¦ï¼Œä¸å«ç®¡ç†è´¹ç”¨",
                gNet: "(å‡€åˆ©æ¶¦ / é”€å”®é¢) % æ‰£é™¤æ‰€æœ‰è´¹ç”¨ï¼ˆå«åˆ©æ¯å’Œç¨ï¼‰åå®é™…å‰©ä½™çš„åˆ©æ¶¦",
                gWc: "ä¸ºä¿æŒä¸šåŠ¡è¿è½¬å¿…é¡»å‚¨å¤‡çš„ç°é‡‘ (åœ¨ç­‰å¾…å®¢æˆ·ä»˜æ¬¾æœŸé—´éå¸¸é‡è¦)",
                gTaxShield: "å…è®¸åˆ©ç”¨è¿‡å»çš„'ç´¯ç§¯äºæŸ'æŠµæ‰£æœªæ¥åˆ©æ¶¦ä»¥å°‘ç¼´ç¨çš„ç¨åŠ¡æƒåˆ© (å¯ç”¨5å¹´)",
                gCapex: "ç”¨äºè´­ä¹°é•¿æœŸèµ„äº§çš„å¤§ç¬”æŠ•èµ„ï¼Œå¦‚å»ºå‚ã€ä¹°æœºå™¨ (ä¸ç®—ä½œæœˆåº¦è´¹ç”¨ï¼Œä½†è®¡ç®—æŠ˜æ—§)",
                gOpex: "ç”¨äºæ—¥å¸¸è¿è¥çš„è´¹ç”¨ï¼Œå¦‚å·¥èµ„ã€ç”µè´¹ã€è¥é”€è´¹ (ç®—ä½œå½“æœˆå³æ—¶è´¹ç”¨)",
                gCf: "ä¼ä¸šçš„å‘½è„‰ï¼Œå³å®é™…æµå…¥æµå‡ºçš„ç°é‡‘ã€‚æ¯”è´¦é¢åˆ©æ¶¦æ›´é‡è¦ï¼Œå› ä¸ºå¦‚æœç°é‡‘æ–­è£‚ï¼Œä¼ä¸šå¯èƒ½ç«‹å³å€’é—­",
                gFix: "æ— è®ºé”€å”®å¥½åéƒ½å¿…é¡»æ”¯ä»˜çš„è´¹ç”¨ï¼Œå¦‚æˆ¿ç§Ÿã€åŠå…¬å®¤å·¥èµ„ã€æŠ˜æ—§",
                gVar: "éšé”€å”®é¢å¢å‡çš„è´¹ç”¨ï¼Œå¦‚ç¨»è°·è´¹ã€åŒ…è£…è¢‹ã€ä½£é‡‘ã€è¿è´¹",
                
                gRoas: "(å¹¿å‘Šå¸¦æ¥çš„é”€å”®é¢ / å¹¿å‘Šè´¹) æ”¯ä»˜1æ³°é“¢å¹¿å‘Šè´¹èƒ½æ¢å›å¤šå°‘é”€å”®é¢ã€‚\nè¶Šé«˜è¶Šå¥½ (TikTok Shop åº” > 5-7x)",
                gAcos: "(å¹¿å‘Šè´¹ / é”€å”®é¢) å¹¿å‘Šè´¹å é”€å”®é¢çš„ç™¾åˆ†æ¯”ã€‚\nè¶Šä½è¶Šå¥½ (åº”ä½äºæ¯›åˆ©ç‡ %)",
                gCpa: "(æ€»é¢„ç®— / è®¢å•æ•°) ä¸ºäº†è·å¾—1ä¸ªå®¢æˆ·è´­ä¹°éœ€è¦æ”¯ä»˜å¤šå°‘é’±ã€‚\nä¸å¾—è¶…è¿‡æ¯ä»¶åˆ©æ¶¦ï¼Œå¦åˆ™äºæŸ",
                gCpc: "å½“æœ‰äººç‚¹å‡»å¹¿å‘Š1æ¬¡æ—¶æˆ‘ä»¬æ”¯ä»˜çš„å¹³å‡ä»·æ ¼ã€‚\nå–å†³äºç«äº‰å’Œå¹¿å‘Šè´¨é‡",
                gCtr: "(ç‚¹å‡»æ•° / å±•ç¤ºæ•°) % çœ‹åˆ°å¹¿å‘Šåç‚¹å‡»çš„äººã€‚\nè¶Šé«˜è¯´æ˜å†…å®¹è¶Šæœ‰è¶£ (TikTok åº” > 1.5-2%)",
                gCvr: "(è®¢å•æ•° / ç‚¹å‡»æ•°) % ç‚¹å‡»è¿›æ¥åå®é™…å†³å®šè´­ä¹°çš„äººã€‚\néå¸¸é‡è¦ï¼å¦‚æœä½éœ€è¦ä¿®æ”¹å•†å“é¡µé¢/ä»·æ ¼",
                gCpm: "ä»·æ ¼æ˜¯å¹¿å‘Šå±•ç¤ºæ»¡1,000æ¬¡éœ€æ”¯ä»˜çš„ä»·æ ¼ã€‚\nç”¨äºæŸ¥çœ‹æ•´ä½“å¹¿å‘Šè´¹ç”¨æ˜¯å˜è´µè¿˜æ˜¯å˜ä¾¿å®œ",
                gGmv: "å¹³å°ä¸Šå‘ç”Ÿçš„æ€»å•†å“é”€å”®é¢ (å°šæœªæ‰£é™¤æ‰‹ç»­è´¹æˆ–é€€è´§)",
                gImp: "å¹¿å‘Šè¢«å‘é€åˆ°å®¢æˆ·å±å¹•æ˜¾ç¤ºçš„æ¬¡æ•° (åŒä¸€ä¸ªäººå¯é‡å¤è®¡ç®—)",
                gAov: "æ¯å•å¹³å‡è´­ä¹°é‡‘é¢ (è¶Šå¤šè¶Šå¥½ï¼Œå› ä¸ºè¿è´¹å’Œå¹¿å‘Šè´¹é€šå¸¸ä¸å˜ï¼Œä½¿æ¯å•åˆ©æ¶¦å¢åŠ )",
                gAff: "é€šè¿‡ä»–äºº (Creators) é”€å”®ï¼Œæˆ‘ä»¬åˆ†ç»™é”€å”®é¢ %ã€‚\nä¼˜ç‚¹æ˜¯ï¼šå–ä¸å‡ºå»ä¸ç”¨ä»˜é’± (Cost per Action)",
                gReach: "çœŸæ­£çœ‹åˆ°å¹¿å‘Šçš„'äºº'æ•° (ä¸åŒäºè®¡ç®—'æ¬¡æ•°'çš„ Impression)ã€‚ç”¨äºæŸ¥çœ‹å¹¿å‘Šä¼ æ’­èŒƒå›´æœ‰å¤šå¹¿"
            }
        };

        const SCENARIOS = {
            // ... (keep SCENARIOS unchanged) ...
            price_war: {
                category: 1,
                label: { th: "à¸ªà¸‡à¸„à¸£à¸²à¸¡à¸£à¸²à¸„à¸² (Price War)", cn: "ä»·æ ¼æˆ˜" },
                apply: (d) => ({ ...d, price: d.price * 0.85, varParams: { ...d.varParams, mktPercent: d.varParams.mktPercent * 1.2 } }),
                math_desc: { th: "à¸£à¸²à¸„à¸²à¸‚à¸²à¸¢ -15%, à¸‡à¸šà¸à¸²à¸£à¸•à¸¥à¸²à¸” +20%", cn: "å”®ä»· -15%, è¥é”€é¢„ç®— +20%" },
                analysis: {
                    th: { impact: "à¸à¸³à¹„à¸£à¸‚à¸±à¹‰à¸™à¸•à¹‰à¸™à¸¥à¸”à¸®à¸§à¸š, à¸•à¹‰à¸™à¸—à¸¸à¸™à¸à¸²à¸£à¸•à¸¥à¸²à¸”à¸à¸¸à¹ˆà¸‡", cause: "à¸„à¸¹à¹ˆà¹à¸‚à¹ˆà¸‡à¸£à¸²à¸¢à¹ƒà¸«à¸à¹ˆà¸¥à¸”à¸£à¸²à¸„à¸²à¸•à¸±à¸”à¸«à¸™à¹‰à¸² à¸«à¸£à¸·à¸­à¸¡à¸µà¸ªà¸´à¸™à¸„à¹‰à¸²à¸ˆà¸µà¸™à¹€à¸‚à¹‰à¸²à¸¡à¸²à¸•à¸µà¸•à¸¥à¸²à¸”", strategy: "à¸­à¸¢à¹ˆà¸²à¸¥à¸”à¸£à¸²à¸„à¸²à¹à¸‚à¹ˆà¸‡! à¹ƒà¸«à¹‰à¹€à¸™à¹‰à¸™à¸ªà¸£à¹‰à¸²à¸‡à¹à¸šà¸£à¸™à¸”à¹Œ à¹€à¸à¸´à¹ˆà¸¡à¸šà¸£à¸´à¸à¸²à¸£ à¸«à¸£à¸·à¸­à¸ˆà¸±à¸”à¹€à¸‹à¹‡à¸•à¸ªà¸´à¸™à¸„à¹‰à¸² (Bundling) à¹€à¸à¸·à¹ˆà¸­à¸«à¸™à¸µà¸à¸²à¸£à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸£à¸²à¸„à¸²" },
                    cn: { impact: "æ¯›åˆ©ç‡æš´è·Œï¼Œè¥é”€æˆæœ¬é£™å‡", cause: "ä¸»è¦ç«äº‰å¯¹æ‰‹é™ä»·æˆ–ä¸­å›½å•†å“è¿›å…¥å¸‚åœº", strategy: "ä¸è¦æ‰“ä»·æ ¼æˆ˜ï¼ä¸“æ³¨äºå“ç‰Œå»ºè®¾ï¼Œå¢åŠ æœåŠ¡æˆ–æ†ç»‘é”€å”® (Bundling) ä»¥é¿å…ä»·æ ¼æ¯”è¾ƒ" }
                }
            },
            new_competitor: {
                category: 1,
                label: { th: "à¸„à¸¹à¹ˆà¹à¸‚à¹ˆà¸‡à¹ƒà¸«à¸¡à¹ˆ (New Competitor)", cn: "æ–°ç«äº‰å¯¹æ‰‹" },
                apply: (d) => ({ ...d, targetBags: d.targetBags * 0.8 }),
                math_desc: { th: "à¸¢à¸­à¸”à¸‚à¸²à¸¢ (à¹€à¸›à¹‰à¸²) -20%", cn: "é”€å”®ç›®æ ‡ -20%" },
                analysis: {
                    th: { impact: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸•à¸ 20%, à¸ªà¹ˆà¸§à¸™à¹à¸šà¹ˆà¸‡à¸•à¸¥à¸²à¸”à¸¥à¸”à¸¥à¸‡", cause: "à¸¡à¸µà¹à¸šà¸£à¸™à¸”à¹Œà¹ƒà¸«à¸¡à¹ˆà¹€à¸‚à¹‰à¸²à¸¡à¸²à¹à¸¢à¹ˆà¸‡à¸à¸²à¸™à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸”à¸´à¸¡", strategy: "à¸£à¸±à¸à¸©à¸²à¸à¸²à¸™à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸à¹ˆà¸² (Retention) à¸”à¹‰à¸§à¸¢ CRM, à¸£à¸°à¸šà¸šà¸ªà¸¡à¸²à¸Šà¸´à¸ à¹à¸¥à¸°à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™à¸‹à¸·à¹‰à¸­à¸‹à¹‰à¸³" },
                    cn: { impact: "é”€å”®é¢ä¸‹é™ 20%ï¼Œå¸‚åœºä»½é¢å‡å°‘", cause: "æ–°å“ç‰ŒæŠ¢å åŸæœ‰å®¢æˆ·ç¾¤", strategy: "é€šè¿‡ CRMã€ä¼šå‘˜ç³»ç»Ÿå’Œå¤è´­ä¿ƒé”€æ¥ç•™ä½è€å®¢æˆ· (Retention)" }
                }
            },
            algo_change: {
                category: 1,
                label: { th: "à¸›à¸£à¸±à¸šà¸­à¸±à¸¥à¸à¸­à¸£à¸´à¸—à¸¶à¸¡ (Algo Change)", cn: "ç®—æ³•å˜æ›´" },
                apply: (d) => ({ ...d, varParams: { ...d.varParams, mktPercent: d.varParams.mktPercent * 1.5 } }),
                math_desc: { th: "à¸‡à¸šà¸à¸²à¸£à¸•à¸¥à¸²à¸” (Ads) +50%", cn: "å¹¿å‘Šé¢„ç®— +50%" },
                analysis: {
                    th: { impact: "à¸„à¹ˆà¸²à¹à¸­à¸”à¹à¸à¸‡à¸‚à¸¶à¹‰à¸™ 50% à¸—à¸±à¸™à¸—à¸µ, ROAS à¸£à¹ˆà¸§à¸‡", cause: "TikTok/Shopee à¸›à¸£à¸±à¸šà¸¥à¸”à¸à¸²à¸£à¸¡à¸­à¸‡à¹€à¸«à¹‡à¸™ (Reach) à¸‚à¸­à¸‡à¹‚à¸à¸ªà¸•à¹Œà¸‚à¸²à¸¢à¸‚à¸­à¸‡", strategy: "à¸à¸£à¸°à¸ˆà¸²à¸¢à¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¹„à¸›à¸«à¸¥à¸²à¸¢à¹à¸à¸¥à¸•à¸Ÿà¸­à¸£à¹Œà¸¡ à¹à¸¥à¸°à¹€à¸™à¹‰à¸™à¸—à¸³à¸„à¸­à¸™à¹€à¸—à¸™à¸•à¹Œ Organic à¹ƒà¸«à¹‰à¸¡à¸²à¸à¸‚à¸¶à¹‰à¸™ (Entertainment first)" },
                    cn: { impact: "å¹¿å‘Šè´¹ç«‹å³ä¸Šæ¶¨ 50%ï¼ŒROAS ä¸‹è·Œ", cause: "TikTok/Shopee é™ä½äº†é”€å”®å¸–å­çš„æ›å…‰ç‡ (Reach)", strategy: "åˆ†æ•£é£é™©è‡³å¤šä¸ªå¹³å°ï¼Œå¹¶ä¸“æ³¨äºåˆ¶ä½œæ›´å¤šåŸç”Ÿå†…å®¹ (å¨±ä¹ä¼˜å…ˆ)" }
                }
            },
            negative_viral: {
                category: 1,
                label: { th: "à¸”à¸£à¸²à¸¡à¹ˆà¸²à¹‚à¸‹à¹€à¸Šà¸µà¸¢à¸¥ (Viral Drama)", cn: "ç¤¾äº¤åª’ä½“å±æœº" },
                apply: (d) => ({ ...d, targetBags: d.targetBags * 0.6, varParams: { ...d.varParams, returnRate: 10 } }),
                math_desc: { th: "à¸¢à¸­à¸”à¸‚à¸²à¸¢ -40%, à¸­à¸±à¸•à¸£à¸²à¸„à¸·à¸™à¸‚à¸­à¸‡ = 10%", cn: "é”€å”®é¢ -40%, é€€è´§ç‡ = 10%" },
                analysis: {
                    th: { impact: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸«à¸²à¸¢ 40%, à¸¥à¸¹à¸à¸„à¹‰à¸²à¹à¸«à¹ˆà¸„à¸·à¸™à¸‚à¸­à¸‡", cause: "à¸ªà¸´à¸™à¸„à¹‰à¸²à¸¡à¸µà¸›à¸±à¸à¸«à¸²à¸„à¸¸à¸“à¸ à¸²à¸ à¸«à¸£à¸·à¸­à¸šà¸£à¸´à¸à¸²à¸£à¸«à¸¥à¸±à¸‡à¸à¸²à¸£à¸‚à¸²à¸¢à¹à¸¢à¹ˆà¸ˆà¸™à¹€à¸›à¹‡à¸™à¸‚à¹ˆà¸²à¸§", strategy: "à¹à¸–à¸¥à¸‡à¸à¸²à¸£à¸“à¹Œà¸‚à¸­à¹‚à¸—à¸©à¸—à¸±à¸™à¸—à¸µ, à¸£à¸±à¸šà¹€à¸„à¸¥à¸¡ 100% à¹„à¸¡à¹ˆà¸¡à¸µà¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ à¹à¸¥à¸°à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡ QC à¸”à¹ˆà¸§à¸™à¸—à¸µà¹ˆà¸ªà¸¸à¸”" },
                    cn: { impact: "é”€å”®é¢æŸå¤± 40%ï¼Œå®¢æˆ·å¤§é‡é€€è´§", cause: "äº§å“è´¨é‡é—®é¢˜æˆ–å”®åæœåŠ¡ç³Ÿç³•å¯¼è‡´è´Ÿé¢æ–°é—»", strategy: "ç«‹å³å‘è¡¨é“æ­‰å£°æ˜ï¼Œæ— æ¡ä»¶ 100% ç†èµ”ï¼Œå¹¶å°½å¿«æ”¹è¿› QC" }
                }
            },
            drought: {
                category: 2,
                label: { th: "à¸ à¸±à¸¢à¹à¸¥à¹‰à¸‡à¸£à¸¸à¸™à¹à¸£à¸‡ (Drought)", cn: "ä¸¥é‡å¹²æ—±" },
                apply: (d) => ({ ...d, paddyPrice: d.paddyPrice * 1.25 }),
                math_desc: { th: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸‚à¹‰à¸²à¸§à¹€à¸›à¸¥à¸·à¸­à¸ +25%", cn: "ç¨»è°·æˆæœ¬ +25%" },
                analysis: {
                    th: { impact: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸§à¸±à¸•à¸–à¸¸à¸”à¸´à¸šà¸à¸¸à¹ˆà¸‡ 25%, à¸à¸³à¹„à¸£à¸šà¸²à¸‡à¹€à¸‰à¸µà¸¢à¸š", cause: "à¸œà¸¥à¸œà¸¥à¸´à¸•à¸‚à¹‰à¸²à¸§à¹€à¸›à¸¥à¸·à¸­à¸à¸¥à¸”à¸¥à¸‡à¸ˆà¸²à¸à¸ªà¸ à¸²à¸à¸­à¸²à¸à¸²à¸¨", strategy: "à¸¥à¹‡à¸­à¸à¸£à¸²à¸„à¸²à¸‹à¸·à¹‰à¸­à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸² (Futures) à¸«à¸£à¸·à¸­à¸›à¸£à¸±à¸šà¸‚à¸¶à¹‰à¸™à¸£à¸²à¸„à¸²à¸‚à¸²à¸¢à¸ªà¸´à¸™à¸„à¹‰à¸²à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡ (à¸–à¹‰à¸²à¸—à¸³à¹„à¸”à¹‰)" },
                    cn: { impact: "åŸææ–™æˆæœ¬é£™å‡ 25%ï¼Œåˆ©æ¶¦å¾®è–„", cause: "ç”±äºå¤©æ°”åŸå› ç¨»è°·äº§é‡ä¸‹é™", strategy: "é”å®šè¿œæœŸè´­ä¹°ä»·æ ¼ (Futures) æˆ–æé«˜ç»ˆç«¯äº§å“å”®ä»· (å¦‚æœå¯èƒ½)" }
                }
            },
            machine_break: {
                category: 2,
                label: { th: "à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸ˆà¸±à¸à¸£à¸à¸±à¸‡ (Machine Break)", cn: "æœºå™¨æ•…éšœ" },
                apply: (d) => ({ ...d, yield: d.yield * 0.95, fixedParams: { ...d.fixedParams, other: d.fixedParams.other + 50000 } }),
                math_desc: { th: "Yield -5%, à¸„à¹ˆà¸²à¸‹à¹ˆà¸­à¸¡ +50,000", cn: "å‡ºç±³ç‡ -5%, ç»´ä¿®è´¹ +50,000" },
                analysis: {
                    th: { impact: "Yield à¸•à¸ 5%, à¸¡à¸µà¸„à¹ˆà¸²à¸‹à¹ˆà¸­à¸¡à¸‰à¸¸à¸à¹€à¸‰à¸´à¸™", cause: "à¸‚à¸²à¸”à¸à¸²à¸£à¸šà¸³à¸£à¸¸à¸‡à¸£à¸±à¸à¸©à¸²à¸•à¸²à¸¡à¸£à¸­à¸š (Preventive Maintenance)", strategy: "à¸§à¸²à¸‡à¹à¸œà¸™à¸‹à¹ˆà¸­à¸¡à¸šà¸³à¸£à¸¸à¸‡à¸¥à¹ˆà¸§à¸‡à¸«à¸™à¹‰à¸² à¹à¸¥à¸°à¹€à¸•à¸£à¸µà¸¢à¸¡à¸­à¸°à¹„à¸«à¸¥à¹ˆà¸ªà¸³à¸£à¸­à¸‡ (Spare Parts) à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¹„à¸§à¹‰à¹€à¸ªà¸¡à¸­" },
                    cn: { impact: "äº§é‡ä¸‹é™ 5%ï¼Œäº§ç”Ÿç´§æ€¥ç»´ä¿®è´¹", cause: "ç¼ºä¹å®šæœŸé¢„é˜²æ€§ç»´æŠ¤ (Preventive Maintenance)", strategy: "åˆ¶å®šæå‰ç»´æŠ¤è®¡åˆ’ï¼Œå¹¶å§‹ç»ˆå‡†å¤‡å…³é”®å¤‡ä»¶ (Spare Parts)" }
                }
            },
            pack_cost: {
                category: 2,
                label: { th: "à¸„à¹ˆà¸²à¸šà¸£à¸£à¸ˆà¸¸à¸ à¸±à¸“à¸‘à¹Œà¸‚à¸¶à¹‰à¸™ (Pack Cost)", cn: "åŒ…è£…æˆæœ¬ä¸Šæ¶¨" },
                apply: (d) => ({ ...d, unit: { bag: d.unit.bag * 1.5, sticker: d.unit.sticker * 1.5 } }),
                math_desc: { th: "à¸„à¹ˆà¸²à¸–à¸¸à¸‡/à¸à¸¥à¹ˆà¸­à¸‡ +50%", cn: "åŒ…è£…è¢‹/è´´çº¸æˆæœ¬ +50%" },
                analysis: {
                    th: { impact: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸•à¹ˆà¸­à¸–à¸¸à¸‡à¸ªà¸¹à¸‡à¸‚à¸¶à¹‰à¸™à¸¡à¸²à¸", cause: "à¸£à¸²à¸„à¸²à¸™à¹‰à¸³à¸¡à¸±à¸™à¹‚à¸¥à¸à¸‚à¸¶à¹‰à¸™ à¸«à¸£à¸·à¸­à¹‚à¸£à¸‡à¸‡à¸²à¸™à¸à¸¥à¸²à¸ªà¸•à¸´à¸à¸›à¸£à¸±à¸šà¸£à¸²à¸„à¸²", strategy: "à¸ªà¸±à¹ˆà¸‡à¸œà¸¥à¸´à¸•à¸ˆà¸³à¸™à¸§à¸™à¸¡à¸²à¸ (Mass Lot) à¹€à¸à¸·à¹ˆà¸­à¸•à¹ˆà¸­à¸£à¸­à¸‡à¸£à¸²à¸„à¸² à¸«à¸£à¸·à¸­à¸¥à¸”à¸ªà¹€à¸›à¸„à¸„à¸§à¸²à¸¡à¸«à¸™à¸²à¸–à¸¸à¸‡à¸¥à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢" },
                    cn: { impact: "æ¯è¢‹æˆæœ¬å¤§å¹…ä¸Šå‡", cause: "å…¨çƒæ²¹ä»·ä¸Šæ¶¨æˆ–å¡‘æ–™å‚æä»·", strategy: "å¤§é‡è®¢è´­ (Mass Lot) ä»¥è®®ä»·ï¼Œæˆ–ç¨å¾®é™ä½è¢‹å­åšåº¦è§„æ ¼" }
                }
            },
            energy_crisis: {
                category: 2,
                label: { th: "à¸§à¸´à¸à¸¤à¸•à¸à¸¥à¸±à¸‡à¸‡à¸²à¸™ (Energy Crisis)", cn: "èƒ½æºå±æœº" },
                apply: (d) => ({ ...d, varParams: { ...d.varParams, elecRate: d.varParams.elecRate * 1.4 }, logistics: { ...d.logistics, profit: d.logistics.profit * 0.5 } }),
                math_desc: { th: "à¸„à¹ˆà¸²à¹„à¸Ÿ +40%, à¸à¸³à¹„à¸£à¸‚à¸™à¸ªà¹ˆà¸‡ -50%", cn: "ç”µè´¹ +40%, è¿è¾“åˆ©æ¶¦ -50%" },
                analysis: {
                    th: { impact: "à¸„à¹ˆà¸²à¹„à¸Ÿà¸à¸¸à¹ˆà¸‡ 40%, à¸à¸³à¹„à¸£à¸‚à¸™à¸ªà¹ˆà¸‡à¸«à¸²à¸¢à¸„à¸£à¸¶à¹ˆà¸‡", cause: "à¸„à¹ˆà¸² Ft à¸‚à¸¶à¹‰à¸™à¹à¸¥à¸°à¸à¸²à¸£à¸›à¸£à¸±à¸šà¸£à¸²à¸„à¸²à¸”à¸µà¹€à¸‹à¸¥", strategy: "à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡ Solar Rooftop à¹€à¸à¸·à¹ˆà¸­à¸¥à¸”à¸„à¹ˆà¸²à¹„à¸Ÿà¸£à¸°à¸¢à¸°à¸¢à¸²à¸§ à¹à¸¥à¸°à¸›à¸£à¸±à¸šà¸£à¸­à¸šà¸§à¸´à¹ˆà¸‡à¸£à¸–à¸‚à¸™à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰à¸„à¸¸à¹‰à¸¡à¹€à¸—à¸µà¹ˆà¸¢à¸§à¸—à¸µà¹ˆà¸ªà¸¸à¸”" },
                    cn: { impact: "ç”µè´¹é£™å‡ 40%ï¼Œè¿è¾“åˆ©æ¶¦å‡åŠ", cause: "Ft è´¹ç”¨ä¸Šæ¶¨å’ŒæŸ´æ²¹ä»·æ ¼è°ƒæ•´", strategy: "å®‰è£…å±‹é¡¶å¤ªé˜³èƒ½ä»¥é•¿æœŸé™ä½ç”µè´¹ï¼Œå¹¶ä¼˜åŒ–è¿è¾“è½¦æ¬¡ä»¥å®ç°æœ€å¤§æ•ˆç›Š" }
                }
            },
            rate_hike: {
                category: 3,
                label: { th: "à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¸‚à¸²à¸‚à¸¶à¹‰à¸™ (Rate Hike)", cn: "åŠ æ¯" },
                apply: (d) => ({ ...d, loan: { ...d.loan, rate: 9 } }),
                math_desc: { th: "à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¹€à¸‡à¸´à¸™à¸à¸¹à¹‰à¸›à¸£à¸±à¸šà¹€à¸›à¹‡à¸™ 9%", cn: "è´·æ¬¾åˆ©ç‡è°ƒè‡³ 9%" },
                analysis: {
                    th: { impact: "à¸ à¸²à¸£à¸°à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¸ˆà¹ˆà¸²à¸¢à¹€à¸à¸´à¹ˆà¸¡à¹€à¸à¸·à¸­à¸šà¹€à¸—à¹ˆà¸²à¸•à¸±à¸§", cause: "à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸¥à¸²à¸‡à¸›à¸£à¸±à¸šà¸‚à¸¶à¹‰à¸™à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¸™à¹‚à¸¢à¸šà¸²à¸¢", strategy: "à¸£à¸µà¹„à¸Ÿà¹à¸™à¸™à¸‹à¹Œ (Refinance) à¸«à¸²à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢à¸„à¸‡à¸—à¸µà¹ˆ à¸«à¸£à¸·à¸­à¹€à¸£à¹ˆà¸‡à¹‚à¸›à¸°à¹€à¸‡à¸´à¸™à¸•à¹‰à¸™à¹€à¸à¸·à¹ˆà¸­à¸¥à¸”à¸ à¸²à¸£à¸°à¸”à¸­à¸à¹€à¸šà¸µà¹‰à¸¢" },
                    cn: { impact: "åˆ©æ¯è´Ÿæ‹…å‡ ä¹ç¿»å€", cause: "å¤®è¡Œä¸Šè°ƒæ”¿ç­–åˆ©ç‡", strategy: "å†èèµ„ (Refinance) å¯»æ‰¾å›ºå®šåˆ©ç‡ï¼Œæˆ–åŠ é€Ÿå¿è¿˜æœ¬é‡‘ä»¥å‡å°‘åˆ©æ¯è´Ÿæ‹…" }
                }
            },
            credit_crunch: {
                category: 3,
                label: { th: "à¸¥à¸¹à¸à¸„à¹‰à¸²à¸ˆà¹ˆà¸²à¸¢à¸Šà¹‰à¸² (Credit Crunch)", cn: "ä¿¡è´·ç´§ç¼©" },
                apply: (d) => ({ ...d, creditTerm: 60 }),
                math_desc: { th: "à¹€à¸„à¸£à¸”à¸´à¸•à¹€à¸—à¸­à¸¡ = 60 à¸§à¸±à¸™", cn: "ä¿¡ç”¨æœŸ = 60 å¤©" },
                analysis: {
                    th: { impact: "à¹€à¸‡à¸´à¸™à¸ªà¸”à¸‚à¸²à¸”à¸¡à¸·à¸­à¸«à¸¡à¸¸à¸™à¹€à¸§à¸µà¸¢à¸™ 2 à¹€à¸”à¸·à¸­à¸™", cause: "à¹€à¸¨à¸£à¸©à¸à¸à¸´à¸ˆà¹„à¸¡à¹ˆà¸”à¸µ à¸„à¸¹à¹ˆà¸„à¹‰à¸²à¸‚à¸²à¸”à¸ªà¸ à¸²à¸à¸„à¸¥à¹ˆà¸­à¸‡", strategy: "à¹ƒà¸«à¹‰à¸ªà¹ˆà¸§à¸™à¸¥à¸”à¹€à¸‡à¸´à¸™à¸ªà¸” (Cash Discount) à¸ªà¸³à¸«à¸£à¸±à¸šà¸„à¸™à¸ˆà¹ˆà¸²à¸¢à¹€à¸£à¹‡à¸§ à¹à¸¥à¸°à¸„à¸±à¸”à¸à¸£à¸­à¸‡à¹€à¸„à¸£à¸”à¸´à¸•à¸¥à¸¹à¸à¸„à¹‰à¸²à¹€à¸‚à¹‰à¸¡à¸‡à¸§à¸”à¸‚à¸¶à¹‰à¸™" },
                    cn: { impact: "ç°é‡‘æµç¼ºå£è¾¾ 2 ä¸ªæœˆ", cause: "ç»æµä¸æ™¯æ°”ï¼Œåˆä½œä¼™ä¼´ç¼ºä¹æµåŠ¨æ€§", strategy: "ä¸ºå¿«é€Ÿä»˜æ¬¾è€…æä¾›ç°é‡‘æŠ˜æ‰£ (Cash Discount)ï¼Œå¹¶æ›´ä¸¥æ ¼åœ°ç­›é€‰å®¢æˆ·ä¿¡ç”¨" }
                }
            },
            tax_fine: {
                category: 3,
                label: { th: "à¸„à¹ˆà¸²à¸›à¸£à¸±à¸šà¸ à¸²à¸©à¸µ (Tax Fine)", cn: "ç¨åŠ¡ç½šæ¬¾" },
                apply: (d) => ({ ...d, fixedParams: { ...d.fixedParams, other: d.fixedParams.other + 100000 } }),
                math_desc: { th: "à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¸­à¸·à¹ˆà¸™à¹† +100,000", cn: "å…¶ä»–è´¹ç”¨ +100,000" },
                analysis: {
                    th: { impact: "à¹‚à¸”à¸™à¸„à¹ˆà¸²à¸›à¸£à¸±à¸š 100,000 à¸šà¸²à¸— à¸à¸£à¸°à¸—à¸šà¸à¸³à¹„à¸£à¹€à¸”à¸·à¸­à¸™à¸™à¸µà¹‰", cause: "à¸¢à¸·à¹ˆà¸™à¸ à¸²à¸©à¸µà¸œà¸´à¸”à¸à¸¥à¸²à¸” à¸«à¸£à¸·à¸­à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸¡à¹ˆà¸„à¸£à¸š", strategy: "à¸ˆà¹‰à¸²à¸‡à¸ªà¸³à¸™à¸±à¸à¸‡à¸²à¸™à¸šà¸±à¸à¸Šà¸µà¸¡à¸·à¸­à¸­à¸²à¸Šà¸µà¸ à¹à¸¥à¸°à¹ƒà¸Šà¹‰à¹‚à¸›à¸£à¹à¸à¸£à¸¡à¸šà¸±à¸à¸Šà¸µ (ERP) à¹€à¸à¸·à¹ˆà¸­à¸¥à¸”à¸„à¸§à¸²à¸¡à¸œà¸´à¸”à¸à¸¥à¸²à¸” Human Error" },
                    cn: { impact: "è¢«ç½šæ¬¾ 100,000 æ³°é“¢ï¼Œå½±å“æœ¬æœˆåˆ©æ¶¦", cause: "æŠ¥ç¨é”™è¯¯æˆ–æ–‡ä»¶ä¸å…¨", strategy: "è˜è¯·ä¸“ä¸šä¼šè®¡å¸ˆäº‹åŠ¡æ‰€ï¼Œå¹¶ä½¿ç”¨ä¼šè®¡è½¯ä»¶ (ERP) ä»¥å‡å°‘äººä¸ºé”™è¯¯" }
                }
            },
            inflation: {
                category: 3,
                label: { th: "à¹€à¸‡à¸´à¸™à¹€à¸Ÿà¹‰à¸­à¸à¸¸à¹ˆà¸‡ (Inflation)", cn: "é€šè´§è†¨èƒ€" },
                apply: (d) => {
                     const newHr = d.hr.map(h => ({ ...h, salary: h.salary * 1.1 }));
                     return { ...d, hr: newHr, paddyPrice: d.paddyPrice * 1.1, unit: { bag: d.unit.bag * 1.1, sticker: d.unit.sticker * 1.1 } };
                },
                math_desc: { th: "à¸„à¹ˆà¸²à¹à¸£à¸‡/à¸‚à¹‰à¸²à¸§/à¸–à¸¸à¸‡ +10%", cn: "å·¥èµ„/å¤§ç±³/åŒ…è£… +10%" },
                analysis: {
                    th: { impact: "à¸•à¹‰à¸™à¸—à¸¸à¸™à¸—à¸¸à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸‚à¸¶à¹‰à¸™ 10% à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™", cause: "à¸ªà¸ à¸²à¸§à¸°à¹€à¸¨à¸£à¸©à¸à¸à¸´à¸ˆà¸¡à¸«à¸ à¸²à¸„", strategy: "à¸•à¹‰à¸­à¸‡à¸‚à¸¶à¹‰à¸™à¸£à¸²à¸„à¸²à¸ªà¸´à¸™à¸„à¹‰à¸² (Reprice) à¸«à¸£à¸·à¸­à¸¥à¸”à¸‚à¸™à¸²à¸”à¸ªà¸´à¸™à¸„à¹‰à¸² (Shrinkflation) à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸à¸©à¸²à¸à¸³à¹„à¸£" },
                    cn: { impact: "æ‰€æœ‰æˆæœ¬åŒæ—¶ä¸Šæ¶¨ 10%", cause: "å®è§‚ç»æµçŠ¶å†µ", strategy: "å¿…é¡»æä»· (Reprice) æˆ–ç¼©å°å•†å“å°ºå¯¸ (Shrinkflation) ä»¥ä¿æŒåˆ©æ¶¦" }
                }
            },
            staff_turnover: {
                category: 4,
                label: { th: "à¸—à¸µà¸¡à¸‡à¸²à¸™à¸¥à¸²à¸­à¸­à¸ (Staff Turnover)", cn: "å‘˜å·¥æµå¤±" },
                apply: (d) => {
                     const newHr = d.hr.map(h => ({ ...h, salary: h.salary * 1.1 })); 
                     return { ...d, hr: newHr, targetBags: d.targetBags * 0.9, fixedParams: { ...d.fixedParams, other: d.fixedParams.other + 20000 } };
                },
                math_desc: { th: "à¸„à¹ˆà¸²à¹à¸£à¸‡ +10%, à¸¢à¸­à¸”à¸‚à¸²à¸¢ -10%, à¸„à¹ˆà¸²à¸«à¸²à¸„à¸™ +20,000", cn: "å·¥èµ„ +10%, é”€å”® -10%, æ‹›è˜è´¹ +20,000" },
                analysis: {
                    th: { impact: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸•à¸ 10%, à¸„à¹ˆà¸²à¸ˆà¹‰à¸²à¸‡à¹à¸à¸‡à¸‚à¸¶à¹‰à¸™", cause: "à¸à¸™à¸±à¸à¸‡à¸²à¸™à¸«à¸¡à¸”à¹„à¸Ÿ à¸«à¸£à¸·à¸­à¹‚à¸”à¸™à¸‹à¸·à¹‰à¸­à¸•à¸±à¸§", strategy: "à¸ªà¸£à¹‰à¸²à¸‡ Career Path à¹ƒà¸«à¹‰à¸à¸™à¸±à¸à¸‡à¸²à¸™ à¹à¸¥à¸°à¹ƒà¸«à¹‰ Incentive à¸•à¸²à¸¡à¸œà¸¥à¸‡à¸²à¸™ (Performance-based)" },
                    cn: { impact: "é”€å”®é¢ä¸‹é™ 10%ï¼Œå·¥èµ„æˆæœ¬ä¸Šå‡", cause: "å‘˜å·¥å€¦æ€ æˆ–è¢«æŒ–è§’", strategy: "ä¸ºå‘˜å·¥å»ºç«‹èŒä¸šå‘å±•è·¯å¾„ (Career Path)ï¼Œå¹¶æä¾›åŸºäºç»©æ•ˆçš„æ¿€åŠ± (Incentive)" }
                }
            },
            fraud: {
                category: 4,
                label: { th: "à¸—à¸¸à¸ˆà¸£à¸´à¸•à¸ à¸²à¸¢à¹ƒà¸™ (Fraud)", cn: "å†…éƒ¨æ¬ºè¯ˆ" },
                apply: (d) => ({ ...d, yield: d.yield * 0.9 }), 
                math_desc: { th: "Yield à¸«à¸²à¸¢ 10% (Stock Loss)", cn: "å‡ºç±³ç‡ -10% (åº“å­˜æŸå¤±)" },
                analysis: {
                    th: { impact: "Yield à¸«à¸²à¸¢à¹„à¸› 10% (à¸‚à¹‰à¸²à¸§à¸«à¸²à¸¢)", cause: "à¸£à¸°à¸šà¸šà¸„à¸§à¸šà¸„à¸¸à¸¡à¸ à¸²à¸¢à¹ƒà¸™à¸«à¸¥à¸°à¸«à¸¥à¸§à¸¡", strategy: "à¸•à¸´à¸”à¸•à¸±à¹‰à¸‡à¸à¸¥à¹‰à¸­à¸‡à¸§à¸‡à¸ˆà¸£à¸›à¸´à¸”à¸ˆà¸¸à¸”à¸Šà¸±à¹ˆà¸‡à¸™à¹‰à¸³à¸«à¸™à¸±à¸ à¹à¸¥à¸°à¸—à¸³ Stock Count à¸—à¸¸à¸à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œà¹à¸šà¸šà¸ªà¸¸à¹ˆà¸¡ (Surprise Check)" },
                    cn: { impact: "äº§é‡æŸå¤± 10% (å¤§ç±³å¤±è¸ª)", cause: "å†…éƒ¨æ§åˆ¶ç³»ç»Ÿæ¾æ‡ˆ", strategy: "åœ¨ç§°é‡å¤„å®‰è£…é—­è·¯ç”µè§†ï¼Œå¹¶æ¯å‘¨è¿›è¡Œéšæœºåº“å­˜ç›˜ç‚¹ (Surprise Check)" }
                }
            },
            warehouse_pest: {
                category: 4,
                label: { th: "à¸¡à¸­à¸”/à¸„à¸§à¸²à¸¡à¸Šà¸·à¹‰à¸™ (Pest/Moisture)", cn: "è™«å®³/æ½®æ¹¿" },
                apply: (d) => ({ ...d, fixedParams: { ...d.fixedParams, other: d.fixedParams.other + 50000 }, yield: d.yield * 0.98 }),
                math_desc: { th: "Yield -2%, à¸„à¹ˆà¸²à¸ˆà¸±à¸”à¸à¸²à¸£ +50,000", cn: "å‡ºç±³ç‡ -2%, å¤„ç†è´¹ +50,000" },
                analysis: {
                    th: { impact: "à¹€à¸ªà¸µà¸¢à¸„à¹ˆà¸²à¸£à¸¡à¸¢à¸² 50k, à¸‚à¹‰à¸²à¸§à¹€à¸ªà¸µà¸¢à¸«à¸²à¸¢", cause: "à¸à¸²à¸£à¸ˆà¸±à¸”à¹€à¸à¹‡à¸šà¹ƒà¸™à¹‚à¸à¸”à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸¡à¸²à¸•à¸£à¸à¸²à¸™", strategy: "à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¸£à¸°à¸šà¸šà¸£à¸°à¸šà¸²à¸¢à¸­à¸²à¸à¸²à¸¨ à¹à¸¥à¸°à¸—à¸³à¸£à¸°à¸šà¸š FIFO (à¹€à¸‚à¹‰à¸²à¸à¹ˆà¸­à¸™à¸­à¸­à¸à¸à¹ˆà¸­à¸™) à¸­à¸¢à¹ˆà¸²à¸‡à¹€à¸„à¸£à¹ˆà¸‡à¸„à¸£à¸±à¸”" },
                    cn: { impact: "æŸå¤± 5ä¸‡ç†è’¸è´¹ï¼Œå¤§ç±³å—æŸ", cause: "ä»“åº“å‚¨å­˜ä¸è¾¾æ ‡", strategy: "æ”¹å–„é€šé£ç³»ç»Ÿï¼Œå¹¶ä¸¥æ ¼æ‰§è¡Œ FIFO (å…ˆè¿›å…ˆå‡º) ç³»ç»Ÿ" }
                }
            },
            platform_ban: {
                category: 4,
                label: { th: "à¹‚à¸”à¸™à¹à¸šà¸™à¸£à¹‰à¸²à¸™ (Platform Ban)", cn: "å¹³å°å°å·" },
                apply: (d) => ({ ...d, targetBags: d.targetBags * 0.5 }),
                math_desc: { th: "à¸¢à¸­à¸”à¸‚à¸²à¸¢ -50%", cn: "é”€å”®é¢ -50%" },
                analysis: {
                    th: { impact: "à¸¢à¸­à¸”à¸‚à¸²à¸¢à¸«à¸²à¸¢à¸§à¸¹à¸š 50% à¸—à¸±à¸™à¸—à¸µ", cause: "à¸¥à¸°à¹€à¸¡à¸´à¸”à¸à¸à¸Šà¸¸à¸¡à¸Šà¸™ à¸«à¸£à¸·à¸­à¹„à¸¥à¸Ÿà¹Œà¸œà¸´à¸”à¸à¸", strategy: "à¸à¸£à¸°à¸ˆà¸²à¸¢à¸£à¸²à¸¢à¹„à¸”à¹‰à¹„à¸›à¸«à¸¥à¸²à¸¢à¸Šà¹ˆà¸­à¸‡à¸—à¸²à¸‡ (Omni-channel) à¹à¸¥à¸°à¹€à¸—à¸£à¸™à¸—à¸µà¸¡à¸‡à¸²à¸™à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸à¸à¸£à¸°à¹€à¸šà¸µà¸¢à¸šà¸ªà¸¡à¹ˆà¸³à¹€à¸ªà¸¡à¸­" },
                    cn: { impact: "é”€å”®é¢ç«‹å³æš´è·Œ 50%", cause: "è¿åç¤¾åŒºå‡†åˆ™æˆ–ç›´æ’­è¿è§„", strategy: "é€šè¿‡å…¨æ¸ é“ (Omni-channel) åˆ†æ•£æ”¶å…¥ï¼Œå¹¶å®šæœŸåŸ¹è®­å›¢é˜Ÿæœ‰å…³æ³•è§„" }
                }
            }
        };

        // ... (INITIAL data remains the same) ...
        const INITIAL = {
            regCapital: 13000000,
            loan: { amount: 0, rate: 5, term: 5 },
            maxCapacity: 70000, 
            capex: { factory: 7000000, machine: 1300000, license: 200000, stock: 2000000 },
            depreciation: { factoryYears: 20, machineYears: 10 }, 
            targetBags: 15000, 
            price: 389,
            creditTerm: 0, 
            yield: 60, paddyPrice: 16000,
            byProducts: [
                { id: "prod_husk", name: "à¹à¸à¸¥à¸š", percent: 23, price: 1500 },
                { id: "prod_fine", name: "à¸£à¸³à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”", percent: 10, price: 9000 },
                { id: "prod_rough", name: "à¸£à¸³à¸«à¸¢à¸²à¸š", percent: 2, price: 9000 },
                { id: "prod_broken", name: "à¸‚à¹‰à¸²à¸§à¸«à¸±à¸", percent: 2, price: 12000 },
                { id: "prod_waste", name: "à¸‚à¸­à¸‡à¹€à¸ªà¸µà¸¢", percent: 1, price: 0 },
            ],
            unit: { bag: 10.0, sticker: 13.0 },
            hr: [
                { role: "CEO/MD", count: 1, salary: 30000 },
                { role: "Plant Manager", count: 1, salary: 30000 },
                { role: "Production Staff", count: 5, salary: 14000 },
                { role: "Admin/Account", count: 1, salary: 14000 },
                { role: "Sales/Marketing", count: 2, salary: 14000 }
            ],
            varParams: { elecRate: 550, mktPercent: 15, platformPercent: 12, returnRate: 0.5 },
            fixedParams: { erp: 9000, campaign: 41000, other: 10000, maintPercent: 2, insurance: 60000, audit: 5000, travel: 10000 },
            campaignDetails: [
                { id: "camp_gold1", name: "à¸¥à¸¸à¹‰à¸™à¸—à¸­à¸‡ 1 à¸ªà¸¥à¸¶à¸‡", qty: 1, costPerUnit: 16500 },
                { id: "camp_gold2", name: "à¸¥à¸¸à¹‰à¸™à¸—à¸­à¸‡ à¸„à¸£à¸¶à¹ˆà¸‡à¸ªà¸¥à¸¶à¸‡", qty: 2, costPerUnit: 8500 },
                { id: "camp_free", name: "à¸à¸´à¸™à¸‚à¹‰à¸²à¸§à¸Ÿà¸£à¸µ 1 à¸›à¸µ", qty: 3, costPerUnit: 2500 }
            ],
            logistics: { active: true, percent: 100, profit: 3 },
            dividend: { payout: 50, founders: 3 },
            growth: 10, inflation: 3, monthlyGrowth: 0, discountRate: 10,
            mktFunnel: { basketSize: 1.0, cvr: 2.0, ctr: 1.5 },
            scenario: 'base', taxPaymentMode: 'annual',
            clvParams: { freq: 4, retention: 60 },
            channelMix: { tiktok: 80, shopee: 10, offline: 10 },
            channelFees: { tiktok: 12, shopee: 8, offline: 0 },
            elasticityParams: { coefficient: 1.5 }, 
            seasonalShock: { active: false, startM: 5, endM: 8, costImpact: 20 }
        };

        const App = () => {
            const [toast, setToast] = useState(null); 
            const [lang, setLang] = useState('th'); 
            const [activeSim, setActiveSim] = useState(null); 
            const [backupD, setBackupD] = useState(null); 

            // t function inside App
            const t = (key) => {
                if (!TRANS[lang]) return key;
                return TRANS[lang][key] || key;
            };

            const [d, setD] = useState(() => {
                try {
                    const params = new URLSearchParams(window.location.search);
                    const sharedData = params.get('data');
                    if (sharedData) {
                        const safeBase64 = sharedData.replace(/ /g, '+');
                        const parsed = JSON.parse(fromBase64(safeBase64));
                        if (!parsed.campaignDetails) parsed.campaignDetails = INITIAL.campaignDetails;
                        if (parsed.fixedParams && parsed.fixedParams.insurance === undefined) {
                            parsed.fixedParams.insurance = 60000;
                        }
                        if (parsed.fixedParams && parsed.fixedParams.audit === undefined) parsed.fixedParams.audit = 5000;
                        if (parsed.fixedParams && parsed.fixedParams.travel === undefined) parsed.fixedParams.travel = 10000;

                        if (!parsed.clvParams) parsed.clvParams = INITIAL.clvParams;
                        if (!parsed.channelMix) parsed.channelMix = INITIAL.channelMix;
                        if (!parsed.channelFees) parsed.channelFees = INITIAL.channelFees;
                        if (!parsed.elasticityParams) parsed.elasticityParams = INITIAL.elasticityParams;
                        if (!parsed.seasonalShock) parsed.seasonalShock = INITIAL.seasonalShock;
                        if (!parsed.maxCapacity) parsed.maxCapacity = INITIAL.maxCapacity; 
                        return parsed;
                    }

                    const savedData = localStorage.getItem('morbSukFinancialData_v43'); 
                    let parsed = savedData ? JSON.parse(savedData) : INITIAL;
                    if (!parsed.campaignDetails) parsed.campaignDetails = INITIAL.campaignDetails;
                    if (parsed.fixedParams && parsed.fixedParams.insurance === undefined) {
                        parsed.fixedParams.insurance = 60000;
                    }
                    if (parsed.fixedParams && parsed.fixedParams.audit === undefined) parsed.fixedParams.audit = 5000;
                    if (parsed.fixedParams && parsed.fixedParams.travel === undefined) parsed.fixedParams.travel = 10000;

                    if (!parsed.clvParams) parsed.clvParams = INITIAL.clvParams;
                    if (!parsed.channelMix) parsed.channelMix = INITIAL.channelMix;
                    if (!parsed.channelFees) parsed.channelFees = INITIAL.channelFees;
                    if (!parsed.elasticityParams) parsed.elasticityParams = INITIAL.elasticityParams;
                    if (!parsed.seasonalShock) parsed.seasonalShock = INITIAL.seasonalShock;
                    if (!parsed.maxCapacity) parsed.maxCapacity = INITIAL.maxCapacity; 
                    
                    parsed.byProducts = parsed.byProducts.map((p, i) => (!p.id ? { ...p, id: INITIAL.byProducts[i]?.id } : p));
                    parsed.campaignDetails = parsed.campaignDetails.map((c, i) => (!c.id ? { ...c, id: INITIAL.campaignDetails[i]?.id } : c));

                    return parsed;
                } catch (e) { 
                    console.error("Data load error:", e);
                    return INITIAL; 
                }
            });
            const [c, setC] = useState(null); 

            useEffect(() => { 
                localStorage.setItem('morbSukFinancialData_v43', JSON.stringify(d)); 
            }, [d]);

            const resetToDefault = () => {
                if (confirm("Reset all data to default?")) { 
                    setD(INITIAL); 
                    setActiveSim(null);
                    setBackupD(null);
                    localStorage.removeItem('morbSukFinancialData_v43'); 
                    window.history.pushState({}, document.title, window.location.pathname);
                }
            };

            const handleSimulate = (key) => {
                if (activeSim === key) {
                    if (backupD) {
                        setD(backupD); 
                        setBackupD(null);
                    } else {
                        applyScenario('base'); 
                    }
                    setActiveSim(null);
                } else {
                    let baseState;
                    if (activeSim && backupD) {
                        baseState = backupD;
                    } else {
                        baseState = JSON.parse(JSON.stringify(d)); 
                        setBackupD(baseState);
                    }
                    const newD = SCENARIOS[key].apply(baseState);
                    setD(newD);
                    setActiveSim(key);
                    setToast(`Activated: ${SCENARIOS[key].label[lang]}`);
                    setTimeout(() => setToast(null), 3000);
                }
            };

            const handleShare = () => {
                try {
                    const jsonString = JSON.stringify(d);
                    const encoded = toBase64(jsonString);
                    const url = `${window.location.origin}${window.location.pathname}?data=${encodeURIComponent(encoded)}`;
                    const textArea = document.createElement("textarea");
                    textArea.value = url;
                    textArea.style.position = "fixed";
                    textArea.style.left = "-9999px";
                    textArea.style.top = "0";
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    try {
                        const successful = document.execCommand('copy');
                        if (successful) {
                            setToast("à¸„à¸±à¸”à¸¥à¸­à¸à¸¥à¸´à¸‡à¸à¹Œà¹à¸¥à¹‰à¸§! à¸ªà¹ˆà¸‡à¹ƒà¸«à¹‰à¹€à¸à¸·à¹ˆà¸­à¸™à¹„à¸”à¹‰à¹€à¸¥à¸¢ (Copied!)");
                            setTimeout(() => setToast(null), 3000);
                            window.history.pushState({}, document.title, `?data=${encodeURIComponent(encoded)}`);
                        } else {
                            prompt("Copy this link:", url);
                        }
                    } catch (err) {
                        console.error('Fallback: Oops, unable to copy', err);
                        prompt("Copy this link:", url);
                    }
                    document.body.removeChild(textArea);
                } catch (e) {
                    console.error(e);
                    alert("à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸ªà¸£à¹‰à¸²à¸‡à¸¥à¸´à¸‡à¸à¹Œ");
                }
            };

            const handlePrint = () => window.print();
            
            const handleExport = () => {
                if(!c) return;
                let csvContent = "data:text/csv;charset=utf-8,";
                csvContent += "Year,Revenue,Expenses,EBITDA,Depreciation,Tax,Net Profit,Dividend,Cash Balance\n";
                c.yrProj.data.forEach(row => {
                    csvContent += `${row.y},${row.rev},${row.exp},${row.ebitda},${row.dep},${row.tax},${row.net},${row.div},${row.cash}\n`;
                });
                csvContent += "\nMonthly Year 1\nMonth,Cash Inflow (Rev),Expense(Cash),EBITDA,Tax Paid,Cash Balance\n";
                c.cf.forEach(row => {
                    csvContent += `${row.m},${row.revCashIn},${row.expCash},${row.netOpCash},${row.tax},${row.cashFinal}\n`;
                });
                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", "financial_projection_pro.csv");
                document.body.appendChild(link);
                link.click();
            };

            const applyScenario = (type) => {
                let newData = { ...d, scenario: type };
                if (type === 'worst') { 
                    newData.targetBags = 8000; 
                    newData.paddyPrice = 18000; 
                    newData.growth = 0; 
                    newData.varParams.mktPercent = 20; 
                } 
                else if (type === 'base') { 
                    newData.targetBags = 15000; 
                    newData.paddyPrice = 16000; 
                    newData.growth = 10; 
                    newData.varParams.mktPercent = 15; 
                } 
                else if (type === 'best') { 
                    newData.targetBags = 20000; 
                    newData.paddyPrice = 15000; 
                    newData.growth = 15; 
                    newData.varParams.mktPercent = 13; 
                }
                setD(newData);
                setActiveSim(null); 
                setBackupD(null);
            };

            const up = (k, sk, v) => setD(p => ({...p, [k]: sk ? {...p[k], [sk]: +v} : +v}));
            const upArr = (k, i, f, v) => {
                const n = [...d[k]]; 
                if (f === 'name') delete n[i].id;
                n[i][f] = f==='name'||f==='role'?v:+v; 
                setD(p=>({...p, [k]: n}));
            };
            const upFunnel = (k, v) => setD(p => ({...p, mktFunnel: {...p.mktFunnel, [k]: +v}}));

            const upCampaign = (idx, field, val) => {
                setD(prev => {
                    const newDetails = [...prev.campaignDetails];
                    if (field === 'name') delete newDetails[idx].id;
                    newDetails[idx][field] = field === 'name' ? val : +val;
                    const newTotal = newDetails.reduce((sum, item) => sum + (item.qty * item.costPerUnit), 0);
                    return {
                        ...prev,
                        campaignDetails: newDetails,
                        fixedParams: { ...prev.fixedParams, campaign: newTotal }
                    };
                });
            };

            const upNew = (category, field, val) => {
                setD(prev => ({
                    ...prev,
                    [category]: { ...prev[category], [field]: +val }
                }));
            };

            const handleYieldChange = (e) => {
                const newYield = parseFloat(e.target.value);
                setD(prev => {
                    const currentByProdSum = prev.byProducts.reduce((sum, item) => sum + item.percent, 0);
                    const totalSolidMass = prev.yield + currentByProdSum; 
                    let newByProdTarget = totalSolidMass - newYield;
                    if (newByProdTarget < 0) newByProdTarget = 0; 
                    const ratio = currentByProdSum > 0 ? newByProdTarget / currentByProdSum : 0;
                    const newByProducts = prev.byProducts.map(item => ({
                        ...item,
                        percent: parseFloat((item.percent * ratio).toFixed(2))
                    }));
                    return { ...prev, yield: newYield, byProducts: newByProducts };
                });
            };

            // Calculate Financials - Defined INSIDE App component
            const calculateFinancials = (data) => {
                // Ensure t is available or use fallback
                const _t = (k) => TRANS[lang] ? (TRANS[lang][k] || k) : k;

                const totalCapex = Object.values(data.capex).reduce((a,b)=>a+b,0);
                const totalSources = data.regCapital + (data.loan.amount || 0);
                const workingCap = totalSources - totalCapex;
                const annualDepreciation = (data.capex.factory / data.depreciation.factoryYears) + (data.capex.machine / data.depreciation.machineYears);

                const maintPercent = (data.fixedParams.maintPercent !== undefined && data.fixedParams.maintPercent !== null) ? data.fixedParams.maintPercent : 2;
                const maintenanceCostYearly = data.capex.machine * (maintPercent / 100);
                const maintenanceCostMonthly = maintenanceCostYearly / 12;

                const insuranceYearly = (data.fixedParams.insurance !== undefined) ? data.fixedParams.insurance : 60000;
                const insuranceMonthly = insuranceYearly / 12;

                const dayTarget = data.targetBags / 30;
                const hourTarget = dayTarget / 24; 
                const riceRev = data.targetBags * data.price;
                
                const paddyTons = (data.targetBags * 5) / (data.yield/100) / 1000;
                const paddyBudget = paddyTons * data.paddyPrice;
                let totalByProductIncome = 0;
                const byProductsCalc = data.byProducts.map(item => {
                    const weight = paddyTons * (item.percent / 100);
                    const revenue = weight * item.price;
                    totalByProductIncome += revenue;
                    return { ...item, weight, revenue };
                });

                const logIncome = (data.targetBags * (data.logistics.percent/100)) * data.logistics.profit;

                const refundTotal = riceRev * ((data.varParams.returnRate || 0) / 100);

                const baseRev = (riceRev - refundTotal) + totalByProductIncome + logIncome; 
                const totalVatOut = baseRev - (baseRev / 1.07);

                const cm = data.channelMix || { tiktok: 80, shopee: 10, offline: 10 };
                const cFees = data.channelFees || { tiktok: 12, shopee: 8, offline: 0 }; 
                const blendedFeePct = (cm.tiktok * cFees.tiktok + cm.shopee * cFees.shopee + cm.offline * cFees.offline) / 100;
                const platformTotal = riceRev * (blendedFeePct/100); 

                const riceTotal = paddyBudget; 
                const packTotal = (data.unit.bag + data.unit.sticker) * data.targetBags; 
                const elecTotal = data.varParams.elecRate * paddyTons; 
                const mktTotal = riceRev * (data.varParams.mktPercent/100); 
                
                const totalMarketingBudget = mktTotal; 

                let baseSalaryTotal = 0;
                let ssoTotal = 0;
                const hrCosts = data.hr.map(h => {
                    const ssoPerPerson = Math.floor(Math.min(h.salary, 15000) * 0.05);
                    const totalPerRole = (h.salary + ssoPerPerson) * h.count;
                    const ssoTotalRole = ssoPerPerson * h.count;
                    baseSalaryTotal += h.salary * h.count;
                    ssoTotal += ssoTotalRole;
                    return { ...h, ssoPerPerson, totalPerRole, ssoTotalRole };
                });
                const salaryTotal = baseSalaryTotal + ssoTotal; 
                
                const fixedCostItems = 
                    data.fixedParams.erp + 
                    data.fixedParams.campaign + 
                    data.fixedParams.other + 
                    maintenanceCostMonthly + 
                    insuranceMonthly + 
                    (data.fixedParams.audit || 0) + 
                    (data.fixedParams.travel || 0);

                const fixedCashTotal = salaryTotal + fixedCostItems; 

                const vatableExpenses = packTotal + elecTotal + platformTotal + mktTotal;
                const totalVatIn = vatableExpenses - (vatableExpenses / 1.07);
                
                const totalVar = riceTotal + packTotal + elecTotal + platformTotal + mktTotal; 
                const section7Total = elecTotal + platformTotal + mktTotal + fixedCostItems;

                const riceCostUnit = (5 / (data.yield/100)) * (data.paddyPrice/1000);
                const matCostUnit = riceCostUnit + data.unit.bag + data.unit.sticker;

                const basketSize = data.mktFunnel?.basketSize || 1;
                const cvr = data.mktFunnel?.cvr || 2.0;
                const ctr = data.mktFunnel?.ctr || 1.5;

                const totalOrders = data.targetBags / basketSize;
                const cpa = totalMarketingBudget / totalOrders; 
                const visitorsNeeded = totalOrders / (cvr / 100);
                const impressionsNeeded = visitorsNeeded / (ctr / 100);
                const impliedCPC = totalMarketingBudget / visitorsNeeded;
                const impliedCPM = (totalMarketingBudget / impressionsNeeded) * 1000;

                const roas = totalMarketingBudget > 0 ? riceRev / totalMarketingBudget : 0;
                const acos = riceRev > 0 ? (totalMarketingBudget / riceRev) * 100 : 0;

                const varCostPerUnit = matCostUnit + (data.varParams.elecRate * (5 / (data.yield/100)) / 1000) + (data.price * blendedFeePct/100);
                const marginPerUnit = data.price - varCostPerUnit;
                const beRoasVal = marginPerUnit > 0 ? data.price / marginPerUnit : 999;

                const clvP = data.clvParams || { freq: 4, retention: 60 };
                const grossMarginPct = riceRev > 0 ? ((riceRev - (riceTotal + packTotal + elecTotal + salaryTotal)) / riceRev) : 0; 
                const aov = basketSize * data.price;
                const retention = clvP.retention / 100;
                const ltv1 = (aov * clvP.freq * grossMarginPct); 
                
                // FIX: Calculate LTV 3 Years based on Retention decay (Geometric Series for 3 terms)
                // Year 1: 1.0, Year 2: retention, Year 3: retention^2
                const ltv3 = ltv1 * (1 + retention + Math.pow(retention, 2)); 
                
                const churn = 1 - retention;
                // FIX: Handle infinite LTV if retention is 100%
                const lifetimeValue = churn > 0.001 ? (ltv1 / churn) : (ltv1 * 50); 
                const ltvCac = cpa > 0 ? lifetimeValue / cpa : 0;

                const elasticityData = [];
                const baseVol = data.targetBags;
                const baseP = data.price;
                const coef = data.elasticityParams?.coefficient || 1.5;
                
                [-20, -10, 0, 10, 20].forEach(change => {
                    const newP = baseP * (1 + change/100);
                    const qtyChange = (change/100) * -coef;
                    const newVol = baseVol * (1 + qtyChange);
                    const newRev = newP * newVol;
                    elasticityData.push({
                        pct: `${change > 0 ? '+' : ''}${change}%`,
                        price: newP,
                        vol: newVol,
                        rev: newRev
                    });
                });

                const funnelMetrics = {
                    budget: totalMarketingBudget,
                    orders: totalOrders,
                    cpa: cpa,
                    visitors: visitorsNeeded,
                    cpc: impliedCPC,
                    impressions: impressionsNeeded,
                    cpm: impliedCPM,
                    roas: roas, 
                    acos: acos, 
                    gmv: riceRev,
                    beRoas: beRoasVal,
                    ltv1, 
                    ltv3, 
                    ltvCacRatio: ltvCac, // FIX: Mapped correctly to UI variable
                    lifetimeValue
                };

                const accruedRev = [];
                for(let k=1; k<=24; k++) {
                   const growthFactor = Math.pow(1 + data.monthlyGrowth/100, k - 1);
                   accruedRev.push(baseRev * growthFactor);
                }
                const dailyRevs = [0, ...accruedRev].map(r => r/30); 

                const cf = [];
                let runningCash = workingCap; 
                let annualOperatingCashProfit = 0; 
                let annualFinanceCost = 0; 
                let annualPrincipalPaid = 0;
                let lowestCashBalance = workingCap; 

                let remainingLoanPrincipal = data.loan.amount;
                const monthlyPrincipalPayment = data.loan.amount > 0 ? data.loan.amount / (data.loan.term * 12) : 0; 

                const creditTermDays = parseInt(data.creditTerm || 0);
                const season = data.seasonalShock || { active: false, startM: 5, endM: 8, costImpact: 20 };

                for(let i=1; i<=12; i++) {
                    const mRev = accruedRev[i-1]; 
                    
                    let cashInflow = 0;
                    const currentMonthStartCashDay = (i-1)*30 + 1;
                    const currentMonthEndCashDay = i*30;

                    const startSalesDay = currentMonthStartCashDay - creditTermDays;
                    const endSalesDay = currentMonthEndCashDay - creditTermDays;

                    const maxLookBack = Math.ceil(creditTermDays/30) + 1;
                    const startSourceM = Math.max(1, i - maxLookBack);
                    
                    for(let srcM = startSourceM; srcM <= i; srcM++) {
                        const mStart = (srcM-1)*30 + 1;
                        const mEnd = srcM*30;
                        const overlapStart = Math.max(startSalesDay, mStart);
                        const overlapEnd = Math.min(endSalesDay, mEnd);
                        if (overlapEnd >= overlapStart) {
                            const daysCount = overlapEnd - overlapStart + 1;
                            cashInflow += daysCount * dailyRevs[srcM]; 
                        }
                    }

                    const growthFactor = Math.pow(1 + data.monthlyGrowth/100, i - 1);
                    
                    let monthlyRiceCost = riceTotal * growthFactor;
                    if (season.active && i >= season.startM && i <= season.endM) {
                        monthlyRiceCost *= (1 + season.costImpact/100);
                    }

                    const mRice = monthlyRiceCost;
                    const mVatableVar = (packTotal + elecTotal + platformTotal + mktTotal) * growthFactor;
                    const mSalary = salaryTotal;
                    const mVatableFixed = fixedCostItems; 
                    
                    const mExpCash = mRice + mVatableVar + mSalary + mVatableFixed; 
                    
                    const mOutVat = totalVatOut * growthFactor;
                    const mInVatTotal = totalVatIn * growthFactor;
                    const mVatSettlement = mOutVat - mInVatTotal;
                    
                    const interestThisMonth = remainingLoanPrincipal * (data.loan.rate / 100 / 12);
                    const principalThisMonth = remainingLoanPrincipal > 0 ? monthlyPrincipalPayment : 0;
                    remainingLoanPrincipal -= principalThisMonth;

                    const mNetOpProfit = (mRev - mOutVat) - (mExpCash - mInVatTotal); 

                    annualOperatingCashProfit += mNetOpProfit;
                    annualFinanceCost += interestThisMonth;
                    annualPrincipalPaid += principalThisMonth;

                    const startOfMonthCash = runningCash;
                    const netCashMovement = cashInflow - mExpCash - mVatSettlement - interestThisMonth - principalThisMonth;
                    
                    runningCash += netCashMovement;
                    if(runningCash < lowestCashBalance) lowestCashBalance = runningCash;

                    cf.push({ 
                        m: i, 
                        rev: mRev, 
                        revCashIn: cashInflow, 
                        expCash: mExpCash, 
                        netOpCash: mNetOpProfit, 
                        interest: interestThisMonth, 
                        principal: principalThisMonth, 
                        cashStart: startOfMonthCash, 
                        cashPreTax: runningCash, 
                        vatPaid: mVatSettlement,
                        cashFinal: runningCash 
                    });
                }

                const calcTax = (profit) => {
                    if(profit <= 300000) return 0;
                    let tax = 0;
                    if(profit > 300000) tax += Math.min(profit - 300000, 2700000) * 0.15;
                    if(profit > 3000000) tax += (profit - 3000000) * 0.20;
                    return tax;
                };

                const taxableIncome = annualOperatingCashProfit - annualDepreciation - annualFinanceCost;
                let taxDetails = [];
                let totalTaxEst = calcTax(taxableIncome);
                
                if (taxableIncome > 0) {
                    if (taxableIncome > 300000) taxDetails.push({ tier: "300k-3M", rate: 15, amount: Math.min(taxableIncome - 300000, 2700000) * 0.15 });
                    if (taxableIncome > 3000000) taxDetails.push({ tier: "> 3M", rate: 20, amount: (taxableIncome - 3000000) * 0.20 });
                }
                
                const monthlyTaxAvg = totalTaxEst / 12;
                const cfFinal = cf.map((item, index) => {
                    let mTax = 0;
                    if (data.taxPaymentMode === 'annual') mTax = index === 11 ? totalTaxEst : 0;
                    else if (data.taxPaymentMode === 'monthly') mTax = monthlyTaxAvg;
                    
                    let finalCumulativeCash = item.cashPreTax;
                    if (data.taxPaymentMode === 'annual') { if (index === 11) finalCumulativeCash -= totalTaxEst; } 
                    else if (data.taxPaymentMode === 'monthly') { finalCumulativeCash -= (monthlyTaxAvg * (index + 1)); }
                    
                    if(finalCumulativeCash < lowestCashBalance) lowestCashBalance = finalCumulativeCash; 

                    return { ...item, tax: mTax, cashFinal: finalCumulativeCash };
                });

                const cfTotal = cfFinal.reduce((acc, cur) => ({
                    rev: acc.rev + cur.rev, 
                    revCashIn: (acc.revCashIn || 0) + cur.revCashIn,
                    expCash: acc.expCash + cur.expCash, netOpCash: acc.netOpCash + cur.netOpCash, 
                    tax: acc.tax + cur.tax, interest: acc.interest + cur.interest, principal: acc.principal + cur.principal, 
                    vatPaid: acc.vatPaid + cur.vatPaid
                }), { rev: 0, revCashIn: 0, expCash: 0, netOpCash: 0, tax: 0, interest: 0, principal: 0, vatPaid: 0 });
                cfTotal.cashFinal = cfFinal[11].cashFinal;

                const annualNetProfitAfterAll = taxableIncome - totalTaxEst; 
                const dividendTotal = annualNetProfitAfterAll > 0 ? annualNetProfitAfterAll * (data.dividend.payout / 100) : 0;
                const dividendPerPersonYear = data.dividend.founders > 0 ? dividendTotal / data.dividend.founders : 0;
                const dividendPerPersonMonth = dividendPerPersonYear / 12;
                const roi = totalSources > 0 ? (annualNetProfitAfterAll / totalSources) * 100 : 0;
                
                const vcTotal = totalVar; 
                const revenueTotal = baseRev;
                const fcTotal = fixedCashTotal;
                const revPerBag = revenueTotal / data.targetBags;
                const vcPerBag = vcTotal / data.targetBags;
                const cmPerBag = revPerBag - vcPerBag; 
                const bepUnits = cmPerBag > 0 ? fcTotal / cmPerBag : 0;
                const bepSales = bepUnits * revPerBag;
                const bepData = [];
                [0, 0.5, 1.0, 1.5].forEach(s => {
                    const units = data.targetBags * s;
                    bepData.push({ units: units, revenue: units * revPerBag, totalCost: fcTotal + (units * vcPerBag), fixedCost: fcTotal });
                });
                if(bepUnits < data.targetBags * 1.5) bepData.push({ units: bepUnits, revenue: bepSales, totalCost: bepSales, fixedCost: fcTotal, isBep: true });
                bepData.sort((a,b) => a.units - b.units);

                const netMargin = (annualNetProfitAfterAll / cfTotal.rev) * 100;
                const grossMargin = ((riceRev - (riceTotal + packTotal + elecTotal + salaryTotal)) / riceRev) * 100;
                const debtService = annualPrincipalPaid + annualFinanceCost;
                const dscr = debtService > 0 ? annualOperatingCashProfit / debtService : (annualOperatingCashProfit > 0 ? 999 : 0);

                let paybackMonth = _t('paybackNotYet');
                const annualCashFlow = annualOperatingCashProfit - totalTaxEst - annualFinanceCost;
                if (annualCashFlow > 0) {
                      const monthsToPayback = totalSources / (annualCashFlow/12);
                      if (monthsToPayback <= 12) paybackMonth = `${Math.ceil(monthsToPayback)} ${_t('month')}`;
                      else paybackMonth = `${(monthsToPayback/12).toFixed(1)} ${_t('year')}`;
                }

                const vatBreakdown = {
                    vatableExp: vatableExpenses,
                    inputVat: totalVatIn,
                    outputVat: totalVatOut,
                    netVat: (totalVatOut - totalVatIn) 
                };

                const revBreakdown = {
                    sales: riceRev, byProduct: totalByProductIncome, logistics: logIncome,
                    totalIn: baseRev, vat: totalVatOut,
                    opCost: (totalVar - totalVatOut) + fixedCashTotal,
                    opVar: totalVar - totalVatOut,
                    opFixed: fixedCashTotal,
                    netCash: baseRev - totalVatOut - (totalVar - totalVatOut) - fixedCashTotal,
                    riceCost: riceTotal, packCost: packTotal, feesCost: platformTotal + mktTotal,
                    elecCost: elecTotal, salaryCost: salaryTotal, otherFixed: fixedCostItems,
                    otherDetails: {
                        erp: data.fixedParams.erp,
                        campaign: data.fixedParams.campaign,
                        misc: data.fixedParams.other,
                        maintenance: maintenanceCostMonthly,
                        insurance: insuranceMonthly,
                        audit: data.fixedParams.audit,
                        travel: data.fixedParams.travel
                    }
                };
                
                const maxCapacity = data.maxCapacity || 30000;
                const utilizationPct = (data.targetBags / maxCapacity) * 100;
                const fixedCostPerUnit = data.targetBags > 0 ? fixedCashTotal / data.targetBags : 0;
                const varCostPerUnitDisplay = data.targetBags > 0 ? (totalVar - totalVatOut) / data.targetBags : 0;

                return {
                    totalCapex, totalSources, workingCap, dayTarget, hourTarget, paddyTons,
                    annualDepreciation, depFactory: data.capex.factory / data.depreciation.factoryYears, depMachine: data.capex.machine / data.depreciation.machineYears,
                    totalByProductIncome, byProductsCalc, riceCostUnit, matCostUnit, grossRev: riceRev,
                    riceTotal, packTotal, elecTotal, platformTotal, mktTotal, totalVar,
                    salaryTotal, fixedCashTotal, logIncome, hrCosts,
                    ebitda: annualOperatingCashProfit, 
                    annualProfitEst: taxableIncome, annualTax: totalTaxEst, taxDetails, 
                    netProfit: annualNetProfitAfterAll, roi, paybackMonth, netMargin, grossMargin, dscr,
                    bepUnits, bepSales, fcTotal, vcPerBag, revPerBag, bepData,
                    cf: cfFinal, cfTotal, dividendTotal, revBreakdown, vatBreakdown,
                    section7Total, elecTotal, platformTotal, mktTotal,
                    dividendPerPersonYear, dividendPerPersonMonth,
                    annualFinanceCost, annualPrincipalPaid,
                    lowestCashBalance, 
                    funnelMetrics, blendedFeePct, elasticityData,
                    yrProj: null,
                    refundTotal,
                    utilizationPct, fixedCostPerUnit, varCostPerUnitDisplay
                };
            };

            const sensitivityData = useMemo(() => {
                const results = [];
                const priceSteps = [0.9, 1.0, 1.1]; 
                const volumeSteps = [0.9, 1.0, 1.1]; 
                priceSteps.forEach(pStep => {
                    const row = [];
                    volumeSteps.forEach(vStep => {
                        const tData = JSON.parse(JSON.stringify(d));
                        tData.targetBags = Math.round(d.targetBags * vStep);
                        tData.paddyPrice = Math.round(d.paddyPrice * pStep);
                        const financials = calculateFinancials(tData);
                        row.push({ vLabel: `${(vStep*100-100).toFixed(0)}%`, pLabel: `${(pStep*100-100).toFixed(0)}%`, profit: financials.netProfit });
                    });
                    results.push(row);
                });
                return results;
            }, [d, lang]);

            const spreadData = useMemo(() => {
                const results = [];
                const paddySteps = [0.9, 1.0, 1.1]; 
                const sellPriceSteps = [0.9, 1.0, 1.1]; 
                paddySteps.forEach(costStep => {
                    const row = [];
                    sellPriceSteps.forEach(priceStep => {
                        const tData = JSON.parse(JSON.stringify(d));
                        tData.paddyPrice = Math.round(d.paddyPrice * costStep);
                        tData.price = Math.round(d.price * priceStep);
                        const financials = calculateFinancials(tData);
                        row.push({ 
                            cLabel: `${(costStep*100-100).toFixed(0)}%`, 
                            pLabel: `${(priceStep*100-100).toFixed(0)}%`, 
                            profit: financials.netProfit 
                        });
                    });
                    results.push(row);
                });
                return results;
            }, [d, lang]);

            const scenarioComparison = useMemo(() => {
                const scenarios = ['worst', 'base', 'best'];
                return scenarios.map(type => {
                    let sData = JSON.parse(JSON.stringify(d)); 
                    if (type === 'worst') { 
                        sData.targetBags = 8000; 
                        sData.paddyPrice = 18000; 
                        sData.growth = 0; 
                        sData.varParams.mktPercent = 20; 
                    } 
                    else if (type === 'base') { 
                        sData.targetBags = 15000; 
                        sData.paddyPrice = 16000; 
                        sData.growth = 10; 
                        sData.varParams.mktPercent = 15; 
                    } 
                    else if (type === 'best') { 
                        sData.targetBags = 20000; 
                        sData.paddyPrice = 15000; 
                        sData.growth = 15; 
                        sData.varParams.mktPercent = 13; 
                    }
                    const res = calculateFinancials(sData);
                    return { type, netProfit: res.netProfit, cashFinal: res.cfTotal.cashFinal };
                });
            }, [d, lang]); 

            const adsMatrixData = useMemo(() => {
                if (!c) return [];
                const baseCPM = c.funnelMetrics.cpm || 150; 
                const basePrice = d.price;
                const baseBasket = d.mktFunnel.basketSize;
                const cvrSteps = [0.8, 1.0, 1.2]; 
                const ctrSteps = [0.8, 1.0, 1.2];
                const results = [];
                cvrSteps.forEach(cvrMult => {
                    const row = [];
                    ctrSteps.forEach(ctrMult => {
                        const simCVR = d.mktFunnel.cvr * cvrMult;
                        const simCTR = d.mktFunnel.ctr * ctrMult;
                        const simRoas = (baseBasket * basePrice * simCVR * simCTR) / (baseCPM / 10);
                        row.push({
                            cvrLabel: simCVR.toFixed(2) + '%',
                            ctrLabel: simCTR.toFixed(2) + '%',
                            roas: simRoas
                        });
                    });
                    results.push(row);
                });
                return results;
            }, [d, c, lang]);

            useEffect(() => { 
                const financials = calculateFinancials(d);
                setC(financials); 
            }, [d, lang]);

            const projection = useMemo(() => {
                // Ensure t is available or use fallback
                const _t = (k) => TRANS[lang] ? (TRANS[lang][k] || k) : k;

                if(!c) return { data: [], npv: 0 }; 
                const yrProj = [];
                let yCash = c.cfTotal.cashFinal;
                const y1TaxPaid = (d.taxPaymentMode === 'annual' || d.taxPaymentMode === 'monthly') ? c.annualTax : 0;
                const y1ExpCash = c.cfTotal.expCash + y1TaxPaid + c.cfTotal.interest + c.cfTotal.principal;
                yCash -= c.dividendTotal;
                let accumulatedLoss = 0;
                if (c.annualProfitEst < 0) accumulatedLoss = Math.abs(c.annualProfitEst);

                yrProj.push({ y: 1, rev: c.cfTotal.rev, exp: y1ExpCash, ebitda: c.ebitda, dep: c.annualDepreciation, tax: c.annualTax, net: c.netProfit, div: c.dividendTotal, cash: yCash, taxSaving: 0 });

                let prevRev = c.cfTotal.rev;
                const totalExpY1 = c.cfTotal.expCash;
                const fixedComponentY1 = c.salaryTotal + (c.section7Total - c.elecTotal - c.platformTotal - c.mktTotal); 
                const varComponentY1 = totalExpY1 - fixedComponentY1;
                let prevVar = varComponentY1;
                let prevFixed = fixedComponentY1;
                let prevTaxLiability = d.taxPaymentMode === 'deferred' ? c.annualTax : 0;
                let remainingLoan = d.loan.amount - c.annualPrincipalPaid;
                let npv = -c.totalSources; 
                const discountRate = (d.discountRate || 10) / 100;
                const calcTax = (profit) => {
                    if(profit <= 300000) return 0;
                    let tax = 0;
                    if(profit > 300000) tax += Math.min(profit - 300000, 2700000) * 0.15;
                    if(profit > 3000000) tax += (profit - 3000000) * 0.20;
                    return tax;
                };

                for(let y=2;y<=5;y++) {
                    const growthRate = d.growth / 100;
                    const inflationRate = d.inflation / 100;
                    const yRev = prevRev * (1 + growthRate);
                    const yVar = prevVar * (1 + growthRate); 
                    const yFixed = prevFixed * (1 + inflationRate); 
                    const yExpExclTax = yVar + yFixed;
                    const yGrossMargin = yRev - yExpExclTax;
                    const yVatLiability = yGrossMargin * (7/107);
                    const yEbitda = yGrossMargin - yVatLiability; 
                    const annualPrincipal = c.annualPrincipalPaid;
                    remainingLoan = Math.max(0, remainingLoan - annualPrincipal);
                    const yInterest = remainingLoan * (d.loan.rate / 100); 
                    const yPrincipal = remainingLoan > 0 ? annualPrincipal : 0;
                    const yTaxable = yEbitda - c.annualDepreciation - yInterest;
                    let taxableAfterShield = yTaxable;
                    let usedLoss = 0;
                    if (yTaxable > 0 && accumulatedLoss > 0) {
                        usedLoss = Math.min(yTaxable, accumulatedLoss);
                        taxableAfterShield = yTaxable - usedLoss;
                        accumulatedLoss -= usedLoss;
                    } else if (yTaxable < 0) {
                        accumulatedLoss += Math.abs(yTaxable);
                        taxableAfterShield = 0;
                    }
                    const taxNormal = calcTax(yTaxable > 0 ? yTaxable : 0);
                    const taxShielded = calcTax(taxableAfterShield);
                    const taxSaving = taxNormal - taxShielded;
                    const yTax = taxShielded;
                    let taxPaidThisYear = d.taxPaymentMode === 'deferred' ? prevTaxLiability : yTax;
                    if (d.taxPaymentMode === 'deferred') prevTaxLiability = yTax;
                    const yNetAcc = yTaxable - yTax; 
                    const yDiv = yNetAcc > 0 ? yNetAcc * (d.dividend.payout / 100) : 0;
                    yCash += (yEbitda - taxPaidThisYear - yDiv - yInterest - yPrincipal);
                    yrProj.push({ y, rev: yRev, exp: yExpExclTax + taxPaidThisYear + yInterest + yPrincipal, ebitda: yEbitda, dep: c.annualDepreciation, tax: yTax, net: yNetAcc, div: yDiv, cash: yCash, taxSaving });
                    prevRev = yRev;
                    prevVar = yVar;
                    prevFixed = yFixed;
                }
                
                yrProj.forEach((yr) => {
                      const cashFlow = yr.ebitda - yr.tax;
                      npv += cashFlow / Math.pow(1 + discountRate, yr.y);
                });
                return { data: yrProj, npv };
            }, [c, d.growth, d.inflation, d.dividend.payout, d.taxPaymentMode, d.discountRate, d.loan.amount, d.loan.rate, d.loan.term, lang]);

            if(c && projection.data.length > 0) {
                c.yrProj = projection;
            }

            if(!c) return <div className="p-10 text-center text-slate-500">Loading System...</div>;

            const costData = [
                { name: t('rice'), value: c.revBreakdown.riceCost }, { name: t('bag'), value: c.revBreakdown.packCost },
                { name: t('marketing'), value: c.mktTotal }, { name: t('platform'), value: c.platformTotal },
                { name: t('elec'), value: c.elecTotal }, { name: t('salary'), value: c.salaryTotal },
                { name: t('misc'), value: c.revBreakdown.otherFixed + c.annualFinanceCost },
            ];
            const revenueData = [ { name: t('rice'), value: c.grossRev }, { name: t('item'), value: c.totalByProductIncome }, { name: 'Logistics', value: c.logIncome } ];
            
            const getHeatmapColor = (profit) => {
                if (profit < 0) return 'bg-red-100 text-red-700';
                if (profit < c.netProfit * 0.5) return 'bg-orange-100 text-orange-700';
                if (profit < c.netProfit * 0.8) return 'bg-yellow-100 text-yellow-700';
                return 'bg-green-100 text-green-700';
            };

            return (
                <div className="app-container font-sans text-slate-800">
                    <header className="header-bar sticky top-0 z-50 flex flex-col md:flex-row justify-between items-center gap-4">
                        <div>
                            <h1 className="text-xl font-bold tracking-tight">{t('title')}</h1>
                            <p className="text-xs text-slate-400">{t('subtitle')}</p>
                        </div>
                        <div className="flex items-center gap-2 header-controls">
                            <span className="text-xs text-slate-400 font-bold mr-1">{t('scenario')}</span>
                            <button onClick={()=>applyScenario('worst')} className={`scenario-btn ${d.scenario==='worst'?'bg-red-100 text-red-700 active ring-2 ring-red-500':'bg-slate-700 text-slate-300'}`}>Worst</button>
                            <button onClick={()=>applyScenario('base')} className={`scenario-btn ${d.scenario==='base'?'bg-blue-100 text-blue-700 active ring-2 ring-blue-500':'bg-slate-700 text-slate-300'}`}>Base</button>
                            <button onClick={()=>applyScenario('best')} className={`scenario-btn ${d.scenario==='best'?'bg-green-100 text-green-700 active ring-2 ring-green-500':'bg-slate-700 text-slate-300'}`}>Best</button>
                            
                            <div className="h-6 w-px bg-slate-600 mx-2"></div>
                            
                            <button onClick={() => setLang(lang === 'th' ? 'cn' : 'th')} className="scenario-btn bg-yellow-500 text-white hover:bg-yellow-600 flex items-center gap-1 font-bold">
                                <span>ğŸŒ</span> {lang === 'th' ? 'TH | CN' : 'CN | TH'}
                            </button>

                            <button onClick={resetToDefault} className="scenario-btn bg-slate-600 text-slate-200 ml-2 hover:bg-slate-500">{t('reset')}</button>
                            <button onClick={handleShare} className="scenario-btn bg-purple-600 text-white ml-2 hover:bg-purple-500 flex items-center gap-1"><span>ğŸ”—</span> {t('share')}</button>
                            <button onClick={handleExport} className="scenario-btn bg-emerald-600 text-white ml-2 hover:bg-emerald-500 flex items-center gap-1"><span>ğŸ“¥</span> CSV</button>
                            <button onClick={handlePrint} className="scenario-btn bg-white text-slate-800 ml-2 hover:bg-slate-100 flex items-center gap-1 font-bold border border-slate-300"><span>ğŸ–¨ï¸</span> {t('print')}</button>
                        </div>
                    </header>
                    
                    {/* RISK SIMULATION CENTER */}
                    <div className="risk-sim-section bg-white border-b border-slate-200 p-4 sticky top-[70px] z-40 shadow-sm">
                         <div className="max-w-[1600px] mx-auto">
                            <div className="flex justify-between items-center mb-2">
                                <div className="text-sm font-bold text-slate-700 flex items-center gap-2">
                                    <span>{t('riskTitle')}</span>
                                    {activeSim && <span className="bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full animate-pulse">{t('simActive')} {SCENARIOS[activeSim].label[lang]}</span>}
                                </div>
                                {activeSim && (
                                    <button onClick={() => handleSimulate(activeSim)} className="text-xs bg-slate-200 hover:bg-slate-300 px-3 py-1 rounded text-slate-600 font-bold transition">
                                        â†º {t('stopSim')}
                                    </button>
                                )}
                            </div>
                            
                            <div className="grid grid-cols-4 gap-4">
                                {/* Cat 1: Market */}
                                <div className="space-y-1">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-wide">{t('riskLabelMarket')}</div>
                                    <div className="grid grid-cols-2 gap-1">
                                        {['price_war', 'new_competitor', 'algo_change', 'negative_viral'].map(k => (
                                            <button key={k} onClick={() => handleSimulate(k)} className={`risk-btn cat-1 ${activeSim === k ? 'active' : ''}`}>
                                                {SCENARIOS[k].label[lang]}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                {/* Cat 2: Supply */}
                                <div className="space-y-1">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-wide">{t('riskLabelSupply')}</div>
                                    <div className="grid grid-cols-2 gap-1">
                                        {['drought', 'machine_break', 'pack_cost', 'energy_crisis'].map(k => (
                                            <button key={k} onClick={() => handleSimulate(k)} className={`risk-btn cat-2 ${activeSim === k ? 'active' : ''}`}>
                                                {SCENARIOS[k].label[lang]}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                {/* Cat 3: Financial */}
                                <div className="space-y-1">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-wide">{t('riskLabelFin')}</div>
                                    <div className="grid grid-cols-2 gap-1">
                                        {['rate_hike', 'credit_crunch', 'tax_fine', 'inflation'].map(k => (
                                            <button key={k} onClick={() => handleSimulate(k)} className={`risk-btn cat-3 ${activeSim === k ? 'active' : ''}`}>
                                                {SCENARIOS[k].label[lang]}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                                {/* Cat 4: Ops */}
                                <div className="space-y-1">
                                    <div className="text-[10px] font-bold text-slate-400 uppercase tracking-wide">{t('riskLabelOps')}</div>
                                    <div className="grid grid-cols-2 gap-1">
                                        {['staff_turnover', 'fraud', 'warehouse_pest', 'platform_ban'].map(k => (
                                            <button key={k} onClick={() => handleSimulate(k)} className={`risk-btn cat-4 ${activeSim === k ? 'active' : ''}`}>
                                                {SCENARIOS[k].label[lang]}
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>

                            {/* Analysis Result Box */}
                            {activeSim && (
                                <div className="mt-3 bg-slate-50 border border-slate-200 rounded p-3 text-sm animate-fade-in">
                                    <h4 className="font-bold text-slate-700 mb-2 flex items-center gap-2">
                                        {t('riskAnalTitle')} <span className="text-xs font-normal text-slate-400">({SCENARIOS[activeSim].label[lang]})</span>
                                    </h4>
                                    
                                    <div className="mb-3 p-2 bg-yellow-50 text-yellow-800 text-xs rounded border border-yellow-200">
                                        <strong>{t('simLogic')}</strong> {SCENARIOS[activeSim].math_desc[lang]}
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <div className="text-red-600">
                                            <div className="font-bold text-xs uppercase mb-1">{t('impact')}</div>
                                            {SCENARIOS[activeSim].analysis[lang].impact}
                                        </div>
                                        <div className="text-slate-600">
                                            <div className="font-bold text-xs uppercase mb-1">{t('cause')}</div>
                                            {SCENARIOS[activeSim].analysis[lang].cause}
                                        </div>
                                        <div className="text-blue-600 bg-blue-50 p-2 rounded">
                                            <div className="font-bold text-xs uppercase mb-1">{t('strategy')}</div>
                                            {SCENARIOS[activeSim].analysis[lang].strategy}
                                        </div>
                                    </div>
                                </div>
                            )}
                         </div>
                    </div>

                    {toast && (
                        <div className="fixed top-20 right-4 bg-green-600 text-white px-4 py-2 rounded shadow-lg z-[100] animate-bounce">
                            {toast}
                        </div>
                    )}

                    <main className="p-4 max-w-[1600px] mx-auto grid grid-cols-1 lg:grid-cols-12 gap-6">
                        
                        {/* --- LEFT: Production & Cost --- */}
                        <div className="lg:col-span-3 space-y-4">
                            <h2 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">{t('section1')}</h2>
                            <div className="card">
                                <div className="card-header"><div className="card-title">{t('capexTitle')}</div><div className="text-red-500 font-bold text-sm">{fmt(c.totalCapex)}</div></div>
                                <div className="card-body">
                                    <div className="input-group"><label className="input-label">{t('regCapital')}</label><input type="number" className="input-field border-blue-200 bg-blue-50 text-blue-800" value={d.regCapital} onChange={e=>up('regCapital',null,e.target.value)} /></div>
                                    <div className="p-2 border border-dashed rounded mb-3 bg-yellow-50/50"><div className="text-xs font-bold text-slate-500 mb-1">{t('bankLoan')}</div><div className="flex gap-2 mb-1"><div className="flex-1"><label className="text-[10px]">{t('loanAmount')}</label><input type="number" className="input-field" value={d.loan.amount} onChange={e=>up('loan','amount',e.target.value)}/></div><div className="w-16"><label className="text-[10px]">{t('interestRate')}</label><input type="number" className="input-field text-center" value={d.loan.rate} onChange={e=>up('loan','rate',e.target.value)}/></div></div><div className="flex gap-2"><div className="flex-1 text-[10px] text-slate-400 pt-1">{t('loanTerm')} {d.loan.term} {t('year')}</div><div className="text-[10px] text-red-400 font-bold pt-1">{t('interestPerYear')} {fmt(c.annualFinanceCost)}</div></div></div>
                                    <div className="grid grid-cols-2 gap-2 mb-2"><div><label className="input-label">{t('factory')}</label><input type="number" className="input-field" value={d.capex.factory} onChange={e=>up('capex','factory',e.target.value)}/></div><div><label className="input-label">{t('machine')}</label><input type="number" className="input-field" value={d.capex.machine} onChange={e=>up('capex','machine',e.target.value)}/></div></div>
                                    <div className="input-group"><label className="input-label">{t('license')}</label><input type="number" className="input-field" value={d.capex.license} onChange={e=>up('capex','license',e.target.value)} /></div>
                                    <div className="input-group bg-orange-50 p-2 rounded border border-orange-100"><label className="input-label text-orange-800 font-bold">{t('stockMoney')}</label><input type="number" className="input-field bg-white text-orange-700 font-bold" value={d.capex.stock} onChange={e=>up('capex','stock',e.target.value)} /></div>
                                    <div className="flex justify-between text-xs text-green-600 mt-2 bg-green-50 p-2 rounded"><span>{t('workingCap')}</span><span className="font-bold">{fmt(c.workingCap)}</span></div>
                                </div>
                            </div>

                            {/* NEW: Seasonal Shock Simulator */}
                            <div className="card border-red-100">
                                <div className="card-header bg-red-50"><div className="card-title text-red-700">{t('seasonalTitle')}</div></div>
                                <div className="card-body p-3">
                                    <div className="flex items-center gap-2 mb-3">
                                        <input type="checkbox" className="w-4 h-4" checked={d.seasonalShock.active} onChange={e=>upNew('seasonalShock', 'active', e.target.checked)}/>
                                        <span className="text-sm font-bold text-slate-700">{t('enableShock')}</span>
                                    </div>
                                    <div className={`space-y-2 ${!d.seasonalShock.active && 'opacity-50 pointer-events-none'}`}>
                                        <div className="flex gap-2">
                                            <div><label className="text-[10px] text-slate-500">{t('shockMonthStart')}</label><input type="number" className="input-field" min="1" max="12" value={d.seasonalShock.startM} onChange={e=>upNew('seasonalShock', 'startM', e.target.value)}/></div>
                                            <div><label className="text-[10px] text-slate-500">{t('shockMonthEnd')}</label><input type="number" className="input-field" min="1" max="12" value={d.seasonalShock.endM} onChange={e=>upNew('seasonalShock', 'endM', e.target.value)}/></div>
                                        </div>
                                        <div><label className="text-[10px] text-slate-500">{t('shockCostImpact')}</label><input type="number" className="input-field border-red-300" value={d.seasonalShock.costImpact} onChange={e=>upNew('seasonalShock', 'costImpact', e.target.value)}/></div>
                                        <div className="text-[9px] text-slate-400 mt-1">{t('shockDesc')}</div>
                                    </div>
                                </div>
                            </div>

                            <div className="card"><div className="card-header"><div className="card-title">{t('productionTitle')}</div></div><div className="card-body"><div className="input-group mb-4"><label className="input-label flex justify-between"><span>{t('yieldRice')}</span><span className="font-bold text-blue-600">{d.yield}%</span></label><input type="range" className="w-full" min="40" max="70" value={d.yield} onChange={handleYieldChange}/></div><div className="input-group"><label className="input-label">{t('paddyPrice')}</label><input type="number" className="input-field" value={d.paddyPrice} onChange={e=>up('paddyPrice',null,e.target.value)}/></div><div className="text-xs text-slate-500 mt-2 text-right">{t('paddyUsed')} <b>{fmtDec(c.paddyTons)}</b> {t('ton')}</div><div className="text-xs text-right text-orange-600 font-bold">{t('riceBudget')} {fmt(c.riceTotal)}</div></div></div>
                            <div className="card"><div className="card-header"><div className="card-title">{t('unitCostTitle')}</div><div className="text-red-600 font-bold">{fmtDec(c.matCostUnit)}</div></div><div className="card-body"><div className="grid grid-cols-3 gap-2 text-center text-xs mb-2"><div className="bg-slate-100 p-1 rounded"><div>{t('rice')}</div><b>{fmtDec(c.riceCostUnit)}</b><div className="text-[10px] text-slate-500 mt-1 border-t border-slate-200 pt-1">{fmt(c.riceTotal)}</div></div><div className="bg-slate-100 p-1 rounded"><div>{t('bag')}</div><input className="w-full text-center bg-transparent font-bold" value={d.unit.bag} onChange={e=>up('unit','bag',e.target.value)}/><div className="text-[10px] text-slate-500 mt-1 border-t border-slate-200 pt-1">{fmt(d.unit.bag * d.targetBags)}</div></div><div className="bg-slate-100 p-1 rounded"><div>{t('sticker')}</div><input className="w-full text-center bg-transparent font-bold" value={d.unit.sticker} onChange={e=>up('unit','sticker',e.target.value)}/><div className="text-[10px] text-slate-500 mt-1 border-t border-slate-200 pt-1">{fmt(d.unit.sticker * d.targetBags)}</div></div></div><div className="text-xs text-right text-red-600 font-bold border-t border-slate-100 pt-2">{t('totalUnitCost')} {fmt(c.riceTotal + c.packTotal)}</div></div></div>
                            <div className="card"><div className="card-header"><div className="card-title">{t('hrTitle')}</div><div className="text-blue-600 font-bold text-sm">{fmt(c.salaryTotal)}</div></div><div className="card-body"><table className="w-full hr-table"><thead><tr><th>{t('role')}</th><th className="w-10 text-center">{t('count')}</th><th className="w-20 text-right">{t('salary')}</th><th className="w-16 text-right text-xs text-slate-500">{t('sso')}</th><th className="w-20 text-right font-bold">{t('total')}</th></tr></thead><tbody>{c.hrCosts.map((h,i)=>(<tr key={i}><td>{h.role}</td><td><input type="number" className="hr-input text-center" value={h.count} onChange={e=>upArr('hr',i,'count',e.target.value)}/></td><td><input type="number" className="hr-input" value={h.salary} onChange={e=>upArr('hr',i,'salary',e.target.value)}/></td><td className="text-right text-xs text-slate-500">{fmt(h.ssoTotalRole)}</td><td className="text-right font-bold text-slate-700">{fmt(h.totalPerRole)}</td></tr>))}</tbody></table></div></div>
                            <div className="card"><div className="card-header"><div className="card-title">{t('expenseTitle')}</div><div className="text-red-500 font-bold text-sm">{fmt(c.section7Total)}</div></div><div className="card-body space-y-3">
                                <div>
                                    <div className="text-xs font-bold text-slate-500 mb-1">{t('varParamTitle')}</div>
                                    <div className="input-row"><span className="text-sm">{t('elec')} ({d.varParams.elecRate} /{t('ton')})</span><div className="flex items-center gap-2"><input type="number" className="input-field w-16" value={d.varParams.elecRate} onChange={e=>up('varParams','elecRate',e.target.value)}/><span className="text-xs font-bold text-slate-600 min-w-[60px] text-right">{fmt(c.elecTotal)}</span></div></div>
                                    <div className="input-row">
                                        <span className="text-sm flex flex-col">
                                            <span>{t('platform')} (%)</span>
                                            <span className="text-[9px] text-slate-400 italic">({t('autoChannel')})</span>
                                        </span>
                                        <div className="flex items-center gap-2">
                                            <input type="number" className="input-field w-16 bg-slate-100 text-slate-500 cursor-not-allowed" value={(c.blendedFeePct || 0).toFixed(2)} disabled />
                                            <span className="text-xs font-bold text-slate-600 min-w-[60px] text-right">{fmt(c.platformTotal)}</span>
                                        </div>
                                    </div>
                                    <div className="input-row"><span className="text-sm">{t('marketing')} (%)</span><div className="flex items-center gap-2"><input type="number" className="input-field w-16" value={d.varParams.mktPercent} onChange={e=>up('varParams','mktPercent',e.target.value)}/><span className="text-xs font-bold text-slate-600 min-w-[60px] text-right">{fmt(c.mktTotal)}</span></div></div>
                                    <div className="input-row"><span className="text-sm">{t('returnRate')}</span><div className="flex items-center gap-2"><input type="number" className="input-field w-16" value={d.varParams.returnRate} onChange={e=>up('varParams','returnRate',e.target.value)}/><span className="text-xs font-bold text-slate-600 min-w-[60px] text-right">-{fmt(c.refundTotal)}</span></div></div>
                                </div>
                                <div>
                                    <div className="text-xs font-bold text-slate-500 mb-1">{t('fixedParamTitle')}</div>
                                    <div className="input-row"><span className="text-sm">{t('maintenance')}</span><input type="number" className="input-field w-24" value={d.fixedParams.maintPercent} onChange={e=>up('fixedParams','maintPercent',e.target.value)} placeholder="% Machine"/></div>
                                    <div className="input-row"><span className="text-sm">{t('erp')}</span><input type="number" className="input-field w-24" value={d.fixedParams.erp} onChange={e=>up('fixedParams','erp',e.target.value)}/></div>
                                    <div className="input-row"><span className="text-sm">{t('insurance')}</span><input type="number" className="input-field w-24" value={d.fixedParams.insurance} onChange={e=>up('fixedParams','insurance',e.target.value)}/></div>
                                    <div className="input-row"><span className="text-sm">{t('misc')}</span><input type="number" className="input-field w-24" value={d.fixedParams.other} onChange={e=>up('fixedParams','other',e.target.value)}/></div>
                                    
                                    <div className="text-xs font-bold text-slate-500 mt-2 mb-1 pt-2 border-t border-slate-100">{t('operationTitle')}</div>
                                    <div className="input-row"><span className="text-sm">{t('audit')}</span><input type="number" className="input-field w-24" value={d.fixedParams.audit} onChange={e=>up('fixedParams','audit',e.target.value)}/></div>
                                    <div className="input-row"><span className="text-sm">{t('travel')}</span><input type="number" className="input-field w-24" value={d.fixedParams.travel} onChange={e=>up('fixedParams','travel',e.target.value)}/></div>
                                    
                                    <div className="input-row bg-yellow-50 p-1 rounded border border-yellow-100 mt-2"><span className="text-sm font-bold text-yellow-800">{t('campaign')}</span><div className="font-bold text-yellow-700">{fmt(d.fixedParams.campaign)}</div></div>
                                </div>
                                
                                {/* Campaign Details Breakdown */}
                                <div className="mt-2 border-t border-slate-200 pt-2">
                                    <div className="text-[10px] font-bold text-slate-400 mb-1">{t('campaignBreakdown')}</div>
                                    <table className="w-full text-[10px]">
                                        <thead>
                                            <tr className="bg-yellow-50 text-yellow-800">
                                                <th className="text-left p-1 rounded-l">{t('reward')}</th>
                                                <th className="text-center p-1">{t('qty')}</th>
                                                <th className="text-right p-1">{t('costPerUnit')}</th>
                                                <th className="text-right p-1 rounded-r">{t('total')}</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {d.campaignDetails.map((item, i) => (
                                                <tr key={i} className="border-b border-slate-100">
                                                    <td className="p-1"><input className="w-full bg-transparent outline-none focus:text-blue-600" value={item.id ? t(item.id) : item.name} onChange={e=>upCampaign(i,'name',e.target.value)}/></td>
                                                    <td className="p-1"><input type="number" className="w-8 text-center bg-slate-50 border rounded p-0.5 outline-none focus:border-blue-300" value={item.qty} onChange={e=>upCampaign(i,'qty',e.target.value)}/></td>
                                                    <td className="p-1"><input type="number" className="w-12 text-right bg-slate-50 border rounded p-0.5 outline-none focus:border-blue-300" value={item.costPerUnit} onChange={e=>upCampaign(i,'costPerUnit',e.target.value)}/></td>
                                                    <td className="p-1 text-right font-medium text-slate-600">{fmt(item.qty * item.costPerUnit)}</td>
                                                </tr>
                                            ))}
                                            <tr className="font-bold text-yellow-900 border-t border-yellow-200">
                                                <td colSpan="3" className="p-1 text-right">Total Campaign</td>
                                                <td className="p-1 text-right">{fmt(d.fixedParams.campaign)}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div></div>
                        </div>

                        {/* --- CENTER: Strategy & Dashboard --- */}
                        <div className="lg:col-span-5 space-y-4">
                            <h2 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">{t('section2')}</h2>
                            
                            <div className="bg-slate-800 rounded-xl p-4 text-white shadow-lg mb-4">
                                <div className="flex justify-between items-start mb-4">
                                    <h3 className="font-bold text-lg flex items-center gap-2"><span className="text-yellow-400">â˜…</span> {t('execSummary')}</h3>
                                    <div className="text-right">
                                        <div className="text-xs text-slate-400">{t('netProfitYear1')}</div>
                                        <div className={`text-2xl font-bold ${c.netProfit>0?'text-green-400':'text-red-400'}`}>{fmt(c.netProfit)} à¸¿</div>
                                    </div>
                                </div>
                                <div className="grid grid-cols-4 gap-2 text-center">
                                    <div className="bg-slate-700/50 rounded p-2 border border-slate-600">
                                        <div className="text-[10px] text-slate-400">Net Margin</div>
                                        <div className="font-bold text-md text-green-300">{(c.netMargin || 0).toFixed(1)}%</div>
                                    </div>
                                    <div className="bg-slate-700/50 rounded p-2 border border-slate-600">
                                        <div className="text-[10px] text-slate-400">Gross Margin</div>
                                        <div className="font-bold text-md text-blue-300">{(c.grossMargin || 0).toFixed(1)}%</div>
                                    </div>
                                    <div className="bg-slate-700/50 rounded p-2 border border-slate-600">
                                        <div className="text-[10px] text-slate-400">DSCR</div>
                                        <div className={`font-bold text-md ${c.dscr>=1.25?'text-green-300':c.dscr>=1?'text-yellow-300':'text-red-400'}`}>{(c.dscr || 0).toFixed(2)}</div>
                                    </div>
                                    <div className="bg-slate-700/50 rounded p-2 border border-slate-600">
                                        <div className="text-[10px] text-slate-400">ROI</div>
                                        <div className="font-bold text-md text-yellow-300">{fmtDec(c.roi)}%</div>
                                    </div>
                                </div>
                                
                                {/* Scenario Comparison Table */}
                                <div className="mt-3 pt-3 border-t border-slate-600">
                                    <div className="text-xs text-slate-400 mb-2 font-bold">{t('scenComp')}</div>
                                    <div className="grid grid-cols-4 text-xs gap-1 text-center">
                                        <div className="text-slate-500">Metric</div>
                                        <div className="text-red-300">{t('scenWorst')}</div>
                                        <div className="text-blue-300">{t('scenBase')}</div>
                                        <div className="text-green-300">{t('scenBest')}</div>
                                        
                                        <div className="text-left text-slate-300 pl-1">{t('scenProfit')}</div>
                                        {scenarioComparison.map((s, i) => (
                                            <div key={i} className={`font-bold ${s.netProfit > 0 ? 'text-white' : 'text-red-400'}`}>{fmt(s.netProfit/1000)}k</div>
                                        ))}
                                        
                                        <div className="text-left text-slate-300 pl-1">{t('scenCash')}</div>
                                        {scenarioComparison.map((s, i) => (
                                            <div key={i} className={`font-bold ${s.cashFinal > 0 ? 'text-white' : 'text-red-400'}`}>{fmt(s.cashFinal/1000)}k</div>
                                        ))}
                                    </div>
                                </div>

                                <div className="mt-2 text-center text-xs text-slate-400">
                                    {t('payback')} <span className="text-white font-bold">{c.paybackMonth}</span> | 
                                    BEP: <span className="text-white font-bold">{fmt(c.bepUnits)}</span> {t('bag')}/{t('month')}
                                </div>
                            </div>

                            <div className="card border-blue-200">
                                <div className="card-header bg-blue-50/50"><div className="card-title text-blue-800">{t('salesTargetTitle')}</div></div>
                                <div className="card-body">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="input-group"><label className="input-label">{t('targetBags')}</label><input type="number" className="input-field text-lg font-bold text-blue-700 border-blue-300" value={d.targetBags} onChange={e=>up('targetBags',null,e.target.value)}/></div>
                                        <div className="input-group"><label className="input-label">{t('sellPrice')}</label><input type="number" className="input-field text-lg" value={d.price} onChange={e=>up('price',null,e.target.value)}/></div>
                                    </div>
                                    <div className="input-group bg-yellow-50 p-2 rounded border border-yellow-200"><label className="input-label text-yellow-800 font-bold">{t('creditTerm')}</label><select className="input-field bg-white text-yellow-900" value={d.creditTerm} onChange={e=>up('creditTerm',null,e.target.value)}><option value="0">{t('cash')}</option><option value="15">TikTok Shop (15 {t('day')})</option><option value="20">{t('credit')} 20</option><option value="30">{t('credit')} 30</option><option value="60">{t('credit')} 60</option></select><div className="text-[10px] text-yellow-600 mt-1">{t('creditWarning')}</div></div>
                                    <div className="flex justify-between bg-slate-50 p-3 rounded mt-2 border border-slate-100">
                                        <div className="text-center"><div className="text-xs text-slate-500">{t('totalSales')}</div><div className="font-bold text-slate-700">{fmt(c.grossRev)}</div></div>
                                        <div className="text-center"><div className="text-xs text-slate-500">{t('targetPerDay')}</div><div className="font-bold text-slate-700">{fmt(c.dayTarget)}</div></div>
                                        <div className="text-center"><div className="text-xs text-slate-500">{t('targetPerHour')}</div><div className="font-bold text-slate-700">{fmtDec(c.hourTarget)}</div></div>
                                    </div>
                                </div>
                            </div>
                            
                            {/* NEW: Capacity Utilization Engine */}
                            <div className="card border-slate-300">
                                <div className="card-header bg-slate-100"><div className="card-title text-slate-700">{t('capTitle')}</div></div>
                                <div className="card-body p-3">
                                    <div className="input-group mb-2">
                                        <label className="input-label">{t('maxCapInput')}</label>
                                        <input type="number" className="input-field text-right font-bold" value={d.maxCapacity} onChange={e=>up('maxCapacity',null,e.target.value)} />
                                    </div>
                                    
                                    <div className="mb-2">
                                        <div className="flex justify-between text-xs mb-1">
                                            <span>{t('utilRate')}</span>
                                            <span className={`font-bold ${c.utilizationPct > 100 ? 'text-red-600' : (c.utilizationPct < 50 ? 'text-orange-500' : 'text-green-600')}`}>
                                                {c.utilizationPct.toFixed(1)}%
                                            </span>
                                        </div>
                                        <div className="w-full bg-gray-200 rounded-full h-2.5">
                                            <div className={`h-2.5 rounded-full ${c.utilizationPct > 100 ? 'bg-red-600' : (c.utilizationPct > 80 ? 'bg-green-500' : 'bg-blue-500')}`} style={{width: `${Math.min(c.utilizationPct, 100)}%`}}></div>
                                        </div>
                                        <div className="text-[10px] text-right mt-1 text-slate-500">
                                            {c.utilizationPct > 100 ? t('capWarning') : (c.utilizationPct >= 70 ? t('capOptimal') : t('capWaste'))}
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-2 mt-3 pt-3 border-t border-dashed">
                                        <div className="text-center p-2 bg-slate-50 rounded">
                                            <div className="text-[10px] text-slate-500">Fixed Cost / Unit</div>
                                            <div className="text-sm font-bold text-slate-700">{fmtDec(c.fixedCostPerUnit)} à¸¿</div>
                                        </div>
                                        <div className="text-center p-2 bg-slate-50 rounded">
                                            <div className="text-[10px] text-slate-500">Var Cost / Unit</div>
                                            <div className="text-sm font-bold text-slate-700">{fmtDec(c.varCostPerUnitDisplay)} à¸¿</div>
                                        </div>
                                    </div>
                                    <div className="text-center mt-2 p-1 bg-green-50 rounded border border-green-100">
                                        <div className="text-[10px] text-green-600">Total Cost / Unit</div>
                                        <div className="font-bold text-green-800">{fmtDec(c.fixedCostPerUnit + c.varCostPerUnitDisplay)} à¸¿</div>
                                    </div>
                                </div>
                            </div>

                            {/* NEW: Channel Mix Calculator */}
                            <div className="card border-purple-200">
                                <div className="card-header bg-purple-50"><div className="card-title text-purple-800">{t('channelMixTitle')}</div></div>
                                <div className="card-body p-3">
                                    <div className="flex justify-between text-xs font-bold text-slate-500 mb-2 px-2">
                                        <span>Channel</span>
                                        <span>{t('channelPct')}</span>
                                        <span>{t('platformFeePct')}</span>
                                    </div>
                                    {['tiktok', 'shopee', 'offline'].map(ch => (
                                        <div key={ch} className="flex items-center justify-between mb-2 text-sm">
                                            <span className="capitalize w-20">{ch === 'offline' ? t('offline') : ch}</span>
                                            <input type="number" className="w-12 border rounded text-center" value={d.channelMix[ch]} onChange={e=>upNew('channelMix', ch, e.target.value)}/>
                                            <input type="number" className="w-12 border rounded text-center text-slate-500" value={d.channelFees[ch]} onChange={e=>upNew('channelFees', ch, e.target.value)}/>
                                        </div>
                                    ))}
                                    <div className="mt-2 pt-2 border-t flex justify-between text-sm font-bold text-purple-700">
                                        <span>{t('weightedFee')}</span>
                                        <span>{(c.blendedFeePct || 0).toFixed(2)}%</span>
                                    </div>
                                </div>
                            </div>

                            {/* NEW: Pricing Elasticity */}
                            <div className="card border-blue-200">
                                <div className="card-header bg-blue-50"><div className="card-title text-blue-800">{t('elasticityTitle')}</div></div>
                                <div className="card-body p-3">
                                    <div className="flex items-center justify-between mb-4">
                                        <div className="text-xs text-slate-500">{t('elasticityCoef')}</div>
                                        <input type="number" className="w-16 border rounded text-right font-bold text-blue-600" step="0.1" value={d.elasticityParams.coefficient} onChange={e=>upNew('elasticityParams', 'coefficient', e.target.value)}/>
                                    </div>
                                    <div className="text-[10px] text-slate-400 mb-3 text-center">
                                        {typeof t('elasticityDesc') === 'function' ? t('elasticityDesc')(d.elasticityParams.coefficient) : t('elasticityDesc')}
                                    </div>
                                    
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-xs text-right">
                                            <thead>
                                                <tr className="bg-slate-100 text-slate-600">
                                                    <th className="p-1 text-center">Change</th>
                                                    <th className="p-1">{t('optPrice')}</th>
                                                    <th className="p-1">{t('estVol')}</th>
                                                    <th className="p-1">{t('estRev')}</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {c.elasticityData.map((row, i) => (
                                                    <tr key={i} className={`border-b ${row.pct === '+0%' ? 'bg-blue-50 font-bold' : ''}`}>
                                                        <td className="p-1 text-center">{row.pct}</td>
                                                        <td className="p-1">{fmt(row.price)}</td>
                                                        <td className="p-1">{fmt(row.vol)}</td>
                                                        <td className={`p-1 ${row.rev > c.grossRev ? 'text-green-600' : 'text-slate-600'}`}>{fmt(row.rev)}</td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div className="card border-orange-200">
                                <div className="card-header bg-orange-50"><div className="card-title text-orange-800">{t('byProductTitle')}</div></div>
                                <div className="card-body p-2">
                                    <table className="w-full text-xs">
                                        <thead><tr className="border-b border-orange-100 text-orange-600"><th className="p-1 text-left">{t('item')}</th><th className="p-1 text-center">%</th><th className="p-1 text-right">{t('ton')}</th><th className="p-1 text-right">{t('pricePerTon')}</th><th className="p-1 text-right">{t('totalIncome')}</th></tr></thead>
                                        <tbody>
                                            {c.byProductsCalc.map((item, i) => (
                                                <tr key={i} className="border-b border-dashed border-slate-100 hover:bg-orange-50/30">
                                                    <td className="p-1">{item.id ? t(item.id) : item.name}</td>
                                                    <td className="p-1 text-center text-slate-400">
                                                        <input type="number" className="input-field text-xs p-1 h-6 w-full text-center" value={item.percent} onChange={e=>upArr('byProducts',i,'percent',e.target.value)}/>
                                                    </td>
                                                    <td className="p-1 text-right font-medium">{fmtDec(item.weight)}</td>
                                                    <td className="p-1"><input type="number" className="input-field text-xs p-1 h-6 w-full text-right" value={item.price} onChange={e=>upArr('byProducts',i,'price',e.target.value)}/></td>
                                                    <td className="p-1 text-right font-bold text-orange-700">{fmt(item.revenue)}</td>
                                                </tr>
                                            ))}
                                            <tr className="bg-orange-50 font-bold border-t border-orange-200"><td colSpan="4" className="p-2 text-right text-orange-800">{t('totalByProductIncome')}</td><td className="p-2 text-right text-orange-800">{fmt(c.totalByProductIncome)}</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div className="card">
                                <div className="card-header"><div className="card-title text-sm">{t('logisticsTitle')}</div></div>
                                <div className="card-body p-3">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="input-group"><label className="input-label">{t('ownDeliveryPercent')}</label><input type="number" className="input-field" value={d.logistics.percent} onChange={e=>up('logistics','percent',e.target.value)}/></div>
                                        <div className="input-group"><label className="input-label">{t('dropOffProfit')}</label><input type="number" className="input-field" value={d.logistics.profit} onChange={e=>up('logistics','profit',e.target.value)}/></div>
                                    </div>
                                    <div className="text-right text-sm text-green-600 font-bold mt-2 border-t pt-2">{t('extraIncome')} +{fmt(c.logIncome)}</div>
                                </div>
                            </div>

                            {/* NEW: VAT Refund Section */}
                            <div className="card border-blue-100">
                                <div className="card-header bg-blue-50"><div className="card-title text-blue-800">{t('vatRefundTitle')}</div></div>
                                <div className="card-body p-3 text-xs">
                                    <div className="flex justify-between mb-1 text-slate-500"><span>{t('vatableExp')}</span><span>{fmt(c.vatBreakdown.vatableExp)}</span></div>
                                    <div className="text-[10px] text-slate-400 pl-2 mb-2">{t('vatNote')}</div>
                                    <div className="flex justify-between border-t border-dashed pt-2">
                                        <span>{t('outputVat')}</span>
                                        <span className="text-red-500 font-bold">{fmt(c.vatBreakdown.outputVat)}</span>
                                    </div>
                                    <div className="flex justify-between">
                                        <span>{t('inputVat')}</span>
                                        <span className="text-green-500 font-bold">-{fmt(c.vatBreakdown.inputVat)}</span>
                                    </div>
                                    <div className={`flex justify-between mt-2 pt-2 border-t font-bold text-sm ${c.vatBreakdown.netVat > 0 ? 'text-red-600' : 'text-green-600'}`}>
                                        <span>{c.vatBreakdown.netVat > 0 ? t('payMore') : t('refund')}</span>
                                        <span>{fmt(Math.abs(c.vatBreakdown.netVat))}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="card">
                                <div className="card-header"><div className="card-title text-indigo-700">{t('monthlyFlowTitle')}</div></div>
                                <div className="card-body">
                                    <div className="flow-row"><span className="text-indigo-600 font-bold">{t('cashInflow')}</span><span>{fmt(c.revBreakdown.totalIn)}</span></div>
                                    <div className="flow-row flow-sub"><span>{t('salesGross')}</span><span>{fmt(c.revBreakdown.sales)}</span></div>
                                    <div className="flow-row flow-sub"><span>{t('refundDeduction')}</span><span className="text-red-400">-{fmt(c.refundTotal)}</span></div>
                                    <div className="flow-row flow-sub"><span>- {t('byProductTitle')}</span><span>{fmt(c.revBreakdown.byProduct)}</span></div>
                                    <div className="flow-row flow-sub"><span>- Logistics</span><span>{fmt(c.revBreakdown.logistics)}</span></div>
                                    <div className="flow-row mt-2"><span className="text-red-600 font-bold">{t('vatObligation')}</span><span>-{fmt(c.revBreakdown.vat)}</span></div>
                                    <div className="flow-row flow-sub text-xs"><span>{t('vatNote2')}</span></div>
                                    <div className="flow-row mt-2"><span className="text-orange-600 font-bold">{t('opOutflow')}</span><span>-{fmt(c.revBreakdown.opCost)}</span></div>
                                    <div className="flow-row flow-sub font-bold text-slate-600">{t('varExclVat')}<span>{fmt(c.revBreakdown.opVar)}</span></div>
                                    <div className="flow-row flow-sub pl-6 text-xs text-slate-500">- Rice: {fmt(c.revBreakdown.riceCost)} | Pack: {fmt(c.revBreakdown.packCost)}<br/>- Fees: {fmt(c.revBreakdown.feesCost)} | Elec: {fmt(c.revBreakdown.elecCost)}</div>
                                    <div className="flow-row flow-sub font-bold text-slate-600 mt-1">{t('fixedCost')}<span>{fmt(c.revBreakdown.opFixed)}</span></div>
                                    <div className="flow-row flow-sub pl-6 text-xs text-slate-500">- Salary (Base+SSO): {fmt(c.revBreakdown.salaryCost)}</div>
                                    
                                    {/* Expanded Other Fixed Breakdown */}
                                    <div className="flow-row flow-sub pl-6 text-xs text-slate-500">- Other Fixed: {fmt(c.revBreakdown.otherFixed)}</div>
                                    <div className="bg-slate-50 rounded p-2 ml-6 my-1 border border-slate-100">
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ Campaign:</span><span>{fmt(c.revBreakdown.otherDetails.campaign)}</span></div>
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ ERP:</span><span>{fmt(c.revBreakdown.otherDetails.erp)}</span></div>
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ Insurance:</span><span>{fmt(c.revBreakdown.otherDetails.insurance)}</span></div>
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ Audit/Legal:</span><span>{fmt(c.revBreakdown.otherDetails.audit)}</span></div>
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ Travel/Ent:</span><span>{fmt(c.revBreakdown.otherDetails.travel)}</span></div>
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ Misc:</span><span>{fmt(c.revBreakdown.otherDetails.misc)}</span></div>
                                        <div className="flex justify-between text-[10px] text-slate-400"><span>â€¢ Maintenance:</span><span>{fmt(c.revBreakdown.otherDetails.maintenance)}</span></div>
                                    </div>

                                    <div className="flow-row total text-lg bg-green-50 p-2 rounded mt-2"><span className="text-green-700">{t('netCashEbitda')}</span><span className="text-green-700">{fmt(c.revBreakdown.netCash)}</span></div>
                                </div>
                            </div>
                        </div>

                        {/* --- RIGHT: Analysis --- */}
                        <div className="lg:col-span-4 space-y-4">
                            <h2 className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">{t('section3')}</h2>
                            
                            <div className="card print-btn-hide">
                                <div className="card-header"><div className="card-title">{t('cumCashflow')}</div></div>
                                <div className="card-body h-[200px]">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <AreaChart data={c.cf}><CartesianGrid strokeDasharray="3 3" vertical={false} /><XAxis dataKey="m" tick={{fontSize: 10}} /><YAxis tick={{fontSize: 10}} tickFormatter={(val)=>`${val/1000000}M`} /><Tooltip formatter={(value) => fmt(value)} labelFormatter={(l)=>`Month ${l}`} /><Area type="monotone" dataKey="cashFinal" stroke="#10b981" fill="#dcfce7" strokeWidth={2} /></AreaChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>

                            {/* Break-even Chart - FIXED */}
                            <div className="card">
                                <div className="card-header"><div className="card-title text-sm">{t('bepTitle')}</div></div>
                                <div className="card-body h-[200px]">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <ComposedChart data={c.bepData}>
                                            <CartesianGrid strokeDasharray="3 3" />
                                            <XAxis dataKey="units" type="number" tickFormatter={(val)=>`${val/1000}k`} label={{ value: 'Units (Bags)', position: 'insideBottom', offset: -5, fontSize: 10 }} />
                                            <YAxis tickFormatter={(val)=>`${val/1000}k`} tick={{fontSize: 10}} />
                                            <Tooltip formatter={(value) => fmt(value)} labelFormatter={(l)=>`Units: ${fmt(l)}`} />
                                            <Line type="monotone" dataKey="revenue" stroke="#10b981" name="Revenue" strokeWidth={2} dot={false} />
                                            <Line type="monotone" dataKey="totalCost" stroke="#ef4444" name="Total Cost" strokeWidth={2} dot={false} />
                                            <Line type="monotone" dataKey="fixedCost" stroke="#94a3b8" name="Fixed Cost" strokeDasharray="5 5" dot={false} />
                                        </ComposedChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>
                            
                            {/* Revenue Structure */}
                            <div className="card">
                                <div className="card-header"><div className="card-title">{t('revStruct')}</div></div>
                                <div className="card-body h-[300px]">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <PieChart><Pie data={revenueData} cx="50%" cy="45%" innerRadius={40} outerRadius={70} paddingAngle={5} dataKey="value" label={({percent}) => `${(percent * 100).toFixed(0)}%`}>{revenueData.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)}</Pie><Tooltip formatter={(value) => fmt(value)} /><Legend iconSize={10} layout="horizontal" verticalAlign="bottom" align="center" wrapperStyle={{fontSize:'11px'}}/></PieChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>
                            
                            {/* Cost Structure - Resized */}
                            <div className="card">
                                <div className="card-header"><div className="card-title">{t('costStruct')}</div></div>
                                <div className="card-body h-[300px]">
                                    <ResponsiveContainer width="100%" height="100%">
                                        <PieChart><Pie data={costData} cx="50%" cy="45%" innerRadius={40} outerRadius={70} paddingAngle={2} dataKey="value" label={({percent}) => `${(percent * 100).toFixed(0)}%`}>{costData.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)}</Pie><Tooltip formatter={(value) => fmt(value)} /><Legend iconSize={10} layout="horizontal" verticalAlign="bottom" align="center" wrapperStyle={{fontSize:'11px'}}/></PieChart>
                                    </ResponsiveContainer>
                                </div>
                            </div>

                            {/* Sensitivity Analysis with Heatmap */}
                            <div className="card mt-4">
                                <div className="card-header"><div className="card-title text-sm">{t('sensitivity')}</div></div>
                                <div className="card-body p-2">
                                    <div className="text-[10px] text-center mb-1 text-slate-400">Y: Price | X: Vol</div>
                                    <table className="w-full matrix-table">
                                        <thead>
                                            <tr>
                                                <th className="bg-slate-100">Price \ Vol</th>
                                                <th className="matrix-header">-10%</th>
                                                <th className="matrix-header">Base</th>
                                                <th className="matrix-header">+10%</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {sensitivityData.map((row, rI) => (
                                                <tr key={rI}>
                                                    <td className="matrix-header">{row[0].pLabel}</td>
                                                    {row.map((cell, cI) => (
                                                        <td key={cI} className={`font-bold ${getHeatmapColor(cell.profit)}`}>{fmt(cell.profit/1000)}k</td>
                                                    ))}
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Spread Sensitivity */}
                            <div className="card mt-4">
                                <div className="card-header"><div className="card-title text-sm">{t('spreadAnalysis')}</div></div>
                                <div className="card-body p-2">
                                    <div className="text-[10px] text-center mb-1 text-slate-400">Y: {t('paddyLabel')} | X: {t('priceLabel')}</div>
                                    <table className="w-full matrix-table">
                                        <thead>
                                            <tr>
                                                <th className="bg-slate-100">Cost \ Price</th>
                                                <th className="matrix-header">-10%</th>
                                                <th className="matrix-header">Base</th>
                                                <th className="matrix-header">+10%</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {spreadData.map((row, rI) => (
                                                <tr key={rI}>
                                                    <td className="matrix-header">{row[0].cLabel}</td>
                                                    {row.map((cell, cI) => (
                                                        <td key={cI} className={`font-bold ${getHeatmapColor(cell.profit)}`}>{fmt(cell.profit/1000)}k</td>
                                                    ))}
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Marketing Funnel & Budget Allocation */}
                            <div className="card mt-4 border-indigo-200">
                                <div className="card-header bg-indigo-50"><div className="card-title text-indigo-800">{t('tiktokAdsTitle')}</div></div>
                                <div className="card-body p-3">
                                    {/* Top Row: Budget & ROAS (The most important for GMV Max) */}
                                    <div className="grid grid-cols-4 gap-2 mb-4 border-b border-indigo-100 pb-3">
                                        <div className="text-center col-span-1">
                                            <div className="text-[10px] text-slate-500 uppercase font-bold">{t('totalBudget')}</div>
                                            <div className="text-lg font-bold text-indigo-700">{fmt(c.funnelMetrics.budget)}</div>
                                            <div className="text-[9px] text-slate-400">{t('budgetNote')}</div>
                                        </div>
                                        <div className="text-center bg-indigo-50 rounded border border-indigo-100 p-1 col-span-1">
                                            <div className="text-[10px] text-indigo-800 uppercase font-bold">{t('targetRoas')}</div>
                                            <div className="text-xl font-bold text-indigo-600">{(c.funnelMetrics.roas || 0).toFixed(2)}x</div>
                                            <div className="text-[9px] text-indigo-400">{t('minRoasNote')}</div>
                                        </div>
                                        
                                        {/* NEW: Breakeven ROAS */}
                                        <div className="text-center bg-red-50 rounded border border-red-100 p-1 col-span-1">
                                            <div className="text-[10px] text-red-800 uppercase font-bold">{t('beRoas')}</div>
                                            <div className="text-xl font-bold text-red-600">{(c.funnelMetrics.beRoas || 0).toFixed(2)}x</div>
                                            <div className="text-[9px] text-red-400 truncate">{t('beRoasNote')}</div>
                                        </div>

                                         <div className="text-center col-span-1">
                                            <div className="text-[10px] text-slate-500 uppercase font-bold">{t('acos')}</div>
                                            <div className="text-lg font-bold text-slate-600">{(c.funnelMetrics.acos || 0).toFixed(1)}%</div>
                                            <div className="text-[9px] text-slate-400">{t('acosNote')}</div>
                                        </div>
                                    </div>

                                    {/* Middle Row: Manual Bidding Reference (CPA/CPC) */}
                                    <div className="grid grid-cols-2 gap-4 mb-3">
                                        <div>
                                            <div className="text-[10px] text-slate-400 uppercase font-bold">{t('maxCpa')}</div>
                                            <div className="text-xl font-bold text-pink-600">{fmt(c.funnelMetrics.cpa)} à¸¿</div>
                                            <div className="text-[9px] text-slate-400">{t('maxCpaNote')}</div>
                                        </div>
                                        <div>
                                            <div className="text-[10px] text-slate-400 uppercase font-bold">{t('maxCpc')}</div>
                                            <div className="text-xl font-bold text-blue-600">{(c.funnelMetrics.cpc || 0).toFixed(2)} à¸¿</div>
                                            <div className="text-[9px] text-slate-400">{t('maxCpcNote')}</div>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-slate-50 rounded p-2 border border-slate-200 space-y-2">
                                        <div className="text-xs font-bold text-slate-700 mb-1 border-b pb-1">{t('funnelInput')}</div>
                                        <div className="flex justify-between items-center text-xs">
                                            <span>{t('basketSize')}</span>
                                            <input type="number" className="w-16 border rounded text-right px-1" step="0.1" value={d.mktFunnel.basketSize} onChange={e=>upFunnel('basketSize', e.target.value)} />
                                        </div>
                                        <div className="flex justify-between items-center text-xs">
                                            <span>Conversion Rate (%)</span>
                                            <input type="number" className="w-16 border rounded text-right px-1" step="0.1" value={d.mktFunnel.cvr} onChange={e=>upFunnel('cvr', e.target.value)} />
                                        </div>
                                        <div className="flex justify-between items-center text-xs">
                                            <span>CTR (%)</span>
                                            <input type="number" className="w-16 border rounded text-right px-1" step="0.1" value={d.mktFunnel.ctr} onChange={e=>upFunnel('ctr', e.target.value)} />
                                        </div>
                                    </div>

                                    <div className="mt-3 space-y-1">
                                        <div className="flex justify-between text-xs">
                                            <span className="text-slate-500">{t('impressionsNeeded')}</span>
                                            <span className="font-medium">{fmt(c.funnelMetrics.impressions)}</span>
                                        </div>
                                        <div className="flex justify-between text-xs">
                                            <span className="text-slate-500">{t('clicksTraffic')}</span>
                                            <span className="font-medium">{fmt(c.funnelMetrics.visitors)}</span>
                                        </div>
                                        <div className="flex justify-between text-xs font-bold text-indigo-700 bg-indigo-50 p-1 rounded">
                                            <span>{t('ordersTarget')}</span>
                                            <span>{fmt(c.funnelMetrics.orders)}</span>
                                        </div>
                                    </div>

                                    {/* Ads Efficiency Matrix */}
                                    <div className="mt-4 pt-3 border-t border-indigo-200">
                                        <div className="flex justify-between items-center mb-2">
                                            <div className="text-xs font-bold text-indigo-800">{t('adsMatrixTitle')}</div>
                                            <div className="text-[9px] text-slate-500">Y: {t('adsMatY')} | X: {t('adsMatX')}</div>
                                        </div>
                                        <table className="w-full matrix-table">
                                            <thead>
                                                <tr>
                                                    <th className="bg-indigo-50 text-[9px] text-indigo-900">CVR \ CTR</th>
                                                    {adsMatrixData[0] && adsMatrixData[0].map((cell, i) => (
                                                        <th key={i} className="matrix-header text-[9px]">{cell.ctrLabel}</th>
                                                    ))}
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {adsMatrixData.map((row, i) => (
                                                    <tr key={i}>
                                                        <td className="matrix-header text-[9px]">{row[0].cvrLabel}</td>
                                                        {row.map((cell, j) => (
                                                            <td key={j} className={`text-[10px] font-bold ${cell.roas < c.funnelMetrics.beRoas ? 'bg-red-100 text-red-600' : 'bg-green-100 text-green-700'}`}>
                                                                {cell.roas.toFixed(1)}x
                                                            </td>
                                                        ))}
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                        <div className="text-[9px] text-center mt-1 text-slate-400">*à¸ªà¸µà¹à¸”à¸‡ = à¸‚à¸²à¸”à¸—à¸¸à¸™ (à¸•à¹ˆà¸³à¸à¸§à¹ˆà¸² Breakeven {(c.funnelMetrics.beRoas || 0).toFixed(1)}x)</div>
                                    </div>
                                </div>
                            </div>

                            {/* NEW: Customer Lifetime Value (CLV) */}
                            <div className="card mt-4 border-teal-200">
                                <div className="card-header bg-teal-50"><div className="card-title text-teal-800">{t('clvTitle')}</div></div>
                                <div className="card-body p-3">
                                    <div className="grid grid-cols-2 gap-3 mb-3">
                                        <div>
                                            <label className="text-[10px] text-slate-500">{t('freqPerYear')}</label>
                                            <input type="number" className="input-field text-center" value={d.clvParams.freq} onChange={e=>upNew('clvParams', 'freq', e.target.value)}/>
                                        </div>
                                        <div>
                                            <label className="text-[10px] text-slate-500">{t('retentionRate')}</label>
                                            <input type="number" className="input-field text-center" value={d.clvParams.retention} onChange={e=>upNew('clvParams', 'retention', e.target.value)}/>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-3 text-center mb-3">
                                        <div className="p-2 border rounded bg-teal-50/50">
                                            <div className="text-[9px] text-slate-400">{t('ltv1')}</div>
                                            <div className="font-bold text-teal-700">{fmt(c.funnelMetrics.ltv1)} à¸¿</div>
                                        </div>
                                        <div className="p-2 border rounded bg-teal-50/50">
                                            <div className="text-[9px] text-slate-400">{t('ltv3')}</div>
                                            <div className="font-bold text-teal-700">{fmt(c.funnelMetrics.ltv3)} à¸¿</div>
                                        </div>
                                    </div>
                                    <div className="flex justify-between items-center text-xs border-t pt-2">
                                        <span className="font-bold text-slate-600">{t('ltvCacRatio')}</span>
                                        <span className={`font-bold ${c.funnelMetrics.ltvCacRatio >= 3 ? 'text-green-600' : 'text-orange-500'}`}>{(c.funnelMetrics.ltvCacRatio || 0).toFixed(1)}x</span>
                                    </div>
                                    <div className="text-[9px] text-right text-slate-400 mt-1">{t('ltvDesc')}</div>
                                </div>
                            </div>

                        </div>

                        {/* --- BOTTOM --- */}
                        <div className="lg:col-span-12 space-y-6">
                             <div className="card">
                                <div className="card-header"><div className="card-title text-slate-700">{t('detailedCashflow')}</div><div className="flex items-center gap-2 text-xs"><span className="text-slate-500">{t('monthlyGrowth')}</span><input type="number" className="border border-slate-300 rounded px-2 py-1 w-16 text-right" value={d.monthlyGrowth} onChange={e=>up('monthlyGrowth', null, e.target.value)} /><span className="text-slate-500">%</span><span className="ml-2 text-slate-400 font-bold bg-slate-100 px-2 py-1 rounded">Credit: {d.creditTerm} {t('day')}</span></div></div>
                                <div className="overflow-x-auto custom-scroll">
                                    <table className="w-full text-xs text-right border-collapse min-w-[800px]">
                                        <thead className="bg-slate-100 text-slate-600"><tr><th className="p-3 text-center">{t('month')}</th><th className="p-3 text-slate-400">{t('cfSales')}</th><th className="p-3 text-blue-700 font-bold">{t('cfInflow')}</th><th className="p-3 text-red-500">{t('cfExp')}</th><th className="p-3 text-orange-500">{t('cfVat')}</th><th className="p-3 text-blue-600">{t('cfOpCash')}</th><th className="p-3 font-bold text-green-700 bg-green-50">{t('cfBalance')}</th></tr></thead>
                                        <tbody>
                                            <tr className="bg-slate-50 border-b border-slate-200"><td className="p-3 text-center font-bold text-slate-500">{t('start0')}</td><td className="p-3" colSpan="5"></td><td className="p-3 font-bold text-slate-700 bg-green-50/50">{fmt(c.workingCap)}</td></tr>
                                            {c.cf.map((row) => (<tr key={row.m} className={`border-b hover:bg-slate-50 ${row.cashFinal < 0 ? 'bg-red-50':''}`}><td className="p-3 text-center font-bold text-slate-400">{row.m}</td><td className="p-3 text-slate-400">{fmt(row.rev)}</td><td className="p-3 font-bold text-blue-700">{fmt(row.revCashIn)}</td><td className="p-3 text-red-400">{fmt(row.expCash)}</td><td className={`p-3 font-bold ${row.vatPaid > 0 ? 'text-orange-500' : 'text-green-500'}`}>{fmt(row.vatPaid)}</td><td className="p-3 font-bold text-blue-600">{fmt(row.netOpCash)}</td><td className={`p-3 font-bold ${row.cashFinal < 0 ? 'text-red-600':'text-green-700 bg-green-50/30'}`}>{fmt(row.cashFinal)}</td></tr>))}
                                            <tr className="bg-slate-200 font-bold border-t-2 border-slate-400 text-slate-800"><td className="p-3 text-center">{t('total')}</td><td className="p-3 text-slate-600">{fmt(c.cfTotal.rev)}</td><td className="p-3 text-blue-800">{fmt(c.cfTotal.revCashIn)}</td><td className="p-3 text-red-600">{fmt(c.cfTotal.expCash)}</td><td className="p-3 text-orange-600">{fmt(c.cfTotal.vatPaid)}</td><td className="p-3 text-blue-800">{fmt(c.cfTotal.netOpCash)}</td><td className="p-3 bg-green-100 text-green-900">{fmt(c.cfTotal.cashFinal)}</td></tr>
                                        </tbody>
                                    </table>
                                    <div className="mt-4 grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                                            <div className="p-3 bg-slate-100 rounded border"><div className="text-xs text-slate-500">{t('wcStart')}</div><div className="font-bold text-slate-700">{fmt(c.workingCap)}</div></div>
                                            <div className={`p-3 rounded border ${c.lowestCashBalance < 0 ? 'bg-red-100 border-red-300' : 'bg-green-50 border-green-200'}`}><div className={`text-xs font-bold ${c.lowestCashBalance < 0 ? 'text-red-600' : 'text-green-600'}`}>{t('lowestCash')}</div><div className={`font-bold ${c.lowestCashBalance < 0 ? 'text-red-700' : 'text-green-700'}`}>{fmt(c.lowestCashBalance)}</div></div>
                                            <div className="p-3 bg-blue-50 rounded border border-blue-100 text-red-500"><div className="text-xs text-red-500">{t('debtService')}</div><div className="font-bold">-{fmt(c.annualPrincipalPaid + c.annualFinanceCost)}</div></div>
                                            <div className="p-3 bg-red-50 rounded border border-red-100"><div className="text-xs text-red-500">{t('taxPaidCash')}</div><div className="font-bold text-red-700">-{fmt(c.cfTotal.tax)}</div></div>
                                            <div className="col-span-1 md:col-span-2 p-3 bg-indigo-50 rounded border border-indigo-200 mt-2 md:mt-0"><div className="text-xs text-indigo-600">{t('netProfitAcc')}</div><div className="font-bold text-xl text-indigo-800">{fmt(c.netProfit)}</div><div className="text-[10px] text-indigo-400">{t('netProfitDesc')}</div></div>
                                            <div className="col-span-1 md:col-span-2 p-3 bg-green-50 rounded border border-green-200 mt-2 md:mt-0"><div className="text-xs text-green-600">{t('cashEndYear')}</div><div className={`font-bold text-xl ${c.cfTotal.cashFinal < 0 ? 'text-red-600':'text-green-800'}`}>{fmt(c.cfTotal.cashFinal)}</div><div className="text-[10px] text-green-500">{t('cashEndDesc')}</div></div>
                                    </div>
                                </div>
                            </div>

                            <div className="card">
                                <div className="card-header"><div className="card-title">{t('taxDepTitle')}</div><div className="flex bg-slate-100 rounded text-[10px] overflow-hidden toggle-switch-container"><button className={`px-2 py-1 ${d.taxPaymentMode==='monthly'?'bg-blue-600 text-white':''}`} onClick={()=>up('taxPaymentMode',null,'monthly')}>Monthly</button><button className={`px-2 py-1 ${d.taxPaymentMode==='annual'?'bg-blue-600 text-white':''}`} onClick={()=>up('taxPaymentMode',null,'annual')}>Annual</button><button className={`px-2 py-1 ${d.taxPaymentMode==='deferred'?'bg-blue-600 text-white':''}`} onClick={()=>up('taxPaymentMode',null,'deferred')}>Deferred</button></div></div>
                                <div className="card-body"><div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div><h4 className="font-bold text-slate-700 mb-3 border-b pb-2">{t('depSchedule')}</h4><table className="w-full text-sm text-right"><thead className="bg-slate-50 text-slate-500"><tr><th className="text-left p-2">{t('asset')}</th><th className="p-2">{t('value')}</th><th className="p-2">{t('lifeYear')}</th><th className="p-2">{t('depPerYear')}</th></tr></thead><tbody><tr><td className="text-left p-2">{t('factory')}</td><td className="p-2">{fmt(d.capex.factory)}</td><td className="p-2"><input type="number" className="input-field text-center w-16" value={d.depreciation.factoryYears} onChange={e=>up('depreciation','factoryYears',e.target.value)}/></td><td className="p-2">{fmt(c.depFactory)}</td></tr><tr><td className="text-left p-2">{t('machine')}</td><td className="p-2">{fmt(d.capex.machine)}</td><td className="p-2"><input type="number" className="input-field text-center w-16" value={d.depreciation.machineYears} onChange={e=>up('depreciation','machineYears',e.target.value)}/></td><td className="p-2">{fmt(c.depMachine)}</td></tr><tr className="font-bold border-t"><td className="text-left p-2">{t('total')}</td><td></td><td></td><td className="p-2 text-red-500">{fmt(c.annualDepreciation)}</td></tr></tbody></table></div>
                                    <div><h4 className="font-bold text-slate-700 mb-3 border-b pb-2">{t('corpTax')}</h4><div className="space-y-2 text-sm"><div className="flex justify-between"><span>EBITDA</span><span>{fmt(c.ebitda)}</span></div><div className="flex justify-between text-red-500"><span>- Depreciation</span><span>-{fmt(c.annualDepreciation)}</span></div><div className="flex justify-between text-red-500"><span>- Interest</span><span>-{fmt(c.annualFinanceCost)}</span></div><div className="flex justify-between font-bold text-blue-700 border-t pt-2"><span>{t('taxableIncome')}</span><span>{fmt(c.annualProfitEst)}</span></div></div><div className="bg-slate-50 p-2 rounded text-xs mt-3"><table className="w-full text-right"><thead><tr className="text-slate-400"><th>Tier</th><th>Rate</th><th>Tax</th></tr></thead><tbody>{c.taxDetails.map((t,i)=>(<tr key={i}><td className="text-slate-600">{t.tier}</td><td>{t.rate}%</td><td className="font-medium">{fmt(t.amount)}</td></tr>))}<tr className="border-t font-bold text-red-600"><td colSpan="2" className="pt-1">Total Tax</td><td className="pt-1">{fmt(c.annualTax)}</td></tr></tbody></table></div></div></div></div>
                            </div>

                            <div className="card">
                                <div className="card-header"><div className="card-title">{t('dividendTitle')}</div></div>
                                <div className="card-body">
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                        <div className="space-y-3"><h4 className="font-bold text-slate-700 text-sm border-b pb-1">{t('policyInput')}</h4><div className="input-group"><label className="input-label">{t('payoutRatio')}</label><input className="input-field" value={d.dividend.payout} onChange={e=>up('dividend','payout',e.target.value)}/></div><div className="input-group"><label className="input-label">{t('shareholders')}</label><input className="input-field" value={d.dividend.founders} onChange={e=>up('dividend','founders',e.target.value)}/></div></div>
                                        <div className="space-y-3"><h4 className="font-bold text-slate-700 text-sm border-b pb-1">{t('netProfitBreakdown')}</h4><div className="flex justify-between text-xs text-slate-500"><span>EBITDA (Year)</span><span>{fmt(c.ebitda)}</span></div><div className="flex justify-between text-xs text-red-400"><span>- Depreciation</span><span>-{fmt(c.annualDepreciation)}</span></div><div className="flex justify-between text-xs text-red-400"><span>- Interest</span><span>-{fmt(c.annualFinanceCost)}</span></div><div className="flex justify-between text-xs text-red-400 border-b border-slate-200 pb-1"><span>- Tax Liability</span><span>-{fmt(c.annualTax)}</span></div><div className="flex justify-between text-sm pt-1"><span className="font-bold text-slate-700">Net Profit</span><span className="font-bold text-blue-600">{fmt(c.netProfit)}</span></div></div>
                                        <div className="bg-yellow-50 p-4 rounded border border-yellow-200 text-center flex flex-col justify-center"><h4 className="font-bold text-yellow-800 text-sm mb-2">{t('shareholderReturn')}</h4><div className="text-xs text-slate-500 mb-1">{t('totalPool')}</div><div className="text-lg font-bold text-yellow-700 mb-2">{fmt(c.dividendTotal)} à¸¿</div><div className="border-t border-yellow-200 my-2"></div><div className="text-2xl font-bold text-yellow-700">{fmt(c.dividendPerPersonYear)} <span className="text-sm font-normal text-yellow-600">{t('perYear')}</span></div><div className="text-sm text-yellow-600 mt-1">{t('avgPerMonth')} {fmt(c.dividendPerPersonMonth)} {t('perMonth')}</div></div>
                                    </div>
                                </div>
                            </div>

                            {/* NEW: Financial Health Check */}
                            <div className="card border-emerald-200">
                                <div className="card-header bg-emerald-50"><div className="card-title text-emerald-800">{t('financialHealth')}</div></div>
                                <div className="card-body">
                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                        <div className="p-2 border rounded bg-white">
                                            <div className="text-[10px] text-slate-500 uppercase font-bold">{t('debtToEquity')}</div>
                                            <div className={`text-lg font-bold ${d.loan.amount/d.regCapital > 2 ? 'text-red-500' : 'text-emerald-600'}`}>{(d.loan.amount/d.regCapital).toFixed(2)}x</div>
                                            <div className="text-[9px] text-slate-400">{t('debtToEquityDesc')}</div>
                                        </div>
                                        <div className="p-2 border rounded bg-white">
                                            <div className="text-[10px] text-slate-500 uppercase font-bold">{t('returnOnAsset')}</div>
                                            <div className="text-lg font-bold text-blue-600">{c.totalSources > 0 ? ((c.netProfit / c.totalSources)*100).toFixed(1) : 0}%</div>
                                            <div className="text-[9px] text-slate-400">ROA</div>
                                        </div>
                                        <div className="p-2 border rounded bg-white">
                                            <div className="text-[10px] text-slate-500 uppercase font-bold">{t('returnOnEquity')}</div>
                                            <div className="text-lg font-bold text-blue-600">{d.regCapital > 0 ? ((c.netProfit / d.regCapital)*100).toFixed(1) : 0}%</div>
                                            <div className="text-[9px] text-slate-400">ROE</div>
                                        </div>
                                        <div className="p-2 border rounded bg-white">
                                            <div className="text-[10px] text-slate-500 uppercase font-bold">Asset Turnover</div>
                                            <div className="text-lg font-bold text-slate-600">{c.totalSources > 0 ? (c.grossRev / c.totalSources).toFixed(2) : 0}x</div>
                                            <div className="text-[9px] text-slate-400">{t('assetTurnoverDesc')}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="card">
                                <div className="card-header"><div className="card-title">{t('projectionTitle')}</div><div className="flex gap-4 text-xs items-center"><div className="flex items-center gap-1"><span>Growth:</span><input className="w-12 border rounded text-center" value={d.growth} onChange={e=>up('growth',null,e.target.value)}/>%</div><div className="flex items-center gap-1"><span>Inflation:</span><input className="w-12 border rounded text-center" value={d.inflation} onChange={e=>up('inflation',null,e.target.value)}/>%</div><div className="flex items-center gap-1 font-bold text-blue-600"><span>Discount Rate:</span><input className="w-12 border rounded text-center" value={d.discountRate} onChange={e=>up('discountRate',null,e.target.value)}/>%</div></div></div>
                                <div className="overflow-x-auto custom-scroll mb-2">
                                    <table className="w-full text-xs text-right border-collapse min-w-[800px]"><thead className="bg-indigo-900 text-white"><tr><th className="p-3 text-center">{t('pyYear')}</th><th className="p-3">{t('pyRev')}</th><th className="p-3 text-red-300">{t('pyExp')}</th><th className="p-3 font-bold text-yellow-300">{t('pyEbitda')}</th><th className="p-3 text-slate-300">{t('pyDep')}</th><th className="p-3 text-orange-300">{t('pyTax')}</th><th className="p-3 font-bold text-blue-300 bg-indigo-800">{t('pyNet')}</th><th className="p-3 text-green-300">{t('pyDiv')}</th><th className="p-3 font-bold text-green-400 bg-indigo-950">{t('pyCashEnd')}</th></tr></thead>
                                    <tbody>{projection.data.map((y,i) => (<tr key={i} className="border-b last:border-0 hover:bg-indigo-50"><td className="p-3 text-center font-bold text-indigo-900 bg-gray-50">{y.y}</td><td className="p-3 font-medium">{fmt(y.rev)}</td><td className="p-3 text-red-600">{fmt(y.exp)}</td><td className="p-3 font-bold text-yellow-700 bg-yellow-50">{fmt(y.ebitda)}</td><td className="p-3 text-slate-500">{fmt(y.dep)}</td><td className="p-3 text-orange-600">{fmt(y.tax)}{y.taxSaving > 0 && <div className="text-[9px] text-green-500">({t('taxSave')} {fmt(y.taxSaving)})</div>}</td><td className="p-3 font-bold text-blue-700 bg-blue-50">{fmt(y.net)}</td><td className="p-3 text-green-700">{fmt(y.div)}</td><td className="p-3 font-bold text-green-800 bg-green-100">{fmt(y.cash)}</td></tr>))}</tbody></table>
                                </div>
                                <div className="p-3 bg-blue-50 border-t flex justify-between items-center">
                                    <div className="text-xs text-slate-500">{t('npvDesc')}</div>
                                    <div className={`text-xl font-bold ${projection.npv > 0 ? 'text-green-600' : 'text-red-600'}`}>NPV: {fmt(projection.npv)}</div>
                                </div>
                            </div>

                            {/* NEW: AI Analysis & Recommendation Section */}
                            <div className="card mt-6 border-slate-300 shadow-md">
                                <div className="card-header bg-slate-800 text-white"><div className="card-title text-white">{t('aiAnalysis')}</div></div>
                                <div className="card-body space-y-4">
                                    
                                    {/* 1. NPV Analysis */}
                                    <div className={`p-4 rounded border-l-4 ${projection.npv > 0 ? 'bg-green-50 border-green-500' : 'bg-red-50 border-red-500'}`}>
                                        <div className="font-bold text-slate-700 flex items-center gap-2">
                                            <span className="text-lg">{projection.npv > 0 ? 'âœ…' : 'âŒ'}</span> 
                                            NPV = {fmt(projection.npv)}
                                        </div>
                                        <div className="text-sm text-slate-600 mt-2">
                                            <strong>{t('meaning')}:</strong> {projection.npv > 0 ? t('npvPos') : t('npvNeg')}
                                        </div>
                                        <div className="text-sm font-bold mt-2 text-slate-700 bg-white/50 p-2 rounded inline-block">
                                            {t('advice')}: {projection.npv > 0 ? t('npvAdvPos') : t('npvAdvNeg')}
                                        </div>
                                    </div>

                                    {/* 2. ROAS Analysis */}
                                    <div className={`p-4 rounded border-l-4 ${c.funnelMetrics.roas >= 5 ? 'bg-blue-50 border-blue-500' : (c.funnelMetrics.roas >= 3 ? 'bg-yellow-50 border-yellow-500' : 'bg-orange-50 border-orange-500')}`}>
                                        <div className="font-bold text-slate-700 flex items-center gap-2">
                                            <span className="text-lg">{c.funnelMetrics.roas >= 5 ? 'ğŸš€' : (c.funnelMetrics.roas >= 3 ? 'âš ï¸' : 'ğŸ”¥')}</span>
                                            ROAS = {(c.funnelMetrics.roas || 0).toFixed(2)}x
                                        </div>
                                        <div className="text-sm text-slate-600 mt-2">
                                            <strong>{t('situation')}:</strong> {c.funnelMetrics.roas >= 5 ? t('roasHigh') : (c.funnelMetrics.roas >= 3 ? t('roasMed') : t('roasLow'))}
                                        </div>
                                        <div className="text-sm font-bold mt-2 text-slate-700 bg-white/50 p-2 rounded inline-block">
                                            {t('advice')}: {c.funnelMetrics.roas >= 5 ? t('roasAdvHigh') : (c.funnelMetrics.roas >= 3 ? t('roasAdvMed') : t('roasAdvLow'))}
                                        </div>
                                    </div>

                                    {/* 3. Cash Flow Analysis */}
                                    <div className={`p-4 rounded border-l-4 ${c.lowestCashBalance >= 0 ? 'bg-emerald-50 border-emerald-500' : 'bg-red-50 border-red-500'}`}>
                                        <div className="font-bold text-slate-700 flex items-center gap-2">
                                            <span className="text-lg">{c.lowestCashBalance >= 0 ? 'ğŸ’°' : 'ğŸ’¸'}</span>
                                            {t('status')} (Cash Flow)
                                        </div>
                                        <div className="text-sm text-slate-600 mt-2">
                                            <strong>{t('status')}:</strong> {c.lowestCashBalance >= 0 ? t('cfSafe')(fmt(c.lowestCashBalance)) : t('cfDanger')(fmt(c.lowestCashBalance))}
                                        </div>
                                        <div className="text-sm font-bold mt-2 text-slate-700 bg-white/50 p-2 rounded inline-block">
                                            {t('advice')}: {c.lowestCashBalance >= 0 ? t('cfAdvSafe') : t('cfAdvDanger')}
                                        </div>
                                    </div>

                                    {/* --- NEW: Financial Deep Dive (Grid) --- */}
                                    <div className="mt-6 pt-4 border-t border-slate-200">
                                        <h4 className="font-bold text-slate-700 mb-3 flex items-center gap-2">{t('financialDeepDive')}</h4>
                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                            
                                            {/* EBITDA */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>EBITDA</span><span className={c.ebitda > 0 ? 'text-green-500 font-bold' : 'text-red-500 font-bold'}>{fmt(c.ebitda)}</span></div>
                                                <div className="text-[10px] text-slate-600">{c.ebitda > 0 ? t('ebitdaOk') : t('ebitdaFail')}</div>
                                            </div>

                                            {/* DSCR */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>DSCR</span><span className={c.dscr >= 1.25 ? 'text-green-500 font-bold' : 'text-orange-500 font-bold'}>{(c.dscr || 0).toFixed(2)}x</span></div>
                                                <div className="text-[10px] text-slate-600">{c.dscr >= 1.25 ? t('dscrOk') : (c.dscr >= 1 ? t('dscrWarn') : t('dscrFail'))}</div>
                                            </div>

                                            {/* D/E Ratio */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>D/E Ratio</span><span className={(d.loan.amount/d.regCapital) <= 2 ? 'text-green-500 font-bold' : 'text-red-500 font-bold'}>{(d.loan.amount/d.regCapital).toFixed(2)}x</span></div>
                                                <div className="text-[10px] text-slate-600">{(d.loan.amount/d.regCapital) <= 2 ? t('deOk') : t('deFail')}</div>
                                            </div>

                                            {/* BEP */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>BEP</span><span className={d.targetBags >= c.bepUnits ? 'text-green-500 font-bold' : 'text-red-500 font-bold'}>{fmt(c.bepUnits)}</span></div>
                                                <div className="text-[10px] text-slate-600">{d.targetBags >= c.bepUnits ? t('bepOk')(fmt(d.targetBags - c.bepUnits)) : t('bepFail')}</div>
                                            </div>

                                            {/* ROE */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>ROE</span><span className="text-blue-500 font-bold">{fmtDec(c.roi)}%</span></div>
                                                <div className="text-[10px] text-slate-600">{c.roi > 15 ? t('roeHigh') : (c.roi > 5 ? t('roeMed') : t('roeLow'))}</div>
                                            </div>

                                            {/* Margins */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Net Margin</span><span className={c.netMargin > 10 ? 'text-green-500 font-bold' : 'text-orange-500 font-bold'}>{(c.netMargin || 0).toFixed(1)}%</span></div>
                                                <div className="text-[10px] text-slate-600">{c.netMargin > 15 ? t('nmHigh') : (c.netMargin > 5 ? t('nmMed') : t('nmLow'))}</div>
                                            </div>

                                            {/* Fixed/Variable Check */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Cost Structure</span><span className="text-slate-700 font-bold">Fix {((c.revBreakdown.opFixed/c.revBreakdown.opCost)*100).toFixed(0)}% : Var {((c.revBreakdown.opVar/c.revBreakdown.opCost)*100).toFixed(0)}%</span></div>
                                                <div className="text-[10px] text-slate-600">{c.revBreakdown.opFixed > c.revBreakdown.opVar ? t('fixHigh') : t('varHigh')}</div>
                                            </div>

                                            {/* Working Cap */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Working Cap</span><span className={c.workingCap > 0 ? 'text-blue-500 font-bold' : 'text-red-500 font-bold'}>{fmt(c.workingCap)}</span></div>
                                                <div className="text-[10px] text-slate-600">{c.workingCap > 0 ? t('wcOk') : t('wcFail')}</div>
                                            </div>

                                            {/* CAPEX */}
                                            <div className="p-3 border rounded bg-white hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>CAPEX Break-even</span><span className="text-slate-700 font-bold">{c.paybackMonth}</span></div>
                                                <div className="text-[10px] text-slate-600">{t('capexDesc')}</div>
                                            </div>

                                        </div>
                                    </div>

                                    {/* --- NEW: Marketing Deep Dive (Grid) --- */}
                                    <div className="mt-4 pt-4 border-t border-slate-200">
                                        <h4 className="font-bold text-indigo-700 mb-3 flex items-center gap-2">{t('adsPerformance')}</h4>
                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                            
                                            {/* ACOS */}
                                            <div className="p-3 border rounded bg-indigo-50/50 hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>ACOS</span><span className={c.funnelMetrics.acos < 20 ? 'text-green-600 font-bold' : 'text-red-600 font-bold'}>{(c.funnelMetrics.acos || 0).toFixed(1)}%</span></div>
                                                <div className="text-[10px] text-slate-600">{c.funnelMetrics.acos < 20 ? t('acosOk') : t('acosFail')}</div>
                                            </div>

                                            {/* CPA */}
                                            <div className="p-3 border rounded bg-indigo-50/50 hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>CPA</span><span className="text-indigo-700 font-bold">{fmt(c.funnelMetrics.cpa)} à¸¿</span></div>
                                                <div className="text-[10px] text-slate-600">{t('cpaCheck')(fmt(c.funnelMetrics.cpa))}</div>
                                            </div>

                                            {/* CPC (Bid) */}
                                            <div className="p-3 border rounded bg-indigo-50/50 hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Max CPC</span><span className="text-blue-600 font-bold">{(c.funnelMetrics.cpc || 0).toFixed(2)} à¸¿</span></div>
                                                <div className="text-[10px] text-slate-600">{t('bidCheck')}</div>
                                            </div>

                                            {/* CTR / CVR */}
                                            <div className="p-3 border rounded bg-indigo-50/50 hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Metrics Target</span><span className="text-slate-700 font-bold">CTR {d.mktFunnel.ctr}% / CVR {d.mktFunnel.cvr}%</span></div>
                                                <div className="text-[10px] text-slate-600">{d.mktFunnel.ctr < 1.5 ? t('ctrLow') : ""} {d.mktFunnel.cvr < 2 ? t('cvrLow') : ""}</div>
                                            </div>

                                            {/* Basket Size */}
                                            <div className="p-3 border rounded bg-indigo-50/50 hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Basket Size (AOV)</span><span className="text-slate-700 font-bold">{d.mktFunnel.basketSize}</span></div>
                                                <div className="text-[10px] text-slate-600">{t('aovTip')}</div>
                                            </div>

                                            {/* Reach / Impression */}
                                            <div className="p-3 border rounded bg-indigo-50/50 hover:shadow-sm">
                                                <div className="flex justify-between text-xs text-slate-500 mb-1"><span>Scale</span><span className="text-slate-700 font-bold">{fmt(c.funnelMetrics.visitors)} Clicks</span></div>
                                                <div className="text-[10px] text-slate-600">{t('scaleTip')(fmt(c.funnelMetrics.visitors))}</div>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>

                            {/* NEW: Financial Glossary Section */}
                            <div className="card mt-6 border-slate-200 shadow-sm">
                                <div className="card-header bg-slate-100"><div className="card-title text-slate-600 text-sm">{t('financialGlossary')}</div></div>
                                <div className="card-body">
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-slate-600">
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-indigo-700 mb-1">EBITDA</div>
                                            <div className="text-slate-500 italic mb-1">Earnings Before Interest, Tax, Depreciation</div>
                                            <div className="whitespace-pre-line">{t('gEbitda')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-green-700 mb-1">NPV</div>
                                            <div className="text-slate-500 italic mb-1">Net Present Value</div>
                                            <div className="whitespace-pre-line">{t('gNpv')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-blue-700 mb-1">DSCR</div>
                                            <div className="text-slate-500 italic mb-1">Debt Service Coverage Ratio</div>
                                            <div className="whitespace-pre-line">{t('gDscr')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-orange-700 mb-1">D/E Ratio</div>
                                            <div className="text-slate-500 italic mb-1">Debt to Equity Ratio</div>
                                            <div className="whitespace-pre-line">{t('gDe')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-teal-700 mb-1">ROE</div>
                                            <div className="text-slate-500 italic mb-1">Return on Equity</div>
                                            <div className="whitespace-pre-line">{t('gRoe')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-pink-700 mb-1">Break-even Point</div>
                                            <div className="text-slate-500 italic mb-1">BEP (Units)</div>
                                            <div className="whitespace-pre-line">{t('gBep')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-teal-700 mb-1">ROA</div>
                                            <div className="text-slate-500 italic mb-1">Return on Assets</div>
                                            <div className="whitespace-pre-line">{t('gRoa')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-slate-700 mb-1">Asset Turnover</div>
                                            <div className="text-slate-500 italic mb-1">Asset Turnover Ratio</div>
                                            <div className="whitespace-pre-line">{t('gAssetTurn')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-blue-600 mb-1">Gross Margin</div>
                                            <div className="text-slate-500 italic mb-1">Gross Profit Margin</div>
                                            <div className="whitespace-pre-line">{t('gGross')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-green-600 mb-1">Net Margin</div>
                                            <div className="text-slate-500 italic mb-1">Net Profit Margin</div>
                                            <div className="whitespace-pre-line">{t('gNet')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-indigo-600 mb-1">Working Capital</div>
                                            <div className="text-slate-500 italic mb-1">Current Assets - Current Liabilities</div>
                                            <div className="whitespace-pre-line">{t('gWc')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-purple-600 mb-1">Tax Shield</div>
                                            <div className="text-slate-500 italic mb-1">Loss Carry Forward</div>
                                            <div className="whitespace-pre-line">{t('gTaxShield')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-slate-700 mb-1">CAPEX</div>
                                            <div className="text-slate-500 italic mb-1">Capital Expenditure</div>
                                            <div className="whitespace-pre-line">{t('gCapex')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-slate-700 mb-1">OPEX</div>
                                            <div className="text-slate-500 italic mb-1">Operating Expenditure</div>
                                            <div className="whitespace-pre-line">{t('gOpex')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-emerald-700 mb-1">Cash Flow</div>
                                            <div className="text-slate-500 italic mb-1">Liquidity</div>
                                            <div className="whitespace-pre-line">{t('gCf')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-red-600 mb-1">Fixed Cost</div>
                                            <div className="text-slate-500 italic mb-1">Fixed Expenses</div>
                                            <div className="whitespace-pre-line">{t('gFix')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-slate-50">
                                            <div className="font-bold text-orange-600 mb-1">Variable Cost</div>
                                            <div className="text-slate-500 italic mb-1">Variable Expenses</div>
                                            <div className="whitespace-pre-line">{t('gVar')}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* NEW: Marketing & Ads Glossary Section */}
                            <div className="card mt-6 border-indigo-200 shadow-sm">
                                <div className="card-header bg-indigo-50"><div className="card-title text-indigo-800 text-sm">{t('marketingGlossary')}</div></div>
                                <div className="card-body">
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-xs text-slate-600">
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-indigo-700 mb-1">ROAS</div>
                                            <div className="text-slate-500 italic mb-1">Return on Ad Spend</div>
                                            <div className="whitespace-pre-line">{t('gRoas')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-pink-700 mb-1">ACOS</div>
                                            <div className="text-slate-500 italic mb-1">Advertising Cost of Sales</div>
                                            <div className="whitespace-pre-line">{t('gAcos')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-blue-700 mb-1">CPA</div>
                                            <div className="text-slate-500 italic mb-1">Cost Per Acquisition / Action</div>
                                            <div className="whitespace-pre-line">{t('gCpa')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-orange-700 mb-1">CPC</div>
                                            <div className="text-slate-500 italic mb-1">Cost Per Click</div>
                                            <div className="whitespace-pre-line">{t('gCpc')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-teal-700 mb-1">CTR</div>
                                            <div className="text-slate-500 italic mb-1">Click-Through Rate</div>
                                            <div className="whitespace-pre-line">{t('gCtr')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-purple-700 mb-1">CVR</div>
                                            <div className="text-slate-500 italic mb-1">Conversion Rate</div>
                                            <div className="whitespace-pre-line">{t('gCvr')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-sky-700 mb-1">CPM</div>
                                            <div className="text-slate-500 italic mb-1">Cost Per Mille (1,000 Impressions)</div>
                                            <div className="whitespace-pre-line">{t('gCpm')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-green-700 mb-1">GMV</div>
                                            <div className="text-slate-500 italic mb-1">Gross Merchandise Value</div>
                                            <div className="whitespace-pre-line">{t('gGmv')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-red-700 mb-1">Impression</div>
                                            <div className="text-slate-500 italic mb-1">Ad Views</div>
                                            <div className="whitespace-pre-line">{t('gImp')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-indigo-600 mb-1">Basket Size / AOV</div>
                                            <div className="text-slate-500 italic mb-1">Average Order Value</div>
                                            <div className="whitespace-pre-line">{t('gAov')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-slate-700 mb-1">Affiliate</div>
                                            <div className="text-slate-500 italic mb-1">Commission Base</div>
                                            <div className="whitespace-pre-line">{t('gAff')}</div>
                                        </div>
                                        <div className="p-2 border rounded hover:bg-indigo-50">
                                            <div className="font-bold text-slate-700 mb-1">Reach</div>
                                            <div className="text-slate-500 italic mb-1">Unique Users</div>
                                            <div className="whitespace-pre-line">{t('gReach')}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
